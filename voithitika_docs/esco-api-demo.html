<!DOCTYPE html>
<html lang="el">
<!--
ğŸ”¥ FIREBASE ESCO DATABASE DEMO
Enterprise Live Demo Ï€Î¿Ï… ÏƒÏ…Î½Î´Î­ÎµÏ„Î±Î¹ Î¼Îµ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® Firebase ESCO database

ğŸ“‹ SETUP INSTRUCTIONS:
1. Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Firebase project: layera-dev
2. Import ESCO data Î¼Îµ: npm run setup:production && npm run import:production
3. Î‘Î½Ï„Î¹ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Firebase config ÏƒÏ„Î· Î³ÏÎ±Î¼Î¼Î® ~376 Î¼Îµ real values Î±Ï€ÏŒ Firebase Console
4. Î†Î½Î¿Î¹Î³Î¼Î± Ï„Î¿Ï… HTML file ÏƒÎµ browser

ğŸ¯ FEATURES:
- Real-time search ÏƒÏ„Î·Î½ ESCO database
- Live connection status indicator
- Support Î³Î¹Î± occupations ÎºÎ±Î¹ skills
- Production-ready Firebase security rules
- Fallback ÏƒÎµ mock data Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ connection

ğŸ”§ Configuration Guide: /c/layera/esco-database/PRODUCTION_SETUP.md
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¥ Firebase ESCO Database - Live Demo</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .search-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .search-box {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .search-input {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .search-btn {
            padding: 14px 24px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-btn:hover {
            background: #2563eb;
        }

        .search-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
        }

        .stats {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .stat-card {
            text-align: center;
            padding: 16px;
            background: #f8fafc;
            border-radius: 8px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #3b82f6;
        }

        .stat-label {
            color: #64748b;
            margin-top: 4px;
        }

        .results-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #64748b;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .occupation-card {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .occupation-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        .occupation-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .occupation-meta {
            display: flex;
            gap: 12px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }

        .meta-tag {
            background: #eff6ff;
            color: #1d4ed8;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .occupation-description {
            color: #64748b;
            line-height: 1.6;
        }

        .skills-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #f1f5f9;
        }

        .skills-grid {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .skill-tag {
            background: #f0fdf4;
            color: #166534;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
        }

        .error {
            background: #fef2f2;
            color: #dc2626;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #fecaca;
        }

        .api-info {
            background: #fefce8;
            color: #a16207;
            padding: 12px;
            border-radius: 6px;
            font-size: 0.875rem;
            margin-bottom: 16px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
        }

        .page-btn {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .page-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        @media (max-width: 768px) {
            .search-box {
                flex-direction: column;
            }

            .filters {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¥ ESCO Database Live Demo</h1>
            <p>Enterprise Firebase ESCO Database - Real-time Occupation & Skills Search</p>
        </div>

        <div class="search-section">
            <div class="api-info">
                <strong>ğŸ”¥ LIVE DATABASE:</strong> Î£Ï…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î¿ Î¼Îµ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® Firebase ESCO database - Enterprise grade Î¼Îµ production-ready data! |
                <strong>ESCO Version:</strong> v1.1.1 |
                <strong>Status:</strong> <span id="connectionStatus">Connecting...</span> |
                <strong>Project:</strong> layera-dev
            </div>

            <div class="search-box">
                <input
                    type="text"
                    id="searchInput"
                    class="search-input"
                    placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÎµÏ€Î±Î³Î³Î­Î»Î¼Î±Ï„Î¿Ï‚... (Ï€.Ï‡. Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÏ„Î®Ï‚, Î³Î¹Î±Ï„ÏÏŒÏ‚, Î´Î¹ÎºÎ·Î³ÏŒÏÎ¿Ï‚)"
                    value=""
                >
                <button id="searchBtn" class="search-btn">ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
            </div>

            <div class="filters">
                <select id="languageFilter" class="filter-select">
                    <option value="el">ğŸ‡¬ğŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                </select>

                <select id="limitFilter" class="filter-select">
                    <option value="10">10 Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±</option>
                    <option value="20" selected>20 Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±</option>
                    <option value="50">50 Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±</option>
                </select>

                <select id="typeFilter" class="filter-select">
                    <option value="occupation" selected>Î•Ï€Î±Î³Î³Î­Î»Î¼Î±Ï„Î±</option>
                    <option value="skill">Î”ÎµÎ¾Î¹ÏŒÏ„Î·Ï„ÎµÏ‚</option>
                    <option value="all">ÎŒÎ»Î±</option>
                </select>
            </div>
        </div>

        <div class="stats" id="statsSection" style="display: none;">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalResults">0</div>
                    <div class="stat-label">Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="responseTime">0ms</div>
                    <div class="stat-label">Î§ÏÏŒÎ½Î¿Ï‚ Î‘Ï€ÏŒÎºÏÎ¹ÏƒÎ·Ï‚</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="currentPage">1</div>
                    <div class="stat-label">Î£ÎµÎ»Î¯Î´Î±</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="apiVersion">v1.2</div>
                    <div class="stat-label">ESCO Version</div>
                </div>
            </div>
        </div>

        <div class="results-section">
            <div id="loadingSection" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÏƒÏ„Î¿ ESCO API...</p>
            </div>

            <div id="errorSection" style="display: none;"></div>

            <div id="resultsSection">
                <p style="text-align: center; color: #64748b; padding: 40px;">
                    Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ ÏŒÏÎ¿ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ Î³Î¹Î± Î½Î± Î´ÎµÎ¯Ï„Îµ ÎµÏ€Î±Î³Î³Î­Î»Î¼Î±Ï„Î± Î±Ï€ÏŒ Ï„Î¿ ESCO API
                </p>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase SDK modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, query, where, orderBy, limit, getDocs, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase Configuration
        // ğŸ”§ TO CONNECT TO REAL DATABASE:
        // 1. Go to: https://console.firebase.google.com/project/layera-dev/settings/general
        // 2. Copy the Firebase SDK configuration
        // 3. Replace the config below with your real values
        const firebaseConfig = {
            apiKey: "AIzaSyCFOPrm-YaHRbsZ38F7y0jYtGI6iCxzXJQ",
            authDomain: "layera-dev.firebaseapp.com",
            projectId: "layera-dev",
            storageBucket: "layera-dev.firebasestorage.app",
            messagingSenderId: "318578122017",
            appId: "1:318578122017:web:abcdef123456"
        };

        // Initialize Firebase
        let app, db;
        let currentSearchData = null;
        let isConnected = false;

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const languageFilter = document.getElementById('languageFilter');
        const limitFilter = document.getElementById('limitFilter');
        const typeFilter = document.getElementById('typeFilter');
        const loadingSection = document.getElementById('loadingSection');
        const errorSection = document.getElementById('errorSection');
        const resultsSection = document.getElementById('resultsSection');
        const statsSection = document.getElementById('statsSection');
        const connectionStatus = document.getElementById('connectionStatus');

        // Initialize Firebase Connection
        async function initializeFirebase() {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);

                // Test connection by getting metadata
                const metadataRef = doc(db, 'metadata', 'stats');
                const metadataSnap = await getDoc(metadataRef);

                if (metadataSnap.exists()) {
                    const stats = metadataSnap.data();
                    isConnected = true;
                    connectionStatus.innerHTML = `<span style="color: #16a34a;">âœ… Connected</span>`;
                    console.log('ğŸ”¥ Firebase ESCO Database Connected:', stats);

                    // Update stats display
                    updateDatabaseStats(stats);
                } else {
                    throw new Error('No metadata found - database may be empty');
                }
            } catch (error) {
                console.error('âŒ Firebase Connection Error:', error);
                isConnected = false;
                connectionStatus.innerHTML = `<span style="color: #dc2626;">âŒ Demo Mode</span>`;

                // Fallback to mock data
                showError(`Database connection failed: ${error.message}. Using demo data.`);
            }
        }

        function updateDatabaseStats(stats) {
            const apiInfo = document.querySelector('.api-info');
            apiInfo.innerHTML = `
                <strong>ğŸ”¥ LIVE DATABASE:</strong> Connected to Firebase ESCO Database |
                <strong>Occupations:</strong> ${stats.totalOccupations?.toLocaleString() || 'N/A'} |
                <strong>Skills:</strong> ${stats.totalSkills?.toLocaleString() || 'N/A'} |
                <strong>Relations:</strong> ${stats.totalRelations?.toLocaleString() || 'N/A'} |
                <strong>Last Import:</strong> ${stats.lastImport?.toDate?.()?.toLocaleDateString() || 'N/A'}
            `;
        }

        // Event Listeners
        searchBtn.addEventListener('click', performSearch);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') performSearch();
        });

        // Auto-search Î¼Îµ debounce
        let searchTimeout;
        searchInput.addEventListener('input', () => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                if (searchInput.value.trim().length > 2) {
                    performSearch();
                }
            }, 500);
        });

        async function performSearch() {
            const searchQuery = searchInput.value.trim();
            if (!searchQuery) return;

            const language = languageFilter.value;
            const searchLimit = parseInt(limitFilter.value);
            const type = typeFilter.value;

            showLoading();

            try {
                const startTime = Date.now();

                let results = [];
                let totalFound = 0;

                if (isConnected) {
                    // Real Firebase search
                    console.log('ğŸ” Firebase ESCO Search:', searchQuery, language, type, searchLimit);

                    if (type === 'occupation' || type === 'all') {
                        const occupationResults = await searchOccupations(searchQuery, searchLimit);
                        results = results.concat(occupationResults.map(doc => ({
                            ...doc.data(),
                            id: doc.id,
                            _type: 'Occupation'
                        })));
                    }

                    if (type === 'skill' || type === 'all') {
                        const skillResults = await searchSkills(searchQuery, Math.floor(searchLimit / 2));
                        results = results.concat(skillResults.map(doc => ({
                            ...doc.data(),
                            id: doc.id,
                            _type: 'Skill'
                        })));
                    }

                    totalFound = results.length;
                } else {
                    // Fallback to mock data
                    const mockData = generateMockESCOData(searchQuery, language, type, searchLimit);
                    results = mockData.results;
                    totalFound = mockData.total;
                }

                const responseTime = Date.now() - startTime;

                console.log('âœ… Search Results:', results);

                currentSearchData = {
                    results,
                    total: totalFound,
                    responseTime,
                    language,
                    query: searchQuery,
                    isLive: isConnected
                };

                displayResults(currentSearchData, responseTime);

            } catch (error) {
                console.error('âŒ Search Error:', error);
                showError(error.message);
            }
        }

        async function searchOccupations(searchQuery, searchLimit) {
            const searchTerms = searchQuery.toLowerCase().split(' ').filter(term => term.length > 2);

            if (searchTerms.length === 0) return [];

            // Search by searchTerms array-contains
            const q = query(
                collection(db, 'occupations'),
                where('searchTerms', 'array-contains', searchTerms[0]),
                // REMOVED orderBy for debugging
                limit(searchLimit)
            );

            const querySnapshot = await getDocs(q);
            return querySnapshot.docs;
        }

        async function searchSkills(searchQuery, searchLimit) {
            const searchTerms = searchQuery.toLowerCase().split(' ').filter(term => term.length > 2);

            if (searchTerms.length === 0) return [];

            // Search by searchTerms array-contains
            const q = query(
                collection(db, 'skills'),
                where('searchTerms', 'array-contains', searchTerms[0]),
                orderBy('occupationsCount', 'desc'),
                limit(searchLimit)
            );

            const querySnapshot = await getDocs(q);
            return querySnapshot.docs;
        }

        function generateMockESCOData(query, language, type, limit) {
            // Mock occupations database
            const mockOccupations = [
                {
                    uri: 'http://data.europa.eu/esco/occupation/c40b53eb-7e99-4768-b0a1-71fef2b97a42',
                    preferredLabel: language === 'el' ? 'Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÏ„Î®Ï‚ Î›Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÎ¿Ï' : 'Software Developer',
                    alternativeLabel: language === 'el' ? ['Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÏ„Î®Ï‚', 'Developer', 'ÎšÏ‰Î´Î¹ÎºÎ¿Ï€Î¿Î¹ÏŒÏ‚'] : ['Programmer', 'Coder', 'Software Engineer'],
                    description: language === 'el' ?
                        'Î‘Î½Î±Ï€Ï„ÏÏƒÏƒÎµÎ¹, ÏƒÏ…Î½Ï„Î·ÏÎµÎ¯ ÎºÎ±Î¹ Ï„ÎµÎºÎ¼Î·ÏÎ¹ÏÎ½ÎµÎ¹ Î»Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÏŒ Î³Î¹Î± Î´Î¹Î¬Ï†Î¿ÏÎµÏ‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚. Î£Ï…Î½ÎµÏÎ³Î¬Î¶ÎµÏ„Î±Î¹ Î¼Îµ Î¿Î¼Î¬Î´ÎµÏ‚ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·Ï‚ Î³Î¹Î± Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î±Ï„Î¹ÎºÏÎ½ Î»ÏÏƒÎµÏ‰Î½.' :
                        'Develops, maintains, and documents software for various applications. Collaborates with development teams to create effective solutions.',
                    iscoGroup: '2512',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'JavaScript' : 'JavaScript' },
                        { preferredLabel: language === 'el' ? 'Python' : 'Python' },
                        { preferredLabel: language === 'el' ? 'Î’Î¬ÏƒÎµÎ¹Ï‚ Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½' : 'Database Management' },
                        { preferredLabel: language === 'el' ? 'Git' : 'Git Version Control' },
                        { preferredLabel: language === 'el' ? 'Î‘Î»Î³ÏŒÏÎ¹Î¸Î¼Î¿Î¹' : 'Algorithms' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/c8a43bd8-4ab7-4f30-a1e3-6e5c2aff7a23',
                    preferredLabel: language === 'el' ? 'Î“Î¹Î±Ï„ÏÏŒÏ‚ Î Î±Î¸Î¿Î»ÏŒÎ³Î¿Ï‚' : 'Internal Medicine Physician',
                    alternativeLabel: language === 'el' ? ['Î Î±Î¸Î¿Î»ÏŒÎ³Î¿Ï‚', 'Î™Î±Ï„ÏÏŒÏ‚'] : ['Doctor', 'Physician'],
                    description: language === 'el' ?
                        'Î”Î¹Î±Î³Î¹Î³Î½ÏÏƒÎºÎµÎ¹ ÎºÎ±Î¹ Î¸ÎµÏÎ±Ï€ÎµÏÎµÎ¹ Î±ÏƒÎ¸Î­Î½ÎµÎ¹ÎµÏ‚ Ï„Î¿Ï… ÎµÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ¿Ï Î¹Î±Ï„ÏÎ¹ÎºÎ¿Ï ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚ ÎµÎ½Î·Î»Î¯ÎºÏ‰Î½.' :
                        'Diagnoses and treats diseases of the internal medical system of adults.',
                    iscoGroup: '2211',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'Î”Î¹Î¬Î³Î½Ï‰ÏƒÎ·' : 'Medical Diagnosis' },
                        { preferredLabel: language === 'el' ? 'Î¦Î±ÏÎ¼Î±ÎºÎ¿Î»Î¿Î³Î¯Î±' : 'Pharmacology' },
                        { preferredLabel: language === 'el' ? 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼Îµ Î‘ÏƒÎ¸ÎµÎ½ÎµÎ¯Ï‚' : 'Patient Communication' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/d1f23e45-8b67-4f30-b1e3-7e6c3aff8b34',
                    preferredLabel: language === 'el' ? 'Î”Î¹ÎºÎ·Î³ÏŒÏÎ¿Ï‚' : 'Lawyer',
                    alternativeLabel: language === 'el' ? ['ÎÎ¿Î¼Î¹ÎºÏŒÏ‚', 'Î£Ï…Î½Î®Î³Î¿ÏÎ¿Ï‚'] : ['Attorney', 'Legal Counsel'],
                    description: language === 'el' ?
                        'Î Î±ÏÎ­Ï‡ÎµÎ¹ Î½Î¿Î¼Î¹ÎºÎ­Ï‚ ÏƒÏ…Î¼Î²Î¿Ï…Î»Î­Ï‚ ÎºÎ±Î¹ ÎµÎºÏ€ÏÎ¿ÏƒÏ‰Ï€ÎµÎ¯ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ ÏƒÎµ Î´Î¹ÎºÎ±ÏƒÏ„Î¹ÎºÎ­Ï‚ Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯ÎµÏ‚.' :
                        'Provides legal advice and represents clients in legal proceedings.',
                    iscoGroup: '2611',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'ÎÎ¿Î¼Î¹ÎºÎ® Î‘Î½Î¬Î»Ï…ÏƒÎ·' : 'Legal Analysis' },
                        { preferredLabel: language === 'el' ? 'Î£Ï…Î½Î®Î³Î¿ÏÎ¿Ï‚' : 'Advocacy' },
                        { preferredLabel: language === 'el' ? 'Î£ÏÎ½Ï„Î±Î¾Î· Î•Î³Î³ÏÎ¬Ï†Ï‰Î½' : 'Document Drafting' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/e2f34f56-9c78-4f41-c2f4-8f7d4bgg9c45',
                    preferredLabel: language === 'el' ? 'ÎœÎ·Ï‡Î±Î½Î¹ÎºÏŒÏ‚ Î›Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÎ¿Ï' : 'Software Engineer',
                    alternativeLabel: language === 'el' ? ['Software Engineer', 'ÎœÎ·Ï‡Î±Î½Î¹ÎºÏŒÏ‚'] : ['Systems Engineer', 'Technical Lead'],
                    description: language === 'el' ?
                        'Î£Ï‡ÎµÎ´Î¹Î¬Î¶ÎµÎ¹ ÎºÎ±Î¹ Î±Î½Î±Ï€Ï„ÏÏƒÏƒÎµÎ¹ Ï€Î¿Î»ÏÏ€Î»Î¿ÎºÎ± ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î± Î»Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÎ¿Ï Î¼Îµ Î­Î¼Ï†Î±ÏƒÎ· ÏƒÏ„Î·Î½ Î±ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ® ÎºÎ±Î¹ Ï„Î·Î½ Î±Ï€ÏŒÎ´Î¿ÏƒÎ·.' :
                        'Designs and develops complex software systems with emphasis on architecture and performance.',
                    iscoGroup: '2512',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'Î‘ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ® Î›Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÎ¿Ï' : 'Software Architecture' },
                        { preferredLabel: language === 'el' ? 'Î£Ï‡ÎµÎ´Î¹Î±ÏƒÏ„Î¹ÎºÎ¬ Î ÏÏŒÏ„Ï…Ï€Î±' : 'Design Patterns' },
                        { preferredLabel: language === 'el' ? 'Î•Ï€Î¯Î´Î¿ÏƒÎ· Î£Ï…ÏƒÏ„Î·Î¼Î¬Ï„Ï‰Î½' : 'System Performance' },
                        { preferredLabel: language === 'el' ? 'DevOps' : 'DevOps' },
                        { preferredLabel: language === 'el' ? 'ÎœÎ¹ÎºÏÎ¿ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î±' : 'Microservices' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/f3g45h67-0d89-4g52-d3g5-9h8e5dii0d56',
                    preferredLabel: language === 'el' ? 'Î•ÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î¹ÎºÏŒÏ‚ Î ÏÏ‰Ï„Î¿Î²Î¬Î¸Î¼Î¹Î±Ï‚ Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ·Ï‚' : 'Primary School Teacher',
                    alternativeLabel: language === 'el' ? ['Î”Î¬ÏƒÎºÎ±Î»Î¿Ï‚', 'Î Î±Î¹Î´Î±Î³Ï‰Î³ÏŒÏ‚'] : ['Elementary Teacher', 'Primary Educator'],
                    description: language === 'el' ?
                        'Î”Î¹Î´Î¬ÏƒÎºÎµÎ¹ Î¼Î±Î¸Î·Ï„Î­Ï‚ Ï€ÏÏ‰Ï„Î¿Î²Î¬Î¸Î¼Î¹Î±Ï‚ ÎµÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ·Ï‚ ÏƒÎµ ÏŒÎ»Î± Ï„Î± Î²Î±ÏƒÎ¹ÎºÎ¬ Î¼Î±Î¸Î®Î¼Î±Ï„Î± ÎºÎ±Î¹ Î±Î½Î±Ï€Ï„ÏÏƒÏƒÎµÎ¹ Ï„Î¹Ï‚ ÎºÎ¿Î¹Î½Ï‰Î½Î¹ÎºÎ­Ï‚ Ï„Î¿Ï…Ï‚ Î´ÎµÎ¾Î¹ÏŒÏ„Î·Ï„ÎµÏ‚.' :
                        'Teaches primary school students in all basic subjects and develops their social skills.',
                    iscoGroup: '2341',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'Î Î±Î¹Î´Î±Î³Ï‰Î³Î¹ÎºÎ®' : 'Pedagogy' },
                        { preferredLabel: language === 'el' ? 'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î¤Î¬Î¾Î·Ï‚' : 'Classroom Management' },
                        { preferredLabel: language === 'el' ? 'Î‘Î¾Î¹Î¿Î»ÏŒÎ³Î·ÏƒÎ· ÎœÎ±Î¸Î·Ï„ÏÎ½' : 'Student Assessment' },
                        { preferredLabel: language === 'el' ? 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼Îµ Î“Î¿Î½ÎµÎ¯Ï‚' : 'Parent Communication' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/g4h56i78-1e90-5h63-e4h6-0i9f6ejj1e67',
                    preferredLabel: language === 'el' ? 'Î£ÎµÏ† ÎšÎ¿Ï…Î¶Î¯Î½Î±Ï‚' : 'Chef',
                    alternativeLabel: language === 'el' ? ['Î‘ÏÏ‡Î¹Î¼Î¬Î³ÎµÎ¹ÏÎ±Ï‚', 'ÎšÎ¿Ï…Î¶Î¹Î½Î¹Î­ÏÎ·Ï‚'] : ['Head Chef', 'Cook'],
                    description: language === 'el' ?
                        'Î ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î¬Î¶ÎµÎ¹ ÎºÎ±Î¹ Î¼Î±Î³ÎµÎ¹ÏÎµÏÎµÎ¹ Ï†Î±Î³Î·Ï„Î¬ ÏƒÎµ ÎµÏƒÏ„Î¹Î±Ï„ÏŒÏÎ¹Î±, Î¾ÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î± ÎºÎ±Î¹ Î¬Î»Î»Î¿Ï…Ï‚ Ï‡ÏÏÎ¿Ï…Ï‚ ÎµÏƒÏ„Î¯Î±ÏƒÎ·Ï‚. Î•Ï€Î¹Î²Î»Î­Ï€ÎµÎ¹ Ï„Î·Î½ ÎºÎ¿Ï…Î¶Î¯Î½Î± ÎºÎ±Î¹ Ï„Î¿ Ï€ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏŒ.' :
                        'Prepares and cooks food in restaurants, hotels and other catering establishments. Supervises kitchen and staff.',
                    iscoGroup: '5120',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'ÎœÎ±Î³ÎµÎ¹ÏÎ¹ÎºÎ®' : 'Culinary Skills' },
                        { preferredLabel: language === 'el' ? 'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎšÎ¿Ï…Î¶Î¯Î½Î±Ï‚' : 'Kitchen Management' },
                        { preferredLabel: language === 'el' ? 'Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¹ÎºÏŒÏ„Î·Ï„Î±' : 'Creativity' },
                        { preferredLabel: language === 'el' ? 'Î¥Î³Î¹ÎµÎ¹Î½Î® Î¤ÏÎ¿Ï†Î¯Î¼Ï‰Î½' : 'Food Safety' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/h5i67j89-2f01-6i74-f5i7-1j0g7fkk2f78',
                    preferredLabel: language === 'el' ? 'Î›Î¿Î³Î¹ÏƒÏ„Î®Ï‚' : 'Accountant',
                    alternativeLabel: language === 'el' ? ['ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¿Î»ÏŒÎ³Î¿Ï‚', 'Î§ÏÎ·Î¼Î±Ï„Î¿Î¿Î¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏŒÏ‚'] : ['Financial Analyst', 'Bookkeeper'],
                    description: language === 'el' ?
                        'Î¤Î·ÏÎµÎ¯ Î»Î¿Î³Î¹ÏƒÏ„Î¹ÎºÎ¬ Î²Î¹Î²Î»Î¯Î±, Ï€ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î¬Î¶ÎµÎ¹ Î¿Î¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ ÎºÎ±Î¹ Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Î¿Î¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ ÏƒÏ…Î¼Î²Î¿Ï…Î»Î­Ï‚ ÏƒÎµ ÎµÏ€Î¹Ï‡ÎµÎ¹ÏÎ®ÏƒÎµÎ¹Ï‚.' :
                        'Maintains accounting records, prepares financial statements and provides financial advice to businesses.',
                    iscoGroup: '2411',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'Î›Î¿Î³Î¹ÏƒÏ„Î¹ÎºÎ®' : 'Accounting' },
                        { preferredLabel: language === 'el' ? 'Î¦Î¿ÏÎ¿Î»Î¿Î³Î¯Î±' : 'Taxation' },
                        { preferredLabel: language === 'el' ? 'ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ® Î‘Î½Î¬Î»Ï…ÏƒÎ·' : 'Financial Analysis' },
                        { preferredLabel: language === 'el' ? 'Excel' : 'Excel' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/i6j78k90-3g12-7j85-g6j8-2k1h8gll3g89',
                    preferredLabel: language === 'el' ? 'ÎœÎ¬ÏÎºÎµÏ„Î¹Î½Î³Îº ÎœÎ¬Î½Î±Ï„Î¶ÎµÏ' : 'Marketing Manager',
                    alternativeLabel: language === 'el' ? ['Î”Î¹ÎµÏ…Î¸Ï…Î½Ï„Î®Ï‚ ÎœÎ¬ÏÎºÎµÏ„Î¹Î½Î³Îº', 'Marketing Specialist'] : ['Marketing Director', 'Brand Manager'],
                    description: language === 'el' ?
                        'Î£Ï‡ÎµÎ´Î¹Î¬Î¶ÎµÎ¹ ÎºÎ±Î¹ Ï…Î»Î¿Ï€Î¿Î¹ÎµÎ¯ ÏƒÏ„ÏÎ±Ï„Î·Î³Î¹ÎºÎ­Ï‚ Î¼Î¬ÏÎºÎµÏ„Î¹Î½Î³Îº Î³Î¹Î± Ï„Î·Î½ Ï€ÏÎ¿ÏÎ¸Î·ÏƒÎ· Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Ï‰Î½ ÎºÎ±Î¹ Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½. Î‘Î½Î±Î»ÏÎµÎ¹ Ï„Î·Î½ Î±Î³Î¿ÏÎ¬ ÎºÎ±Î¹ Ï„Î¿Î½ Î±Î½Ï„Î±Î³Ï‰Î½Î¹ÏƒÎ¼ÏŒ.' :
                        'Designs and implements marketing strategies to promote products and services. Analyzes market and competition.',
                    iscoGroup: '1221',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'Digital Marketing' : 'Digital Marketing' },
                        { preferredLabel: language === 'el' ? 'Î‘Î½Î¬Î»Ï…ÏƒÎ· Î‘Î³Î¿ÏÎ¬Ï‚' : 'Market Analysis' },
                        { preferredLabel: language === 'el' ? 'Social Media' : 'Social Media' },
                        { preferredLabel: language === 'el' ? 'Branding' : 'Branding' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/j7k89l01-4h23-8k96-h7k9-3l2i9hmm4h90',
                    preferredLabel: language === 'el' ? 'Î“ÏÎ±Ï†Î¯ÏƒÏ„Î±Ï‚' : 'Graphic Designer',
                    alternativeLabel: language === 'el' ? ['Î£Ï‡ÎµÎ´Î¹Î±ÏƒÏ„Î®Ï‚ Î“ÏÎ±Ï†Î¹ÎºÏÎ½', 'Visual Designer'] : ['Art Director', 'Creative Designer'],
                    description: language === 'el' ?
                        'Î”Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Î¿Ï€Ï„Î¹ÎºÎ¬ ÏƒÏ‡Î­Î´Î¹Î± Î³Î¹Î± Î­Î½Ï„Ï…Ï€Î±, ÏˆÎ·Ï†Î¹Î±ÎºÎ¬ Î¼Î­ÏƒÎ± ÎºÎ±Î¹ Î´Î¹Î±Ï†Î®Î¼Î¹ÏƒÎ·. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Î»Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÏŒ ÏƒÏ‡ÎµÎ´Î¯Î±ÏƒÎ·Ï‚ ÎºÎ±Î¹ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¹ÎºÎ­Ï‚ Ï„ÎµÏ‡Î½Î¹ÎºÎ­Ï‚.' :
                        'Creates visual designs for print, digital media and advertising. Uses design software and creative techniques.',
                    iscoGroup: '2166',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'Adobe Photoshop' : 'Adobe Photoshop' },
                        { preferredLabel: language === 'el' ? 'Illustrator' : 'Adobe Illustrator' },
                        { preferredLabel: language === 'el' ? 'Typography' : 'Typography' },
                        { preferredLabel: language === 'el' ? 'Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¹ÎºÏŒÏ„Î·Ï„Î±' : 'Creativity' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/k8l90m12-5i34-9l07-i8l0-4m3j0inn5i01',
                    preferredLabel: language === 'el' ? 'Î¨Ï…Ï‡Î¿Î»ÏŒÎ³Î¿Ï‚' : 'Psychologist',
                    alternativeLabel: language === 'el' ? ['ÎšÎ»Î¹Î½Î¹ÎºÏŒÏ‚ Î¨Ï…Ï‡Î¿Î»ÏŒÎ³Î¿Ï‚', 'Î¨Ï…Ï‡Î¿Î¸ÎµÏÎ±Ï€ÎµÏ…Ï„Î®Ï‚'] : ['Clinical Psychologist', 'Therapist'],
                    description: language === 'el' ?
                        'ÎœÎµÎ»ÎµÏ„Î¬ Ï„Î·Î½ Î±Î½Î¸ÏÏÏ€Î¹Î½Î· ÏƒÏ…Î¼Ï€ÎµÏÎ¹Ï†Î¿ÏÎ¬ ÎºÎ±Î¹ Ï€Î±ÏÎ­Ï‡ÎµÎ¹ ÏˆÏ…Ï‡Î¿Î»Î¿Î³Î¹ÎºÎ® Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·. Î”Î¹Î±Î³Î¹Î³Î½ÏÏƒÎºÎµÎ¹ ÎºÎ±Î¹ Î¸ÎµÏÎ±Ï€ÎµÏÎµÎ¹ ÏˆÏ…Ï‡Î¿Î»Î¿Î³Î¹ÎºÎ¬ Ï€ÏÎ¿Î²Î»Î®Î¼Î±Ï„Î±.' :
                        'Studies human behavior and provides psychological support. Diagnoses and treats psychological problems.',
                    iscoGroup: '2634',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'Î¨Ï…Ï‡Î¿Î»Î¿Î³Î¹ÎºÎ® Î‘Î¾Î¹Î¿Î»ÏŒÎ³Î·ÏƒÎ·' : 'Psychological Assessment' },
                        { preferredLabel: language === 'el' ? 'Î¨Ï…Ï‡Î¿Î¸ÎµÏÎ±Ï€ÎµÎ¯Î±' : 'Psychotherapy' },
                        { preferredLabel: language === 'el' ? 'Î£Ï…Î¼Î²Î¿Ï…Î»ÎµÏ…Ï„Î¹ÎºÎ®' : 'Counseling' },
                        { preferredLabel: language === 'el' ? 'Î•Î½ÏƒÏ…Î½Î±Î¯ÏƒÎ¸Î·ÏƒÎ·' : 'Empathy' }
                    ]
                },
                {
                    uri: 'http://data.europa.eu/esco/occupation/l9m01n23-6j45-0m18-j9m1-5n4k1joo6j12',
                    preferredLabel: language === 'el' ? 'ÎœÎ·Ï‡Î±Î½Î¹ÎºÏŒÏ‚ Î Î¿Î»Î¹Ï„Î¹ÎºÏŒÏ‚' : 'Civil Engineer',
                    alternativeLabel: language === 'el' ? ['Î Î¿Î»Î¹Ï„Î¹ÎºÏŒÏ‚ ÎœÎ·Ï‡Î±Î½Î¹ÎºÏŒÏ‚', 'ÎšÎ±Ï„Î±ÏƒÎºÎµÏ…Î±ÏƒÏ„Î¹ÎºÏŒÏ‚ ÎœÎ·Ï‡Î±Î½Î¹ÎºÏŒÏ‚'] : ['Structural Engineer', 'Construction Engineer'],
                    description: language === 'el' ?
                        'Î£Ï‡ÎµÎ´Î¹Î¬Î¶ÎµÎ¹ ÎºÎ±Î¹ ÎµÏ€Î¹Î²Î»Î­Ï€ÎµÎ¹ Ï„Î·Î½ ÎºÎ±Ï„Î±ÏƒÎºÎµÏ…Î® ÎºÏ„Î¹ÏÎ¯Ï‰Î½, Î³ÎµÏ†Ï…ÏÏÎ½, Î´ÏÏŒÎ¼Ï‰Î½ ÎºÎ±Î¹ Î¬Î»Î»Ï‰Î½ Ï…Ï€Î¿Î´Î¿Î¼ÏÎ½. Î•Î¾Î±ÏƒÏ†Î±Î»Î¯Î¶ÎµÎ¹ Ï„Î·Î½ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î± ÎºÎ±Î¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÏŒÏ„Î·Ï„Î±.' :
                        'Designs and supervises construction of buildings, bridges, roads and other infrastructure. Ensures safety and functionality.',
                    iscoGroup: '2142',
                    _type: 'Occupation',
                    hasSkill: [
                        { preferredLabel: language === 'el' ? 'AutoCAD' : 'AutoCAD' },
                        { preferredLabel: language === 'el' ? 'Î£Ï„Î±Ï„Î¹ÎºÎ® Î‘Î½Î¬Î»Ï…ÏƒÎ·' : 'Structural Analysis' },
                        { preferredLabel: language === 'el' ? 'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎˆÏÎ³Ï‰Î½' : 'Project Management' },
                        { preferredLabel: language === 'el' ? 'ÎŸÎ¹ÎºÎ¿Î´Î¿Î¼Î¹ÎºÎ®' : 'Construction' }
                    ]
                }
            ];

            // Filter based on search query - Î Î¹Î¿ ÎµÏ…Î­Î»Î¹ÎºÏ„Î¿ matching
            const searchTerm = query.toLowerCase();
            const searchWords = searchTerm.split(' ').filter(word => word.length > 1);

            const filteredOccupations = mockOccupations.filter(occ => {
                const allText = [
                    occ.preferredLabel,
                    ...occ.alternativeLabel,
                    occ.description
                ].join(' ').toLowerCase();

                // Î‘Î½ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ search term, Î´ÎµÎ¯Î¾Îµ ÏŒÎ»Î±
                if (!searchTerm || searchTerm.length < 2) return true;

                // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ ÎºÎ¬Ï€Î¿Î¹Î± Î±Ï€ÏŒ Ï„Î¹Ï‚ Î»Î­Î¾ÎµÎ¹Ï‚ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ Ï„Î±Î¹ÏÎ¹Î¬Î¶ÎµÎ¹
                return searchWords.some(word => allText.includes(word)) ||
                       allText.includes(searchTerm);
            });

            // Apply limit - Î‘Î½ Î´ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±, Î´ÎµÎ¯Î¾Îµ Ï„Î± Ï€ÏÏÏ„Î±
            let results = filteredOccupations.slice(0, limit);
            if (results.length === 0 && searchTerm) {
                // Fallback: Î´ÎµÎ¯Î¾Îµ Ï„Î± Ï€ÏÏÏ„Î± 3 ÎµÏ€Î±Î³Î³Î­Î»Î¼Î±Ï„Î± Ï‰Ï‚ "ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬"
                results = mockOccupations.slice(0, Math.min(3, limit));
            }

            return {
                total: filteredOccupations.length,
                results: results,
                _embedded: { results: results },
                meta: {
                    language: language,
                    type: type,
                    limit: limit
                }
            };
        }

        function showLoading() {
            loadingSection.style.display = 'block';
            errorSection.style.display = 'none';
            resultsSection.innerHTML = '';
            statsSection.style.display = 'none';
            searchBtn.disabled = true;
        }

        function showError(message) {
            loadingSection.style.display = 'none';
            errorSection.style.display = 'block';
            errorSection.innerHTML = `
                <div class="error">
                    <strong>Î£Ï†Î¬Î»Î¼Î± ESCO API:</strong> ${message}
                    <br><br>
                    <small>Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î· ÏƒÏÎ½Î´ÎµÏƒÎ· Î´Î¹Î±Î´Î¹ÎºÏ„ÏÎ¿Ï… ÎºÎ±Î¹ Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Î¾Î±Î½Î¬.</small>
                </div>
            `;
            searchBtn.disabled = false;
        }

        function displayResults(data, responseTime) {
            loadingSection.style.display = 'none';
            errorSection.style.display = 'none';
            searchBtn.disabled = false;

            // Update stats
            updateStats(data, responseTime);

            // Get results Î±Ï€ÏŒ ESCO response
            const results = data._embedded?.results || data.results || [];

            if (results.length === 0) {
                resultsSection.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #64748b;">
                        <h3>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±</h3>
                        <p>Î”Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¿ÏÏ‚ ÏŒÏÎ¿Ï…Ï‚ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ Î® Î±Î»Î»Î¬Î¾Ï„Îµ Ï„Î· Î³Î»ÏÏƒÏƒÎ±.</p>
                    </div>
                `;
                return;
            }

            // Display results
            resultsSection.innerHTML = results.map(result => renderResult(result)).join('');
        }

        function updateStats(data, responseTime) {
            document.getElementById('totalResults').textContent = data.total || data._embedded?.results?.length || 0;
            document.getElementById('responseTime').textContent = `${responseTime}ms`;
            document.getElementById('currentPage').textContent = '1';
            document.getElementById('apiVersion').textContent = 'v1.2';
            statsSection.style.display = 'block';
        }

        function renderResult(result) {
            const isOccupation = result._type === 'Occupation';
            const isSkill = result._type === 'Skill';

            // Handle both Firebase data structure and mock data
            const title = result.preferredLabel || result.title || 'Unknown';
            const description = result.description || 'Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î®';
            const alternativeLabels = result.alternativeLabels || result.alternativeLabel || [];

            // Occupation-specific fields
            const iscoCode = result.iscoGroupCode || result.iscoGroup || result.code || '';
            const skills = result.essentialSkills || result.hasSkill || result.skills || [];

            // Skill-specific fields
            const skillType = result.skillType || '';
            const reuseLevel = result.reuseLevel || '';
            const relatedOccupations = result.relatedOccupations || [];

            return `
                <div class="occupation-card" onclick="showDetails('${result.originalUri || result.uri || result.id}')">
                    <div class="occupation-title">
                        ${isOccupation ? 'ğŸ‘”' : 'ğŸ”§'} ${title}
                    </div>

                    <div class="occupation-meta">
                        ${isOccupation ? `<span class="meta-tag">ğŸ’¼ Î•Ï€Î¬Î³Î³ÎµÎ»Î¼Î±</span>` : `<span class="meta-tag">âš¡ Î”ÎµÎ¾Î¹ÏŒÏ„Î·Ï„Î±</span>`}
                        ${iscoCode ? `<span class="meta-tag">ğŸ“Š ISCO: ${iscoCode}</span>` : ''}
                        ${skillType ? `<span class="meta-tag">ğŸ¯ ${skillType}</span>` : ''}
                        ${reuseLevel ? `<span class="meta-tag">ğŸ”„ ${reuseLevel}</span>` : ''}
                        <span class="meta-tag">ğŸŒ ${currentSearchData?.language?.toUpperCase() || 'EL'}</span>
                        ${currentSearchData?.isLive ? `<span class="meta-tag" style="background: #dcfce7; color: #16a34a;">ğŸ”¥ LIVE</span>` : `<span class="meta-tag" style="background: #fef3c7; color: #d97706;">ğŸ“‹ DEMO</span>`}
                    </div>

                    ${alternativeLabels.length > 0 ? `
                        <div style="margin-bottom: 8px;">
                            <small style="color: #64748b;">Î•Ï€Î¯ÏƒÎ·Ï‚ Î³Î½Ï‰ÏƒÏ„ÏŒ Ï‰Ï‚: ${alternativeLabels.slice(0, 3).join(', ')}</small>
                        </div>
                    ` : ''}

                    <div class="occupation-description">
                        ${description.length > 200 ? description.substring(0, 200) + '...' : description}
                    </div>

                    ${skills.length > 0 ? `
                        <div class="skills-section">
                            <div style="font-weight: 600; margin-bottom: 8px; font-size: 0.875rem;">Î£Ï‡ÎµÏ„Î¹ÎºÎ­Ï‚ Î”ÎµÎ¾Î¹ÏŒÏ„Î·Ï„ÎµÏ‚:</div>
                            <div class="skills-grid">
                                ${skills.slice(0, 8).map(skill => `
                                    <span class="skill-tag">${skill.preferredLabel || skill.title || skill}</span>
                                `).join('')}
                                ${skills.length > 8 ? `<span class="skill-tag">+${skills.length - 8} Î±ÎºÏŒÎ¼Î±</span>` : ''}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function showDetails(uri) {
            if (!uri) return;

            console.log('ğŸ“‹ Selected ESCO Item:', uri);
            alert(`ESCO URI: ${uri}\n\nÎ‘Ï…Ï„ÏŒ Î¸Î± Î±Î½Î¿Î¯Î¾ÎµÎ¹ detailed view ÏƒÏ„Î·Î½ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® ÎµÏ†Î±ÏÎ¼Î¿Î³Î®.`);
        }

        // Initialize Firebase and Demo
        window.addEventListener('load', async () => {
            console.log('ğŸš€ Firebase ESCO Database Demo Loading...');

            // Initialize Firebase connection
            await initializeFirebase();

            // Auto-search Î³Î¹Î± demo - Î´ÎµÎ¯Ï‡Î½ÎµÎ¹ Î´Î¹Î¬Ï†Î¿ÏÎ± ÎµÏ€Î±Î³Î³Î­Î»Î¼Î±Ï„Î±
            setTimeout(() => {
                searchInput.value = 'Î¼Î·Ï‡Î±Î½Î¹ÎºÏŒÏ‚';
                performSearch();
            }, 1500);
        });

        // Global functions for HTML onclick handlers
        window.showDetails = function(uri) {
            if (!uri) return;

            console.log('ğŸ“‹ Selected ESCO Item:', uri);

            const message = isConnected
                ? `ğŸ”¥ LIVE DATABASE ITEM\n\nESCO URI: ${uri}\n\nÎ±Ï…Ï„ÏŒ Î¸Î± Î±Î½Î¿Î¯Î¾ÎµÎ¹ detailed view ÏƒÏ„Î·Î½ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Î¼Îµ Ï€Î»Î®ÏÎ· ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± Î±Ï€ÏŒ Ï„Î·Î½ Firebase ESCO database.`
                : `ğŸ“‹ DEMO ITEM\n\nESCO URI: ${uri}\n\nÎ‘Ï…Ï„ÏŒ Î¸Î± Î±Î½Î¿Î¯Î¾ÎµÎ¹ detailed view ÏƒÏ„Î·Î½ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® ÎµÏ†Î±ÏÎ¼Î¿Î³Î®.`;

            alert(message);
        };

    </script>
</body>
</html>