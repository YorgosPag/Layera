{"version":3,"sources":["../../geo-mapping/src/services/fallbackBoundaries.ts","../src/index.ts","../unified/UnifiedPipelineModal.tsx","../unified/hooks/useModalContainer.ts","../unified/hooks/useUnifiedPipeline.ts","../unified/hooks/useMediaQuery.ts","../unified/utils/stepperConfig.ts","../unified/steps/CategoryStep.tsx","../unified/steps/IntentStep.tsx","../unified/steps/TransactionTypeStep.tsx","../unified/steps/EmploymentTypeStep.tsx","../unified/steps/AvailabilityStep.tsx","../unified/steps/AvailabilityDetailsStep.tsx","../unified/steps/LocationStep.tsx","../unified/steps/LayoutStep.tsx","../../geocoding/src/hooks/useGeocode.ts","../../geocoding/src/providers/nominatim.ts","../../address-breakdown/src/components/AddressBreakdownCard.tsx","../../geo-mapping/src/services/osmService.ts","../../address-breakdown/src/utils/addressParser.ts","../unified/steps/DetailsStep.tsx","../unified/steps/CompleteStep.tsx"],"sourcesContent":["/**\r\n * @layera/geo-mapping - Fallback Boundaries Configuration\r\n *\r\n * Type-safe configuration Œ≥ŒπŒ± fallback polygons œåœÑŒ±ŒΩ œÑŒø OSM API Œ±œÄŒøœÑœÖŒ≥œáŒ¨ŒΩŒµŒπ.\r\n * ŒöŒëŒúŒôŒë œáœÅŒÆœÉŒ∑ any - TypeScript strict mode.\r\n */\r\n\r\nimport type { GeoJSONFeatureCollection } from '@layera/geo-core';\r\n\r\n/**\r\n * Fallback boundary configuration\r\n */\r\ninterface FallbackBoundary {\r\n  /** Unique keys Œ≥ŒπŒ± matching (ŒºœÄŒøœÅŒµŒØ ŒΩŒ± œÄŒµœÅŒπŒ≠œáŒµŒπ variations) */\r\n  keys: string[];\r\n  /** Display name Œ≥ŒπŒ± œÑŒø boundary */\r\n  name: string;\r\n  /** Admin level Œ±œÄœå OSM */\r\n  adminLevel: string;\r\n  /** Polygon coordinates [lng, lat][] */\r\n  coordinates: number[][];\r\n}\r\n\r\n/**\r\n * Type-safe fallback boundaries registry\r\n *\r\n * Œ£ŒóŒúŒïŒôŒ©Œ£Œó: ŒëœÖœÑœå ŒµŒØŒΩŒ±Œπ œÄœÅŒøœÉœâœÅŒπŒΩŒÆ ŒªœçœÉŒ∑. Œ§Œø œÉœâœÉœÑœå ŒµŒØŒΩŒ±Œπ ŒΩŒ± Œ¥ŒπŒøœÅŒ∏œâŒ∏ŒµŒØ\r\n * œÑŒø OSM API integration Œ≥ŒπŒ± Œ∫Œ±Œ∏ŒøŒªŒπŒ∫ŒÆ œÖœÄŒøœÉœÑŒÆœÅŒπŒæŒ∑ œÄŒµœÅŒπŒøœáœéŒΩ.\r\n *\r\n * ŒúŒ≠œáœÅŒπ œÑœåœÑŒµ, œÄœÅŒøœÉŒ∏Œ≠œÑŒøœÖŒºŒµ ŒºœåŒΩŒø critical œÄŒµœÅŒπŒøœáŒ≠œÇ ŒµŒ¥œé.\r\n */\r\nconst FALLBACK_BOUNDARIES: FallbackBoundary[] = [\r\n  // ŒòŒµœÉœÉŒ±ŒªŒøŒΩŒØŒ∫Œ∑ - ŒöŒ≠ŒΩœÑœÅŒø\r\n  {\r\n    keys: ['ŒòŒµœÉœÉŒ±ŒªŒøŒΩŒØŒ∫Œ∑œÇ', 'Thessaloniki', 'ŒòŒµœÉœÉŒ±ŒªŒøŒΩŒØŒ∫Œ∑'],\r\n    name: 'ŒîŒÆŒºŒøœÇ ŒòŒµœÉœÉŒ±ŒªŒøŒΩŒØŒ∫Œ∑œÇ',\r\n    adminLevel: '8',\r\n    coordinates: [\r\n      // Simplified boundary Œ≥ŒπŒ± demo - œÉœÑŒ∑ŒΩ œÄœÅŒ¨ŒæŒ∑ Œ∏Œ± œáœÅŒµŒπŒ¨Œ∂ŒµœÑŒ±Œπ œÄŒªŒÆœÅŒµœÇ polygon\r\n      [22.9352, 40.6401], [22.9600, 40.6401], [22.9600, 40.6250],\r\n      [22.9352, 40.6250], [22.9352, 40.6401]\r\n    ]\r\n  },\r\n\r\n  // ŒúŒ±Œ∫ŒµŒ¥ŒøŒΩŒØŒ± regions\r\n  {\r\n    keys: ['ŒöŒµŒΩœÑœÅŒπŒ∫ŒÆœÇ ŒúŒ±Œ∫ŒµŒ¥ŒøŒΩŒØŒ±œÇ', 'Central Macedonia', 'ŒöŒµŒΩœÑœÅŒπŒ∫ŒÆ ŒúŒ±Œ∫ŒµŒ¥ŒøŒΩŒØŒ±'],\r\n    name: 'Œ†ŒµœÅŒπœÜŒ≠œÅŒµŒπŒ± ŒöŒµŒΩœÑœÅŒπŒ∫ŒÆœÇ ŒúŒ±Œ∫ŒµŒ¥ŒøŒΩŒØŒ±œÇ',\r\n    adminLevel: '4',\r\n    coordinates: [\r\n      // Simplified boundary Œ≥ŒπŒ± demo\r\n      [22.0, 41.5], [24.5, 41.5], [24.5, 40.0],\r\n      [22.0, 40.0], [22.0, 41.5]\r\n    ]\r\n  },\r\n\r\n  // ŒëŒºœÄŒµŒªœåŒ∫Œ∑œÄŒøŒπ (existing)\r\n  {\r\n    keys: ['ŒëŒºœÄŒµŒªŒøŒ∫ŒÆœÄœâŒΩ', 'Ampelokipon', '–ê–º–ø–µ–ª–æ–∫–∏–ø–æ–Ω', 'ŒëŒºœÄŒµŒªœåŒ∫Œ∑œÄŒøŒπ'],\r\n    name: 'ŒîŒ∑ŒºŒøœÑŒπŒ∫ŒÆ ŒïŒΩœåœÑŒ∑œÑŒ± ŒëŒºœÄŒµŒªŒøŒ∫ŒÆœÄœâŒΩ',\r\n    adminLevel: '8',\r\n    coordinates: [\r\n      [22.9166013, 40.6545235], [22.916378, 40.6548432], [22.9161263, 40.654913],\r\n      [22.9159367, 40.6551479], [22.9157414, 40.6553883], [22.9155318, 40.655694],\r\n      [22.9155987, 40.6558613], [22.9154793, 40.6562918], [22.915702, 40.6565594],\r\n      [22.9150123, 40.6571562], [22.914356, 40.6575815], [22.9141897, 40.6577716],\r\n      [22.913965, 40.6580476], [22.9137682, 40.6584715], [22.9130735, 40.6595013],\r\n      [22.9146819, 40.6606645], [22.9195995, 40.6611276], [22.922064, 40.6603006],\r\n      [22.9243559, 40.6589395], [22.928998, 40.6570252], [22.9316767, 40.6565356],\r\n      [22.934234, 40.6567998], [22.9345673, 40.6568327], [22.9344419, 40.6563954],\r\n      [22.9345299, 40.6555972], [22.9346904, 40.654914], [22.9352047, 40.6527174],\r\n      [22.9342228, 40.6523744], [22.9341515, 40.651373], [22.9341167, 40.6510887],\r\n      [22.9340592, 40.6505896], [22.9339901, 40.6498829], [22.9340715, 40.6493217],\r\n      [22.9339464, 40.6484215], [22.9326998, 40.6484637], [22.931444, 40.6490899],\r\n      [22.9313272, 40.6491772], [22.9303401, 40.6495824], [22.929558, 40.6496515],\r\n      [22.9280302, 40.6497943], [22.9267611, 40.6494903], [22.9256199, 40.6492281],\r\n      [22.9243866, 40.6489393], [22.9239727, 40.6488403], [22.9195478, 40.6508989],\r\n      [22.919069, 40.6511528], [22.9186956, 40.651313], [22.9184825, 40.6514636],\r\n      [22.9183194, 40.6516322], [22.9181684, 40.6518332], [22.9180779, 40.6520084],\r\n      [22.9180263, 40.6522166], [22.9179568, 40.6523848], [22.9178432, 40.6525894],\r\n      [22.9171589, 40.6536558], [22.9166013, 40.6545235]\r\n    ]\r\n  }\r\n];\r\n\r\n/**\r\n * ŒíœÅŒØœÉŒ∫ŒµŒπ fallback boundary ŒºŒµ Œ≤Œ¨œÉŒ∑ search terms\r\n */\r\nexport const findFallbackBoundary = (\r\n  searchTerms: string[]\r\n): GeoJSONFeatureCollection | null => {\r\n  // Normalize search terms\r\n  const normalizedSearchTerms = searchTerms\r\n    .filter(term => term && typeof term === 'string')\r\n    .map(term => term.toLowerCase().trim());\r\n\r\n  // ŒëŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ Œ≥ŒπŒ± matching boundary\r\n  for (const boundary of FALLBACK_BOUNDARIES) {\r\n    const matches = boundary.keys.some(key => {\r\n      const normalizedKey = key.toLowerCase();\r\n      return normalizedSearchTerms.some(searchTerm =>\r\n        searchTerm.includes(normalizedKey) || normalizedKey.includes(searchTerm)\r\n      );\r\n    });\r\n\r\n    if (matches) {\r\n      console.log(`‚úÖ Fallback boundary found Œ≥ŒπŒ±: ${boundary.name}`);\r\n      return {\r\n        type: 'FeatureCollection',\r\n        features: [{\r\n          type: 'Feature',\r\n          properties: {\r\n            name: boundary.name,\r\n            admin_level: boundary.adminLevel,\r\n            boundary: 'administrative'\r\n          },\r\n          geometry: {\r\n            type: 'Polygon',\r\n            coordinates: [boundary.coordinates]\r\n          }\r\n        }]\r\n      };\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n/**\r\n * Œ†œÅŒøœÉŒ∏Œ≠œÑŒµŒπ ŒΩŒ≠Œø fallback boundary\r\n */\r\nexport const addFallbackBoundary = (boundary: FallbackBoundary): void => {\r\n  // ŒàŒªŒµŒ≥œáŒøœÇ Œ≥ŒπŒ± duplicates\r\n  const exists = FALLBACK_BOUNDARIES.some(b =>\r\n    b.keys.some(key => boundary.keys.includes(key))\r\n  );\r\n\r\n  if (!exists) {\r\n    FALLBACK_BOUNDARIES.push(boundary);\r\n    console.log(`üìç Added fallback boundary: ${boundary.name}`);\r\n  }\r\n};\r\n\r\n/**\r\n * ŒïœÄŒπœÉœÑœÅŒ≠œÜŒµŒπ œåŒªŒ± œÑŒ± Œ¥ŒπŒ±Œ∏Œ≠œÉŒπŒºŒ± fallback boundaries\r\n */\r\nexport const getAllFallbackBoundaries = (): readonly FallbackBoundary[] => {\r\n  return FALLBACK_BOUNDARIES;\r\n};\r\n\r\n/**\r\n * ŒöŒ±Œ∏Œ±œÅŒØŒ∂ŒµŒπ œåŒªŒ± œÑŒ± fallback boundaries (Œ≥ŒπŒ± testing)\r\n */\r\nexport const clearFallbackBoundaries = (): void => {\r\n  FALLBACK_BOUNDARIES.length = 0;\r\n};","/**\r\n * @layera/pipelines\r\n * Enterprise pipeline components and workflows for the Layera platform\r\n */\r\n\r\n// Unified Pipeline System\r\nexport * from '../unified/UnifiedPipelineModal';\r\nexport * from '../unified/hooks/useUnifiedPipeline';\r\nexport * from '../unified/hooks/useModalContainer';\r\nexport * from '../unified/hooks/useMediaQuery';\r\nexport * from '../unified/utils/stepperConfig';\r\n\r\n// Steps\r\nexport * from '../unified/steps/CategoryStep';\r\nexport * from '../unified/steps/DetailsStep';\r\nexport * from '../unified/steps/AvailabilityStep';\r\nexport * from '../unified/steps/AvailabilityDetailsStep';\r\nexport * from '../unified/steps/LocationStep';\r\nexport * from '../unified/steps/LayoutStep';\r\nexport * from '../unified/steps/CompleteStep';\r\nexport * from '../unified/steps/EmploymentTypeStep';\r\nexport * from '../unified/steps/IntentStep';\r\nexport * from '../unified/steps/TransactionTypeStep';\r\n\r\n// Version\r\nexport const LAYERA_PIPELINES_VERSION = '1.0.0';","/**\r\n * @layera/pipelines - Enterprise UnifiedPipelineModal (Clean Architecture)\r\n * Purpose: ŒõŒµœÄœÑœå shell œÄŒøœÖ œÉœÖŒΩŒ∏Œ≠œÑŒµŒπ Œ≤ŒÆŒºŒ±œÑŒ± - ŒöŒëŒúŒôŒë ŒµœÄŒπœáŒµŒπœÅŒ∑œÉŒπŒ±Œ∫ŒÆ ŒªŒøŒ≥ŒπŒ∫ŒÆ ŒµŒ¥œé\r\n * Architecture: Clean separation of concerns - ŒüŒßŒô inline CSS, ŒüŒßŒô state management\r\n */\r\n\r\nimport React, { useMemo } from 'react';\r\nimport { Modal } from '@layera/modals';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { Button } from '@layera/buttons';\r\nimport { FormActions } from '@layera/forms';\r\nimport { Heading } from '@layera/typography';\r\nimport { LayeraProgressStepper } from '@layera/progress-stepper';\r\nimport { useModalContainer } from './hooks/useModalContainer';\r\nimport { useUnifiedPipeline } from './hooks/useUnifiedPipeline';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\nimport { useMediaQuery } from './hooks/useMediaQuery';\r\nimport { createStepperConfig, getStepIndex, updateStepCompletion } from './utils/stepperConfig';\r\nimport {\r\n  CategoryStep, IntentStep, TransactionTypeStep, EmploymentTypeStep,\r\n  AvailabilityStep, AvailabilityDetailsStep, LocationStep, LayoutStep,\r\n  DetailsStep, CompleteStep\r\n} from './steps';\r\n// Import clean CSS - ŒüŒßŒô inline styles\r\nimport './styles/modal.css';\r\n\r\n/**\r\n * Enterprise Modal Props - Strict typing\r\n */\r\nexport interface UnifiedPipelineModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (data: any) => Promise<void>;\r\n  container?: Element | (() => Element) | null;\r\n}\r\n\r\n/**\r\n * Clean Enterprise Modal - Pure Composition\r\n * ŒúœåŒΩŒø wiring Œ∫Œ±Œπ rendering - ŒöŒëŒúŒôŒë ŒµœÄŒπœáŒµŒπœÅŒ∑œÉŒπŒ±Œ∫ŒÆ ŒªŒøŒ≥ŒπŒ∫ŒÆ\r\n */\r\nexport const UnifiedPipelineModal: React.FC<UnifiedPipelineModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  container\r\n}) => {\r\n  const { t } = useLayeraTranslation();\r\n\r\n  // SSR-safe container resolution\r\n  const containerFn = useModalContainer({\r\n    preferredId: 'layera-device-simulator-viewport',\r\n    fallbackId: 'root'\r\n  });\r\n\r\n  // Enterprise state management - clean separation\r\n  const { state, actions, can } = useUnifiedPipeline({ onSubmit, onClose });\r\n\r\n  // Mobile detection for responsive design\r\n  const isMobile = useMediaQuery('(max-width: 768px)');\r\n\r\n  // Stepper configuration based on current category\r\n  const stepperSteps = useMemo(() => {\r\n    const baseSteps = createStepperConfig(state.category, t);\r\n    const completedSteps: string[] = [];\r\n\r\n    // Determine completed steps based on current state\r\n    if (state.category) completedSteps.push('category');\r\n    if (state.intent) completedSteps.push('intent');\r\n    if (state.transactionType || state.employmentType) {\r\n      completedSteps.push(state.category === 'property' ? 'transactionType' : 'employmentType');\r\n    }\r\n    if (state.availability) completedSteps.push('availability');\r\n    if (state.availabilityDetails) completedSteps.push('availabilityDetails');\r\n\r\n    return updateStepCompletion(baseSteps, completedSteps as any);\r\n  }, [state.category, state.intent, state.transactionType, state.employmentType, state.availability, state.availabilityDetails, t]);\r\n\r\n  const currentStepIndex = getStepIndex(state.step, stepperSteps);\r\n\r\n  // Use provided container or SSR-safe resolver\r\n  const finalContainer = container !== undefined ? container : containerFn;\r\n\r\n  return (\r\n    <Modal\r\n      open={isOpen}\r\n      onClose={actions.reset}\r\n      size=\"xs\"\r\n      variant=\"centered\"\r\n      closeOnOverlayClick={true}\r\n      closeOnEscape={true}\r\n      showCloseButton={true}\r\n      overlayClassName=\"unified-pipeline-modal-overlay\"\r\n      className=\"unified-pipeline-modal\"\r\n      panelPadding=\"2px\"\r\n      overlayPadding=\"2px\"\r\n      container={finalContainer}\r\n    >\r\n      <Stack\r\n        spacing=\"sm\"\r\n        style={{\r\n          transform: 'scale(0.7)',\r\n          transformOrigin: 'center',\r\n        }}\r\n      >\r\n        <Flex justify=\"between\" align=\"center\">\r\n          <Heading as=\"h2\" size=\"xl\" color=\"primary\">\r\n            {t('pipeline.newEntry.title')}\r\n          </Heading>\r\n          <Flex gap=\"xs\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={actions.reset}\r\n            >\r\n              RESET\r\n            </Button>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={actions.reset}\r\n              style={{\r\n                minWidth: '32px',\r\n                height: '32px',\r\n                padding: '0',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n              }}\r\n            >\r\n              ‚úï\r\n            </Button>\r\n          </Flex>\r\n        </Flex>\r\n\r\n        {/* Enterprise Progress Stepper - Responsive & Compact with Horizontal Scroll */}\r\n        {stepperSteps.length > 2 && (\r\n          <div style={{\r\n            overflowX: 'auto',\r\n            overflowY: 'hidden',\r\n            width: '100%',\r\n            paddingBottom: '8px',\r\n            marginBottom: '8px'\r\n          }}>\r\n            <LayeraProgressStepper\r\n              steps={stepperSteps}\r\n              activeStep={currentStepIndex}\r\n              orientation=\"horizontal\"\r\n              alternativeLabel={false}\r\n              sx={{\r\n                minWidth: 'max-content',\r\n                width: 'max-content',\r\n                paddingX: '8px',\r\n                '& .MuiStepLabel-label': {\r\n                  fontSize: '0.75rem',\r\n                  fontWeight: '500',\r\n                  lineHeight: '1.2',\r\n                  whiteSpace: 'nowrap',\r\n                },\r\n                '& .MuiStepLabel-iconContainer': {\r\n                  paddingRight: '8px',\r\n                },\r\n                '& .MuiStepConnector-root': {\r\n                  top: '16px',\r\n                },\r\n                '& .MuiStep-root': {\r\n                  paddingLeft: 0,\r\n                  paddingRight: '12px',\r\n                  minWidth: '100px',\r\n                },\r\n                '& .MuiStepLabel-root': {\r\n                  flexDirection: 'column',\r\n                  alignItems: 'center',\r\n                  gap: '4px',\r\n                },\r\n                '& .MuiStepLabel-labelContainer': {\r\n                  textAlign: 'center',\r\n                  maxWidth: '90px',\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Clean Step Rendering - Pure Composition */}\r\n        {state.step === 'category' && (\r\n          <CategoryStep onNext={actions.setCategory} />\r\n        )}\r\n\r\n        {state.step === 'intent' && state.category && (\r\n          <IntentStep\r\n            category={state.category}\r\n            onNext={actions.setIntent}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'transactionType' && (\r\n          <TransactionTypeStep\r\n            onNext={actions.setTransactionType}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'employmentType' && (\r\n          <EmploymentTypeStep\r\n            onNext={actions.setEmploymentType}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'availability' && (\r\n          <AvailabilityStep\r\n            onNext={actions.setAvailability}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'availabilityDetails' && (\r\n          <AvailabilityDetailsStep\r\n            availabilityDate={state.availabilityDetails?.date || null}\r\n            availabilityDuration={state.availabilityDetails?.duration || null}\r\n            availabilityDurationUnit={state.availabilityDetails?.unit || null}\r\n            onDateChange={(date) => actions.setAvailabilityDetails(date, state.availabilityDetails?.duration || 1, state.availabilityDetails?.unit || 'months')}\r\n            onDurationChange={(duration) => actions.setAvailabilityDetails(state.availabilityDetails?.date || '', duration, state.availabilityDetails?.unit || 'months')}\r\n            onUnitChange={(unit) => actions.setAvailabilityDetails(state.availabilityDetails?.date || '', state.availabilityDetails?.duration || 1, unit)}\r\n            onNext={actions.locationReady}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'location' && (\r\n          <LocationStep\r\n            category={state.category!}\r\n            intent={state.intent!}\r\n            availability={state.availability!}\r\n            onNext={actions.locationReady}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'layout' && (\r\n          <LayoutStep\r\n            onNext={actions.layoutReady}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'details' && (\r\n          <DetailsStep\r\n            category={state.category!}\r\n            onSubmit={actions.detailsReady}\r\n            onBack={can.goBack ? actions.back : undefined}\r\n          />\r\n        )}\r\n\r\n        {state.step === 'complete' && (\r\n          <CompleteStep\r\n            pipelineState={state}\r\n            onClose={actions.reset}\r\n          />\r\n        )}\r\n\r\n        {/* Fallback Actions Œ≥ŒπŒ± category step */}\r\n        {state.step === 'category' && (\r\n          <FormActions>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={actions.reset}\r\n            >\r\n              {t('pipelines.actions.cancel')}\r\n            </Button>\r\n          </FormActions>\r\n        )}\r\n      </Stack>\r\n    </Modal>\r\n  );\r\n};","/**\r\n * @layera/pipelines - Enterprise Modal Container Hook\r\n * SSR-safe container resolution - NO document access in render\r\n */\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\ninterface UseModalContainerOptions {\r\n  preferredId?: string;\r\n  fallbackId?: string;\r\n}\r\n\r\n/**\r\n * SSR-safe modal container resolver\r\n * Returns container function only after hydration\r\n */\r\nexport function useModalContainer(options: UseModalContainerOptions = {}) {\r\n  const { preferredId = 'layera-device-simulator-viewport', fallbackId = 'root' } = options;\r\n  const [containerFn, setContainerFn] = useState<(() => Element | null) | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Only run after hydration - SSR safe\r\n    const getContainer = (): Element | null => {\r\n      // Try preferred container first\r\n      if (preferredId) {\r\n        const preferred = document.getElementById(preferredId);\r\n        if (preferred) return preferred;\r\n      }\r\n\r\n      // Try fallback\r\n      if (fallbackId) {\r\n        const fallback = document.getElementById(fallbackId);\r\n        if (fallback) return fallback;\r\n      }\r\n\r\n      // Ultimate fallback to body\r\n      return document.body;\r\n    };\r\n\r\n    setContainerFn(() => getContainer);\r\n  }, [preferredId, fallbackId]);\r\n\r\n  return containerFn;\r\n}\r\n\r\n/**\r\n * Simple helper to detect if we're in device simulation mode\r\n * Used for styling decisions\r\n */\r\nexport function useIsDeviceSimulation(): boolean {\r\n  const [isDeviceMode, setIsDeviceMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const deviceViewport = document.getElementById('layera-device-simulator-viewport');\r\n    setIsDeviceMode(!!deviceViewport);\r\n  }, []);\r\n\r\n  return isDeviceMode;\r\n}","/**\r\n * @layera/pipelines - Enterprise State Management Hook\r\n * Purpose: Clean state, actions, guards Œ≥ŒπŒ± UnifiedPipelineModal\r\n * Architecture: useReducer ŒºŒµ functional updates - ŒüŒßŒô setState spreads\r\n */\r\n\r\nimport { useReducer, useCallback, useEffect } from 'react';\r\nimport type { PipelineEvent, PipelineContext } from '../state/types';\r\nimport type { Category, Intent, TransactionType, EmploymentType, Availability } from '../../../domain/unified/types';\r\n\r\ninterface UseUnifiedPipelineOptions {\r\n  onSubmit: (data: any) => Promise<void>;\r\n  onClose?: () => void;\r\n}\r\n\r\ntype PipelineStep = 'category' | 'intent' | 'transactionType' | 'employmentType' | 'availability' | 'availabilityDetails' | 'location' | 'layout' | 'details' | 'complete';\r\n\r\ninterface PipelineState extends PipelineContext {\r\n  step: PipelineStep;\r\n  isSubmitting: boolean;\r\n  error: string | null;\r\n}\r\n\r\n// Pure reducer ŒºŒµ functional updates\r\nfunction pipelineReducer(state: PipelineState, event: PipelineEvent): PipelineState {\r\n  switch (event.type) {\r\n    case 'SET_CATEGORY':\r\n      return {\r\n        ...state,\r\n        category: event.category,\r\n        step: 'intent',\r\n        // Reset dependent state\r\n        intent: null,\r\n        transactionType: null,\r\n        employmentType: null,\r\n        availability: null,\r\n        availabilityDetails: undefined\r\n      };\r\n\r\n    case 'SET_INTENT': {\r\n      const nextStep: PipelineStep = state.category === 'property' ? 'transactionType' : 'employmentType';\r\n      return {\r\n        ...state,\r\n        intent: event.intent,\r\n        step: nextStep,\r\n        // Reset dependent state\r\n        transactionType: null,\r\n        employmentType: null,\r\n        availability: null,\r\n        availabilityDetails: undefined\r\n      };\r\n    }\r\n\r\n    case 'SET_TRANSACTION_TYPE':\r\n      return {\r\n        ...state,\r\n        transactionType: event.transactionType,\r\n        step: 'availability',\r\n        availability: null,\r\n        availabilityDetails: undefined\r\n      };\r\n\r\n    case 'SET_EMPLOYMENT_TYPE':\r\n      return {\r\n        ...state,\r\n        employmentType: event.employmentType,\r\n        step: 'availability',\r\n        availability: null,\r\n        availabilityDetails: undefined\r\n      };\r\n\r\n    case 'SET_AVAILABILITY': {\r\n      // Business logic Œ≥ŒπŒ± conditional steps\r\n      const needsAvailabilityDetails = event.availability === 'future' &&\r\n        ((state.category === 'property' && state.intent === 'offer') || state.category === 'job');\r\n\r\n      const nextStep: PipelineStep = needsAvailabilityDetails ? 'availabilityDetails' : 'location';\r\n\r\n      return {\r\n        ...state,\r\n        availability: event.availability,\r\n        step: nextStep,\r\n        availabilityDetails: needsAvailabilityDetails ? state.availabilityDetails : undefined\r\n      };\r\n    }\r\n\r\n    case 'SET_AVAILABILITY_DETAILS':\r\n      return {\r\n        ...state,\r\n        availabilityDetails: {\r\n          date: event.date,\r\n          duration: event.duration,\r\n          unit: event.unit\r\n        }\r\n      };\r\n\r\n    case 'LOCATION_READY': {\r\n      // Complex navigation logic Œ±œÄœå œÑŒø original\r\n      let nextStep: PipelineStep;\r\n\r\n      if (state.category === 'property' && state.intent === 'offer' && state.availability === 'now') {\r\n        nextStep = 'layout';\r\n      } else if (state.category === 'job' && state.intent === 'search') {\r\n        nextStep = 'complete';\r\n      } else {\r\n        nextStep = 'details';\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        step: nextStep,\r\n        hasLocation: true\r\n      };\r\n    }\r\n\r\n    case 'LAYOUT_READY':\r\n      return {\r\n        ...state,\r\n        step: 'details',\r\n        hasLayout: true\r\n      };\r\n\r\n    case 'DETAILS_READY':\r\n      return {\r\n        ...state,\r\n        step: 'complete',\r\n        hasDetails: true,\r\n        isSubmitting: false\r\n      };\r\n\r\n    case 'BACK': {\r\n      // Pure navigation logic\r\n      switch (state.step) {\r\n        case 'intent':\r\n          return { ...state, step: 'category', intent: null };\r\n\r\n        case 'transactionType':\r\n          return { ...state, step: 'intent', transactionType: null };\r\n\r\n        case 'employmentType':\r\n          return { ...state, step: 'intent', employmentType: null };\r\n\r\n        case 'availability': {\r\n          const prevStep: PipelineStep = state.category === 'job' ? 'employmentType' : 'transactionType';\r\n          return { ...state, step: prevStep, availability: null };\r\n        }\r\n\r\n        case 'availabilityDetails':\r\n          return {\r\n            ...state,\r\n            step: 'availability',\r\n            availabilityDetails: undefined\r\n          };\r\n\r\n        case 'location': {\r\n          const locationPrevStep: PipelineStep =\r\n            (state.availability === 'future' &&\r\n             ((state.category === 'property' && state.intent === 'offer') || state.category === 'job'))\r\n              ? 'availabilityDetails'\r\n              : 'availability';\r\n          return { ...state, step: locationPrevStep };\r\n        }\r\n\r\n        case 'layout':\r\n          return { ...state, step: 'location' };\r\n\r\n        case 'details': {\r\n          const detailsPrevStep: PipelineStep =\r\n            (state.category === 'property' && state.intent === 'offer' && state.availability === 'now')\r\n              ? 'layout'\r\n              : 'location';\r\n          return { ...state, step: detailsPrevStep };\r\n        }\r\n\r\n        default:\r\n          return state;\r\n      }\r\n    }\r\n\r\n    case 'RESET':\r\n      return getInitialState();\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// Pure initial state factory\r\nfunction getInitialState(): PipelineState {\r\n  return {\r\n    step: 'category',\r\n    category: null,\r\n    intent: null,\r\n    transactionType: null,\r\n    employmentType: null,\r\n    availability: null,\r\n    availabilityDetails: undefined,\r\n    hasLocation: false,\r\n    hasLayout: false,\r\n    hasDetails: false,\r\n    isSubmitting: false,\r\n    error: null\r\n  };\r\n}\r\n\r\n/**\r\n * Enterprise State Management Hook\r\n * Returns: { state, actions, can }\r\n */\r\nexport function useUnifiedPipeline({ onSubmit, onClose }: UseUnifiedPipelineOptions) {\r\n  const [state, dispatch] = useReducer(pipelineReducer, getInitialState());\r\n\r\n  // Pure action creators\r\n  const actions = {\r\n    setCategory: useCallback((category: Category) => {\r\n      dispatch({ type: 'SET_CATEGORY', category });\r\n    }, []),\r\n\r\n    setIntent: useCallback((intent: Intent) => {\r\n      dispatch({ type: 'SET_INTENT', intent });\r\n    }, []),\r\n\r\n    setTransactionType: useCallback((transactionType: TransactionType) => {\r\n      dispatch({ type: 'SET_TRANSACTION_TYPE', transactionType });\r\n    }, []),\r\n\r\n    setEmploymentType: useCallback((employmentType: EmploymentType) => {\r\n      dispatch({ type: 'SET_EMPLOYMENT_TYPE', employmentType });\r\n    }, []),\r\n\r\n    setAvailability: useCallback((availability: Availability) => {\r\n      dispatch({ type: 'SET_AVAILABILITY', availability });\r\n    }, []),\r\n\r\n    setAvailabilityDetails: useCallback((date: string, duration: number, unit: 'months' | 'years') => {\r\n      dispatch({ type: 'SET_AVAILABILITY_DETAILS', date, duration, unit });\r\n    }, []),\r\n\r\n    locationReady: useCallback(() => {\r\n      dispatch({ type: 'LOCATION_READY' });\r\n    }, []),\r\n\r\n    layoutReady: useCallback(() => {\r\n      dispatch({ type: 'LAYOUT_READY' });\r\n    }, []),\r\n\r\n    detailsReady: useCallback(async () => {\r\n      try {\r\n        await onSubmit({\r\n          category: state.category,\r\n          intent: state.intent,\r\n          transactionType: state.transactionType,\r\n          employmentType: state.employmentType,\r\n          availability: state.availability,\r\n          availabilityDetails: state.availabilityDetails\r\n        });\r\n        dispatch({ type: 'DETAILS_READY' });\r\n      } catch (error) {\r\n        console.error('Pipeline submission failed:', error);\r\n      }\r\n    }, [onSubmit, state]),\r\n\r\n    back: useCallback(() => {\r\n      dispatch({ type: 'BACK' });\r\n    }, []),\r\n\r\n    reset: useCallback(() => {\r\n      dispatch({ type: 'RESET' });\r\n      onClose?.();\r\n    }, [onClose])\r\n  };\r\n\r\n  // Guard functions Œ≥ŒπŒ± conditional rendering\r\n  const can = {\r\n    goBack: state.step !== 'category' && state.step !== 'complete',\r\n    submit: state.step === 'details' && !state.isSubmitting,\r\n    showAvailabilityDetails: state.step === 'availabilityDetails',\r\n    showLayout: state.step === 'layout'\r\n  };\r\n\r\n  // Telemetry - Enterprise requirement\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined' && window.gtag) {\r\n      window.gtag('event', 'pipeline_step_viewed', {\r\n        step: state.step,\r\n        category: state.category,\r\n        intent: state.intent\r\n      });\r\n    }\r\n  }, [state.step, state.category, state.intent]);\r\n\r\n  return {\r\n    state,\r\n    actions,\r\n    can\r\n  };\r\n}","import { useState, useEffect } from 'react';\r\n\r\nexport const useMediaQuery = (query: string): boolean => {\r\n  const [matches, setMatches] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const media = window.matchMedia(query);\r\n    if (media.matches !== matches) {\r\n      setMatches(media.matches);\r\n    }\r\n\r\n    const listener = () => setMatches(media.matches);\r\n    media.addEventListener('change', listener);\r\n\r\n    return () => media.removeEventListener('change', listener);\r\n  }, [matches, query]);\r\n\r\n  return matches;\r\n};","import type { StepConfig } from '@layera/progress-stepper';\r\nimport type { Category } from '../../../domain/unified/types';\r\n\r\nexport type PipelineStep = 'category' | 'intent' | 'transactionType' | 'employmentType' | 'availability' | 'availabilityDetails' | 'location' | 'layout' | 'details' | 'complete';\r\n\r\n/**\r\n * Enterprise stepper configuration for pipeline steps\r\n */\r\nexport const createStepperConfig = (category: Category | null, t?: (key: string) => string): StepConfig[] => {\r\n  // Smart fallback: if translation returns the key itself, use Greek fallback\r\n  const smartTranslate = (key: string, fallback: string): string => {\r\n    if (!t) return fallback;\r\n    const translated = t(key);\r\n    // If translation fails, i18next returns the key itself\r\n    return translated === key ? fallback : translated;\r\n  };\r\n\r\n  const baseSteps: StepConfig[] = [\r\n    {\r\n      id: 'category',\r\n      label: smartTranslate('progress.stepper.labels.category', 'ŒöŒ±œÑŒ∑Œ≥ŒøœÅŒØŒ±'),\r\n      description: smartTranslate('progress.stepper.descriptions.category', 'Œ§œçœÄŒøœÇ')\r\n    },\r\n    {\r\n      id: 'intent',\r\n      label: t ? t('progress.stepper.labels.intent') : 'Œ£Œ∫ŒøœÄœåœÇ',\r\n      description: t ? t('progress.stepper.descriptions.intent') : 'ŒîœÅŒ¨œÉŒ∑'\r\n    }\r\n  ];\r\n\r\n  if (category === 'property') {\r\n    return [\r\n      ...baseSteps,\r\n      {\r\n        id: 'transactionType',\r\n        label: t ? t('progress.stepper.labels.transactionType') : 'Œ£œÖŒΩŒ±ŒªŒªŒ±Œ≥ŒÆ',\r\n        description: t ? t('progress.stepper.descriptions.transactionType') : 'Œ§œçœÄŒøœÇ'\r\n      },\r\n      {\r\n        id: 'location',\r\n        label: t ? t('progress.stepper.labels.location') : 'Œ§ŒøœÄŒøŒ∏ŒµœÉŒØŒ±',\r\n        description: t ? t('progress.stepper.descriptions.location') : 'ŒßŒ¨œÅœÑŒ∑œÇ'\r\n      },\r\n      {\r\n        id: 'layout',\r\n        label: t ? t('progress.stepper.labels.layout') : 'ŒöŒ¨œÑŒøœàŒ∑',\r\n        description: t ? t('progress.stepper.descriptions.layout') : 'ŒîŒπŒ¨œÑŒ±ŒæŒ∑',\r\n        optional: true\r\n      },\r\n      {\r\n        id: 'details',\r\n        label: t ? t('progress.stepper.labels.details') : 'Œ£œÑŒøŒπœáŒµŒØŒ±',\r\n        description: t ? t('progress.stepper.descriptions.details') : 'Œ†ŒµœÅŒπŒ≥œÅŒ±œÜŒÆ'\r\n      },\r\n      {\r\n        id: 'complete',\r\n        label: t ? t('progress.stepper.labels.complete') : 'Œ§Œ≠ŒªŒøœÇ',\r\n        description: t ? t('progress.stepper.descriptions.complete') : 'ŒïœÄŒπŒ≤ŒµŒ≤Œ±ŒØœâœÉŒ∑'\r\n      }\r\n    ];\r\n  }\r\n\r\n  if (category === 'job') {\r\n    return [\r\n      ...baseSteps,\r\n      {\r\n        id: 'employmentType',\r\n        label: t ? t('progress.stepper.labels.employmentType') : 'ŒïœÅŒ≥Œ±œÉŒØŒ±',\r\n        description: t ? t('progress.stepper.descriptions.employmentType') : 'Œ§œçœÄŒøœÇ'\r\n      },\r\n      {\r\n        id: 'availability',\r\n        label: t ? t('progress.stepper.labels.availability') : 'ŒîŒπŒ±Œ∏ŒµœÉŒπŒºœåœÑŒ∑œÑŒ±',\r\n        description: t ? t('progress.stepper.descriptions.availability') : 'Œ†œåœÑŒµ'\r\n      },\r\n      {\r\n        id: 'availabilityDetails',\r\n        label: t ? t('progress.stepper.labels.availabilityDetails') : 'ŒõŒµœÄœÑŒøŒºŒ≠œÅŒµŒπŒµœÇ',\r\n        description: t ? t('progress.stepper.descriptions.availabilityDetails') : 'ŒóŒºŒµœÅŒøŒºŒ∑ŒΩŒØŒµœÇ'\r\n      },\r\n      {\r\n        id: 'location',\r\n        label: t ? t('progress.stepper.labels.location') : 'Œ§ŒøœÄŒøŒ∏ŒµœÉŒØŒ±',\r\n        description: t ? t('progress.stepper.descriptions.location') : 'Œ†ŒµœÅŒπŒøœáŒÆ'\r\n      },\r\n      {\r\n        id: 'details',\r\n        label: t ? t('progress.stepper.labels.details') : 'Œ£œÑŒøŒπœáŒµŒØŒ±',\r\n        description: t ? t('progress.stepper.descriptions.details') : 'Œ†ŒµœÅŒπŒ≥œÅŒ±œÜŒÆ'\r\n      },\r\n      {\r\n        id: 'complete',\r\n        label: t ? t('progress.stepper.labels.complete') : 'Œ§Œ≠ŒªŒøœÇ',\r\n        description: t ? t('progress.stepper.descriptions.complete') : 'ŒïœÄŒπŒ≤ŒµŒ≤Œ±ŒØœâœÉŒ∑'\r\n      }\r\n    ];\r\n  }\r\n\r\n  return baseSteps;\r\n};\r\n\r\n/**\r\n * Get the index of current step in stepper\r\n */\r\nexport const getStepIndex = (currentStep: PipelineStep, steps: StepConfig[]): number => {\r\n  return steps.findIndex(step => step.id === currentStep);\r\n};\r\n\r\n/**\r\n * Update step completion status\r\n */\r\nexport const updateStepCompletion = (\r\n  steps: StepConfig[],\r\n  completedSteps: PipelineStep[]\r\n): StepConfig[] => {\r\n  return steps.map(step => ({\r\n    ...step,\r\n    completed: completedSteps.includes(step.id as PipelineStep)\r\n  }));\r\n};","import React from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { VillaIcon, BriefcaseIcon } from '@layera/icons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport type Category = 'property' | 'job';\r\n\r\nexport interface CategoryStepProps {\r\n  onNext: (category: Category) => void;\r\n}\r\n\r\n/**\r\n * CategoryStep - Enterprise LEGO Component\r\n * Purpose: Category selection (Property vs Job) - EXACT from original UnifiedPipeline.tsx\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const CategoryStep: React.FC<CategoryStepProps> = ({ onNext }) => {\r\n  const { t } = useLayeraTranslation();\r\n\r\n  return (\r\n    <Stack spacing=\"md\">\r\n      <Heading as=\"h3\" size=\"lg\" color=\"primary\">\r\n        {t('pipeline.category.selection.title')}\r\n      </Heading>\r\n\r\n      <Stack spacing=\"md\">\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('property')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <VillaIcon size=\"xl\" theme=\"primary\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipeline.category.property.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipeline.category.property.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('job')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <BriefcaseIcon size=\"xl\" theme=\"success\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipeline.category.job.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipeline.category.job.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};","import React from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { Button } from '@layera/buttons';\r\nimport { FormActions } from '@layera/forms';\r\nimport { IndustrialIcon, RestaurantIcon } from '@layera/icons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport type Intent = 'offer' | 'search';\r\n\r\nexport interface IntentStepProps {\r\n  category: 'property' | 'job';\r\n  onNext: (intent: Intent) => void;\r\n  onBack: () => void;\r\n}\r\n\r\n/**\r\n * IntentStep - Enterprise LEGO Component\r\n * Purpose: Intent selection (Offer vs Search) - EXACT from original UnifiedPipeline.tsx\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const IntentStep: React.FC<IntentStepProps> = ({ category, onNext, onBack }) => {\r\n  const { t } = useLayeraTranslation();\r\n\r\n  return (\r\n    <Stack spacing=\"md\">\r\n      <Heading as=\"h3\" size=\"lg\" color=\"primary\">\r\n        {t('pipeline.intent.selection.title', {\r\n          category: category === 'property' ? t('pipeline.category.property.title') : t('pipeline.category.job.title')\r\n        })}\r\n      </Heading>\r\n\r\n      <Stack spacing=\"md\">\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('offer')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <IndustrialIcon size=\"xl\" theme=\"info\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">\r\n                {t(`pipeline.intent.offer.${category}.title`)}\r\n              </Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t(`pipeline.intent.offer.${category}.description`)}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('search')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <RestaurantIcon size=\"xl\" theme=\"warning\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">\r\n                {t(`pipeline.intent.search.${category}.title`)}\r\n              </Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t(`pipeline.intent.search.${category}.description`)}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n      </Stack>\r\n\r\n      <FormActions>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          onClick={onBack}\r\n          className=\"layera-pipeline-button-secondary\"\r\n        >\r\n          {t('pipelines.actions.back')}\r\n        </Button>\r\n      </FormActions>\r\n    </Stack>\r\n  );\r\n};","import React from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { Button } from '@layera/buttons';\r\nimport { FormActions } from '@layera/forms';\r\nimport { CommercialIcon, BuildingIcon } from '@layera/icons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport type TransactionType = 'sale' | 'rent';\r\n\r\nexport interface TransactionTypeStepProps {\r\n  onNext: (transactionType: TransactionType) => void;\r\n  onBack: () => void;\r\n}\r\n\r\n/**\r\n * TransactionTypeStep - Enterprise LEGO Component\r\n * Purpose: Transaction type selection (Sale vs Rent) - EXACT from original UnifiedPipeline.tsx\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const TransactionTypeStep: React.FC<TransactionTypeStepProps> = ({ onNext, onBack }) => {\r\n  const { t } = useLayeraTranslation();\r\n\r\n  return (\r\n    <Stack spacing=\"md\">\r\n      <Heading as=\"h3\" size=\"lg\" color=\"primary\">\r\n        {t('pipelines.steps.transaction.title')}\r\n      </Heading>\r\n\r\n      <Stack spacing=\"md\">\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('sale')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <CommercialIcon size=\"xl\" theme=\"success\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.transaction.sale.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipelines.steps.transaction.sale.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('rent')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <BuildingIcon size=\"xl\" theme=\"neutral\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.transaction.rent.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipelines.steps.transaction.rent.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n      </Stack>\r\n\r\n      <FormActions>\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={onBack}\r\n          className=\"layera-unified-button\"\r\n        >\r\n          {t('pipelines.actions.back')}\r\n        </Button>\r\n      </FormActions>\r\n    </Stack>\r\n  );\r\n};","import React from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { Button } from '@layera/buttons';\r\nimport { FormActions } from '@layera/forms';\r\nimport { ToolIcon, HospitalIcon, TruckIcon, StoreIcon } from '@layera/icons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport type EmploymentType = 'full_time' | 'part_time' | 'freelance' | 'seasonal';\r\n\r\nexport interface EmploymentTypeStepProps {\r\n  onNext: (employmentType: EmploymentType) => void;\r\n  onBack: () => void;\r\n}\r\n\r\n/**\r\n * EmploymentTypeStep - Enterprise LEGO Component\r\n * Purpose: Employment type selection - EXACT from original UnifiedPipeline.tsx\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const EmploymentTypeStep: React.FC<EmploymentTypeStepProps> = ({ onNext, onBack }) => {\r\n  const { t } = useLayeraTranslation();\r\n\r\n  return (\r\n    <Stack spacing=\"md\">\r\n      <Heading as=\"h3\" size=\"lg\" color=\"primary\">\r\n        {t('pipelines.steps.employmentType.title')}\r\n      </Heading>\r\n\r\n      <Stack spacing=\"md\">\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('full_time')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <ToolIcon size=\"xl\" theme=\"primary\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.employmentType.fullTime.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipelines.steps.employmentType.fullTime.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('part_time')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <HospitalIcon size=\"xl\" theme=\"info\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.employmentType.partTime.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipelines.steps.employmentType.partTime.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('freelance')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <TruckIcon size=\"xl\" theme=\"success\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.employmentType.freelance.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipelines.steps.employmentType.freelance.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('seasonal')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <StoreIcon size=\"xl\" theme=\"warning\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.employmentType.seasonal.title')}</Text>\r\n              <Text\r\n                size=\"base\"\r\n                color=\"secondary\"\r\n                className=\"card-text\"\r\n              >\r\n                {t('pipelines.steps.employmentType.seasonal.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n      </Stack>\r\n\r\n      <FormActions>\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={onBack}\r\n          className=\"layera-unified-button\"\r\n        >\r\n          {t('pipelines.actions.back')}\r\n        </Button>\r\n      </FormActions>\r\n    </Stack>\r\n  );\r\n};","import React from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { CheckIcon, RefreshIcon } from '@layera/icons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport type Availability = 'now' | 'future';\r\n\r\nexport interface AvailabilityStepProps {\r\n  onNext: (availability: Availability) => void;\r\n}\r\n\r\n/**\r\n * AvailabilityStep - Enterprise LEGO Component\r\n * Purpose: Availability selection (Now vs Future)\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const AvailabilityStep: React.FC<AvailabilityStepProps> = ({ onNext }) => {\r\n  const { t } = useLayeraTranslation();\r\n\r\n  return (\r\n    <Stack spacing=\"lg\">\r\n      <Heading as=\"h2\" size=\"xl\" color=\"primary\">\r\n        {t('pipelines.steps.availability.question.title')}\r\n      </Heading>\r\n\r\n      <Text size=\"lg\" color=\"secondary\">\r\n        {t('pipelines.steps.availability.question.subtitle')}\r\n      </Text>\r\n\r\n      <Stack spacing=\"md\">\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('now')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <CheckIcon size=\"xl\" theme=\"primary\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.availability.options.now.title')}</Text>\r\n              <Text size=\"base\" color=\"secondary\" className=\"card-text\">\r\n                {t('pipelines.steps.availability.options.now.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n\r\n        <BaseCard\r\n          clickable\r\n          onClick={() => onNext('future')}\r\n          variant=\"outlined\"\r\n          size=\"lg\"\r\n          padding=\"lg\"\r\n          hoverable\r\n          className=\"layera-unified-card\"\r\n        >\r\n          <Flex align=\"start\" gap=\"lg\">\r\n            <RefreshIcon size=\"xl\" theme=\"secondary\" />\r\n            <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n              <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('pipelines.steps.availability.options.future.title')}</Text>\r\n              <Text size=\"base\" color=\"secondary\" className=\"card-text\">\r\n                {t('pipelines.steps.availability.options.future.description')}\r\n              </Text>\r\n            </Stack>\r\n          </Flex>\r\n        </BaseCard>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack } from '@layera/layout';\r\nimport { FormField, Input, FormActions } from '@layera/forms';\r\nimport { Button } from '@layera/buttons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport interface AvailabilityDetails {\r\n  date: string;\r\n  duration: number;\r\n  unit: 'months' | 'years';\r\n}\r\n\r\nexport interface AvailabilityDetailsStepProps {\r\n  onNext: (details: AvailabilityDetails) => void;\r\n}\r\n\r\n/**\r\n * AvailabilityDetailsStep - Enterprise LEGO Component\r\n * Purpose: Future availability details form\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const AvailabilityDetailsStep: React.FC<AvailabilityDetailsStepProps> = ({ onNext }) => {\r\n  const { t } = useLayeraTranslation();\r\n  const [date, setDate] = useState('');\r\n  const [duration, setDuration] = useState<number>(12);\r\n  const [unit, setUnit] = useState<'months' | 'years'>('months');\r\n\r\n  const handleNext = () => {\r\n    if (date && duration > 0) {\r\n      onNext({ date, duration, unit });\r\n    }\r\n  };\r\n\r\n  const isValid = date && duration > 0;\r\n\r\n  return (\r\n    <Stack spacing=\"lg\">\r\n      <Heading as=\"h2\" size=\"xl\" color=\"primary\">\r\n        {t('pipelines.steps.availability.title')}\r\n      </Heading>\r\n\r\n      <Text size=\"lg\" color=\"secondary\">\r\n        {t('pipelines.steps.availability.subtitle')}\r\n      </Text>\r\n\r\n      <Stack spacing=\"md\">\r\n        <FormField label={t('pipelines.steps.availability.fields.startDate')} required>\r\n          <Input\r\n            type=\"date\"\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n            placeholder={t('pipelines.steps.availability.placeholders.datePlaceholder')}\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n          />\r\n        </FormField>\r\n\r\n        <FormField label={t('pipelines.steps.availability.fields.duration')} required>\r\n          <Input\r\n            type=\"number\"\r\n            value={duration}\r\n            onChange={(e) => setDuration(parseInt(e.target.value) || 0)}\r\n            placeholder={t('pipelines.steps.availability.placeholders.duration')}\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n          />\r\n        </FormField>\r\n\r\n        <FormField label={t('pipelines.steps.availability.fields.unit')} required>\r\n          <select\r\n            value={unit}\r\n            onChange={(e) => setUnit(e.target.value as 'months' | 'years')}\r\n            style={{ padding: '12px', fontSize: '16px', borderRadius: '4px' }}\r\n          >\r\n            <option value=\"months\">{t('pipelines.steps.availability.units.months')}</option>\r\n            <option value=\"years\">{t('pipelines.steps.availability.units.years')}</option>\r\n          </select>\r\n        </FormField>\r\n      </Stack>\r\n\r\n      <FormActions>\r\n        <Button\r\n          variant=\"primary\"\r\n          size=\"lg\"\r\n          onClick={handleNext}\r\n          disabled={!isValid}\r\n        >\r\n          {t('pipelines.actions.continue')}\r\n        </Button>\r\n      </FormActions>\r\n    </Stack>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { Button } from '@layera/buttons';\r\nimport { FormActions } from '@layera/forms';\r\nimport { UploadIcon, MapIcon, CheckIcon } from '@layera/icons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport interface LocationDetails {\r\n  type: 'upload' | 'drawing';\r\n}\r\n\r\nexport interface LocationStepProps {\r\n  category: 'property' | 'job';\r\n  intent: 'offer' | 'search';\r\n  availability: 'now' | 'future';\r\n  onNext: () => void;\r\n  onBack: () => void;\r\n}\r\n\r\n/**\r\n * LocationStep - Enterprise LEGO Component\r\n * Purpose: Location Definition - EXACT from original UnifiedPipeline.tsx\r\n * Property + Offer + Now = File Upload, everything else = Drawing\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const LocationStep: React.FC<LocationStepProps> = ({\r\n  category,\r\n  intent,\r\n  availability,\r\n  onNext,\r\n  onBack\r\n}) => {\r\n  const { t } = useLayeraTranslation();\r\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\r\n\r\n  const getFileType = (file: File): 'image' | 'pdf' | 'cad' | 'unknown' => {\r\n    const extension = file.name.toLowerCase().split('.').pop();\r\n    const mimeType = file.type.toLowerCase();\r\n\r\n    if (mimeType.startsWith('image/') || ['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(extension || '')) {\r\n      return 'image';\r\n    }\r\n    if (mimeType === 'application/pdf' || extension === 'pdf') {\r\n      return 'pdf';\r\n    }\r\n    if (['dxf', 'dwg'].includes(extension || '') || mimeType.includes('acad') || mimeType.includes('autocad')) {\r\n      return 'cad';\r\n    }\r\n    return 'unknown';\r\n  };\r\n\r\n  const sendFileToMap = (file: File) => {\r\n    const fileType = getFileType(file);\r\n\r\n    // ŒîŒ∑ŒºŒπŒøœÖœÅŒ≥ŒØŒ± URL Œ≥ŒπŒ± œÑŒø Œ±œÅœáŒµŒØŒø\r\n    const fileUrl = URL.createObjectURL(file);\r\n\r\n    // ŒëœÄŒøœÉœÑŒøŒªŒÆ event œÉœÑŒøŒΩ œáŒ¨œÅœÑŒ∑\r\n    const mapEvent = new CustomEvent('showFloorPlan', {\r\n      detail: {\r\n        file: file,\r\n        fileUrl: fileUrl,\r\n        fileName: file.name,\r\n        fileType: fileType,\r\n        fileSize: file.size\r\n      }\r\n    });\r\n\r\n    console.log('üìÇ Sending floor plan to map:', {\r\n      fileName: file.name,\r\n      fileType: fileType,\r\n      fileSize: `${(file.size / 1024 / 1024).toFixed(2)} MB`,\r\n      fileUrl: fileUrl\r\n    });\r\n\r\n    console.log('üì§ Dispatching showFloorPlan event to window...');\r\n    window.dispatchEvent(mapEvent);\r\n    console.log('‚úÖ Event dispatched successfully');\r\n  };\r\n\r\n  return (\r\n    <Stack spacing=\"md\">\r\n      <Heading as=\"h3\" size=\"lg\" color=\"primary\">\r\n        {t('pipelines.steps.layout.title')}\r\n      </Heading>\r\n\r\n      {/* Property + Offer + Now = File Upload, everything else = Drawing */}\r\n      {category === 'property' && intent === 'offer' && availability === 'now' ? (\r\n        <Stack spacing=\"md\">\r\n          <Text size=\"base\" color=\"secondary\">\r\n            {t('location.uploadFloorplan')}\r\n          </Text>\r\n          <BaseCard\r\n            clickable\r\n            onClick={() => {\r\n              const fileInput = document.createElement('input');\r\n              fileInput.type = 'file';\r\n              fileInput.accept = 'image/jpeg,image/png,image/gif,image/webp,application/pdf,.dxf,.dwg,application/acad,application/x-autocad';\r\n              fileInput.style.display = 'none';\r\n              fileInput.onchange = (e: Event) => {\r\n                const target = e.target as HTMLInputElement;\r\n                const file = target.files?.[0];\r\n                if (file) {\r\n                  setUploadedFile(file);\r\n                  sendFileToMap(file);\r\n                  console.log('Floor plan selected:', file.name, 'Type:', getFileType(file));\r\n                  // ŒëœÖœÑœåŒºŒ±œÑŒ∑ ŒºŒµœÑŒ¨Œ≤Œ±œÉŒ∑ œÉœÑŒø ŒµœÄœåŒºŒµŒΩŒø Œ≤ŒÆŒºŒ±\r\n                  setTimeout(() => {\r\n                    onNext();\r\n                  }, 500);\r\n                }\r\n              };\r\n              document.body.appendChild(fileInput);\r\n              fileInput.click();\r\n              document.body.removeChild(fileInput);\r\n            }}\r\n            variant=\"outlined\"\r\n            size=\"lg\"\r\n            padding=\"lg\"\r\n            hoverable\r\n            className=\"layera-unified-card\"\r\n          >\r\n            <Stack spacing=\"md\" style={{ width: '100%' }}>\r\n              {uploadedFile ? (\r\n                // ŒïœÄŒπŒ≤ŒµŒ≤Œ±ŒØœâœÉŒ∑ œåœÑŒπ œÑŒø Œ±œÅœáŒµŒØŒø œÉœÑŒ¨ŒªŒ∏Œ∑Œ∫Œµ œÉœÑŒøŒΩ œáŒ¨œÅœÑŒ∑\r\n                <Stack spacing=\"sm\" align=\"center\">\r\n                  <Flex gap=\"sm\" align=\"center\">\r\n                    <CheckIcon size=\"md\" theme=\"success\" />\r\n                    <Text size=\"lg\" weight=\"bold\" color=\"success\">\r\n                      Œó Œ∫Œ¨œÑŒøœàŒ∑ ŒµŒºœÜŒ±ŒΩŒØœÉœÑŒ∑Œ∫Œµ œÉœÑŒøŒΩ œáŒ¨œÅœÑŒ∑!\r\n                    </Text>\r\n                  </Flex>\r\n\r\n                  <div style={{\r\n                    wordBreak: 'break-all',\r\n                    padding: '12px',\r\n                    backgroundColor: '#f0fdf4',\r\n                    border: '1px solid #10b981',\r\n                    borderRadius: '8px',\r\n                    maxWidth: '300px',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <Text size=\"sm\" color=\"secondary\">\r\n                      {uploadedFile.name}\r\n                    </Text>\r\n                    <br />\r\n                    <Text size=\"xs\" color=\"secondary\">\r\n                      {getFileType(uploadedFile).toUpperCase()} ‚Ä¢ {(uploadedFile.size / 1024 / 1024).toFixed(2)} MB\r\n                    </Text>\r\n                  </div>\r\n\r\n                  <Text size=\"sm\" color=\"secondary\" align=\"center\" style={{\r\n                    fontStyle: 'italic',\r\n                    maxWidth: '280px'\r\n                  }}>\r\n                    Œ£œÖŒΩŒµœáŒØœÉœÑŒµ œÉœÑŒø ŒµœÄœåŒºŒµŒΩŒø Œ≤ŒÆŒºŒ± Œ≥ŒπŒ± œÑŒøœÄŒøŒ∏Œ≠œÑŒ∑œÉŒ∑ Œ∫Œ±Œπ œÄœÅŒøœÉŒ±œÅŒºŒøŒ≥ŒÆ\r\n                  </Text>\r\n                </Stack>\r\n              ) : (\r\n                // Default Upload UI\r\n                <Flex align=\"start\" gap=\"lg\">\r\n                  <UploadIcon size=\"xl\" theme=\"primary\" />\r\n                  <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n                    <Text size=\"xl\" weight=\"bold\" className=\"card-title\">\r\n                      {t('pipelines.steps.layout.floorPlan.selectFile')}\r\n                    </Text>\r\n                    <Text size=\"base\" color=\"secondary\" className=\"card-text\">\r\n                      {t('pipelines.steps.layout.floorPlan.description')}\r\n                    </Text>\r\n                    <Text size=\"sm\" color=\"secondary\" style={{ marginTop: '8px' }}>\r\n                      {t('pipelines.steps.layout.floorPlan.supportedTypes')}\r\n                    </Text>\r\n                  </Stack>\r\n                </Flex>\r\n              )}\r\n            </Stack>\r\n          </BaseCard>\r\n        </Stack>\r\n      ) : (\r\n        <Stack spacing=\"md\">\r\n          <Text size=\"base\" color=\"secondary\">\r\n            {intent === 'offer'\r\n              ? t('drawingArea')\r\n              : t('drawingSearchArea')\r\n            }\r\n          </Text>\r\n          <BaseCard\r\n            clickable\r\n            onClick={() => {\r\n              // TODO: Drawing tool logic\r\n              onNext();\r\n            }}\r\n            variant=\"outlined\"\r\n            size=\"lg\"\r\n            padding=\"lg\"\r\n            hoverable\r\n            className=\"layera-unified-card\"\r\n          >\r\n            <Flex align=\"start\" gap=\"lg\">\r\n              <MapIcon size=\"xl\" theme=\"primary\" />\r\n              <Stack spacing=\"xs\" style={{ flex: 1, minWidth: 0 }}>\r\n                <Text size=\"xl\" weight=\"bold\" className=\"card-title\">{t('openDrawingTool')}</Text>\r\n                <Text size=\"base\" color=\"secondary\" className=\"card-text\">\r\n                  {t('clickToDrawOnMap')}\r\n                </Text>\r\n              </Stack>\r\n            </Flex>\r\n          </BaseCard>\r\n        </Stack>\r\n      )}\r\n\r\n      <FormActions>\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={onBack}\r\n          className=\"layera-unified-button\"\r\n        >\r\n          {t('pipelines.actions.back')}\r\n        </Button>\r\n      </FormActions>\r\n    </Stack>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { Button } from '@layera/buttons';\r\nimport { FormActions } from '@layera/forms';\r\nimport { Input } from '@layera/forms';\r\nimport { LocationIcon } from '@layera/icons';\r\nimport { useGeocode } from '../../../geocoding/src/index';\r\nimport { AddressBreakdownCard } from '../../../address-breakdown/src/index';\r\nimport { useLayeraTranslation } from '@layera/i18n';\r\n\r\nexport interface LayoutState {\r\n  layoutLocation: string | null;\r\n  layoutRotation: number;\r\n  layoutScaleWidth: number;\r\n  layoutScaleHeight: number;\r\n  layoutScaleDepth: number;\r\n  activeScaleField: 'width' | 'height' | 'depth' | null;\r\n}\r\n\r\nexport interface LayoutStepProps {\r\n  onNext: () => void;\r\n  onBack: () => void;\r\n}\r\n\r\n/**\r\n * LayoutStep - Enterprise LEGO Component\r\n * Purpose: Layout & Positioning tools - EXACT from original UnifiedPipeline.tsx\r\n * Property + Offer + Now ONLY - Complex positioning controls\r\n * Complexity: High (matching original)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const LayoutStep: React.FC<LayoutStepProps> = ({ onNext, onBack }) => {\r\n  const { t } = useLayeraTranslation();\r\n  const [layoutRotation, setLayoutRotation] = useState<number>(0);\r\n  const [layoutScaleWidth, setLayoutScaleWidth] = useState<number>(1);\r\n  const [layoutScaleHeight, setLayoutScaleHeight] = useState<number>(1);\r\n  const [layoutScaleDepth, setLayoutScaleDepth] = useState<number>(1);\r\n  const [activeScaleField, setActiveScaleField] = useState<'width' | 'height' | 'depth' | null>(null);\r\n\r\n  // Geocoding hook Œ≥ŒπŒ± Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ œÑŒøœÄŒøŒ∏ŒµœÉŒØŒ±œÇ\r\n  const { query: layoutLocation, actions: geocodeActions, isLoading, results, selectedResult } = useGeocode({\r\n    debounceMs: 500,\r\n    autoSearch: false,\r\n    onSelect: (result) => {\r\n      console.log('üéØ LayoutStep: Location selected:', result.displayName);\r\n\r\n      // Dispatch ŒΩŒ≠Œø event Œ≥ŒπŒ± search results œÄŒøœÖ Œ¥ŒπŒ±œáœâœÅŒØŒ∂ŒµŒπ Œ±œÄœå user location\r\n      const mapEvent = new CustomEvent('showSearchResult', {\r\n        detail: {\r\n          latitude: result.coordinates.latitude,\r\n          longitude: result.coordinates.longitude,\r\n          zoom: 16,\r\n          displayName: result.displayName\r\n        }\r\n      });\r\n      console.log('üì° LayoutStep: Dispatching showSearchResult event for search result');\r\n      window.dispatchEvent(mapEvent);\r\n\r\n      // ŒúŒµœÑŒ±Œ∫ŒØŒΩŒ∑œÉŒ∑ floor plan œÉœÑŒ∑ŒΩ ŒµœÄŒπŒªŒµŒ≥ŒºŒ≠ŒΩŒ∑ œÑŒøœÄŒøŒ∏ŒµœÉŒØŒ± (Œ≥ŒπŒ± Property Offers)\r\n      const floorPlanEvent = new CustomEvent('moveFloorPlanToLocation', {\r\n        detail: {\r\n          latitude: result.coordinates.latitude,\r\n          longitude: result.coordinates.longitude,\r\n          reason: 'search_result',\r\n          displayName: result.displayName\r\n        }\r\n      });\r\n      console.log('üè† LayoutStep: Dispatching moveFloorPlanToLocation event for search result:', result.displayName);\r\n      window.dispatchEvent(floorPlanEvent);\r\n    }\r\n  });\r\n\r\n  // Listen Œ≥ŒπŒ± Œ±ŒªŒªŒ±Œ≥Œ≠œÇ Œ≥ŒªœéœÉœÉŒ±œÇ Œ∫Œ±Œπ ŒæŒ±ŒΩŒ¨Œ∫Œ±ŒΩŒµ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ Œ±ŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒ±\r\n  useEffect(() => {\r\n    const handleLanguageChange = () => {\r\n      const currentLang = localStorage.getItem('i18nextLng');\r\n      console.log('üåç LayoutStep detected language change to:', currentLang);\r\n\r\n      // ŒëŒΩ Œ≠œáŒøœÖŒºŒµ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒ±, ŒæŒ±ŒΩŒ¨Œ∫Œ±ŒΩŒµ œÑŒ∑ŒΩ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑\r\n      if (layoutLocation && results.length > 0) {\r\n        console.log('üîÑ Re-searching location with new language:', currentLang);\r\n        geocodeActions.search(layoutLocation);\r\n      }\r\n    };\r\n\r\n    // ŒàŒªŒµŒ≥œáŒøœÇ Œ∫Œ¨Œ∏Œµ 1 Œ¥ŒµœÖœÑŒµœÅœåŒªŒµœÄœÑŒø Œ≥ŒπŒ± Œ±ŒªŒªŒ±Œ≥ŒÆ Œ≥ŒªœéœÉœÉŒ±œÇ\r\n    let lastLang = localStorage.getItem('i18nextLng');\r\n    const interval = setInterval(() => {\r\n      const storedLang = localStorage.getItem('i18nextLng');\r\n\r\n      if (storedLang !== lastLang) {\r\n        lastLang = storedLang;\r\n        handleLanguageChange();\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [layoutLocation, results.length, geocodeActions]);\r\n\r\n  const handleFindMyLocation = () => {\r\n    console.log('üîç LayoutStep: Find location button clicked');\r\n\r\n    if ('geolocation' in navigator) {\r\n      console.log('üåç LayoutStep: Geolocation is available, requesting position...');\r\n\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const { latitude, longitude } = position.coords;\r\n          console.log('üìç LayoutStep: User location found:', { latitude, longitude });\r\n\r\n          // ŒÜŒºŒµœÉŒ∑ ŒµŒΩŒ∑ŒºŒ≠œÅœâœÉŒ∑ œÑŒøœÖ œáŒ¨œÅœÑŒ∑ ŒºŒµ œÑŒ∑ Œ∏Œ≠œÉŒ∑ œÑŒøœÖ œáœÅŒÆœÉœÑŒ∑\r\n          // Œ†œÅŒøœÉœÄŒµŒªŒ±œçŒΩœâ œÑŒø œáŒ¨œÅœÑŒ∑ ŒΩŒ± Œ∫ŒµŒΩœÑœÅŒ±œÅŒπœÉœÑŒµŒØ œÉœÑŒ∑ Œ∏Œ≠œÉŒ∑ œÑŒøœÖ œáœÅŒÆœÉœÑŒ∑\r\n          const mapEvent = new CustomEvent('centerMapToLocation', {\r\n            detail: { latitude, longitude, zoom: 16 }\r\n          });\r\n          console.log('üì° LayoutStep: Dispatching centerMapToLocation event with:', { latitude, longitude, zoom: 16 });\r\n          window.dispatchEvent(mapEvent);\r\n\r\n          // ŒúŒµœÑŒ±Œ∫ŒØŒΩŒ∑œÉŒ∑ floor plan œÉœÑŒ∑ Œ∏Œ≠œÉŒ∑ œÑŒøœÖ œáœÅŒÆœÉœÑŒ∑ (Œ≥ŒπŒ± Property Offers)\r\n          const floorPlanEvent = new CustomEvent('moveFloorPlanToLocation', {\r\n            detail: {\r\n              latitude,\r\n              longitude,\r\n              reason: 'user_location'\r\n            }\r\n          });\r\n          console.log('üè† LayoutStep: Dispatching moveFloorPlanToLocation event for user location');\r\n          window.dispatchEvent(floorPlanEvent);\r\n\r\n          // ŒïŒΩŒ∑ŒºŒ≠œÅœâœÉŒ∑ œÑŒøœÖ input field ŒºŒµ œÑŒπœÇ œÉœÖŒΩœÑŒµœÑŒ±Œ≥ŒºŒ≠ŒΩŒµœÇ\r\n          geocodeActions.setQuery(`${latitude.toFixed(6)}, ${longitude.toFixed(6)}`);\r\n          console.log('‚úÖ LayoutStep: Location field updated');\r\n        },\r\n        (error) => {\r\n          console.error('‚ùå LayoutStep: Geolocation error:', error);\r\n          // Œ£ŒπœâœÄŒ∑œÅŒÆ Œ¥ŒπŒ±œáŒµŒØœÅŒπœÉŒ∑ œÉœÜŒ±ŒªŒºŒ¨œÑœâŒΩ - œáœâœÅŒØœÇ alerts\r\n        },\r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 5000,\r\n          maximumAge: 300000 // 5 ŒªŒµœÄœÑŒ¨ cache\r\n        }\r\n      );\r\n    } else {\r\n      console.error('‚ùå LayoutStep: Geolocation is not supported by this browser');\r\n    }\r\n  };\r\n\r\n  const handleLayoutLocationSearch = async () => {\r\n    if (!layoutLocation.trim()) {\r\n      console.log('üîç LayoutStep: Empty search query');\r\n      return;\r\n    }\r\n\r\n    console.log('üîç LayoutStep: Starting location search for:', layoutLocation);\r\n    await geocodeActions.search(layoutLocation);\r\n  };\r\n\r\n  const handleScaleFieldEdit = (field: 'width' | 'height' | 'depth') => {\r\n    setActiveScaleField(field);\r\n  };\r\n\r\n  const handleScaleFieldOk = (field: 'width' | 'height' | 'depth') => {\r\n    setActiveScaleField(null);\r\n  };\r\n\r\n  return (\r\n    <Stack spacing=\"lg\">\r\n      <Heading as=\"h3\" size=\"lg\" color=\"primary\">\r\n        {t('pipelines.steps.layout.title')}\r\n      </Heading>\r\n\r\n      {/* ŒíœÅŒµœÇ œÑŒ∑ Œ∏Œ≠œÉŒ∑ ŒºŒøœÖ button */}\r\n      <Button\r\n        variant=\"primary\"\r\n        onClick={handleFindMyLocation}\r\n        style={{\r\n          width: '100%',\r\n          backgroundColor: '#60a5fa',\r\n          border: 'none',\r\n          color: 'white',\r\n          borderRadius: '8px',\r\n          padding: '12px',\r\n          marginBottom: '2px',\r\n          fontWeight: 'bold'\r\n        }}\r\n      >\r\n        <LocationIcon size=\"sm\" theme=\"neutral\" style={{ marginRight: '4px' }} />\r\n        {t('pipelines.steps.layout.findMyLocation')}\r\n      </Button>\r\n\r\n      {/* ŒîŒπŒ±œáœâœÅŒπœÉœÑŒπŒ∫œå \"ŒÆ\" */}\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        margin: '1px 0',\r\n        gap: '2px'\r\n      }}>\r\n        <div style={{\r\n          flex: 1,\r\n          height: '1px',\r\n          backgroundColor: '#dee2e6'\r\n        }} />\r\n        <Text size=\"sm\" color=\"secondary\">{t('pipelines.steps.layout.or')}</Text>\r\n        <div style={{\r\n          flex: 1,\r\n          height: '1px',\r\n          backgroundColor: '#dee2e6'\r\n        }} />\r\n      </div>\r\n\r\n      {/* ŒëŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ Œ§ŒøœÄŒøŒ∏ŒµœÉŒØŒ±œÇ */}\r\n      <div style={{ marginBottom: '2px' }}>\r\n        <Text size=\"base\" weight=\"bold\">\r\n          {t('pipelines.steps.layout.searchLocation')}\r\n        </Text>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%', gap: '2px', position: 'relative' }}>\r\n          <Input\r\n            value={layoutLocation}\r\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n              geocodeActions.setQuery(e.target.value)\r\n            }\r\n            placeholder={t('pipelines.steps.layout.locationPlaceholder')}\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n            className=\"layera-form-input\"\r\n            style={{\r\n              borderRadius: '8px',\r\n              padding: '12px 16px',\r\n              fontSize: '16px',\r\n              width: 'calc(100% - 50px)',\r\n              border: '1px solid #dee2e6'\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"primary\"\r\n            size=\"lg\"\r\n            onClick={handleLayoutLocationSearch}\r\n            disabled={isLoading || !layoutLocation.trim()}\r\n            style={{\r\n              backgroundColor: isLoading ? '#9ca3af' : '#60a5fa',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              padding: '12px 20px',\r\n              fontWeight: 'bold',\r\n              width: '60px',\r\n              position: 'absolute',\r\n              right: 0\r\n            }}\r\n          >\r\n            {isLoading ? '...' : 'Go'}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* ŒëœÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒ± Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑œÇ ŒºŒµ ŒΩŒ≠Œø AddressBreakdownCard */}\r\n        {results.length > 0 && (\r\n          <div style={{ marginTop: '8px' }}>\r\n            <Text size=\"sm\" weight=\"bold\" style={{ marginBottom: '8px' }}>\r\n              {t('pipelines.steps.layout.results', { count: results.length })}\r\n            </Text>\r\n            {results.map((result, index) => (\r\n              <div key={result.id} style={{ marginBottom: '8px' }}>\r\n                <AddressBreakdownCard\r\n                  geocodeResult={result}\r\n                  config={{\r\n                    layout: 'list',\r\n                    enableBoundarySearch: true,\r\n                    onComponentClick: (component) => {\r\n                      console.log('üéØ Address component clicked:', component);\r\n                    }\r\n                  }}\r\n                  onClick={() => {\r\n                    console.log('üéØ LayoutStep: Card clicked, selecting result:', result.displayName);\r\n                    geocodeActions.selectResult(result);\r\n                  }}\r\n                  style={{\r\n                    cursor: 'pointer',\r\n                    border: index === 0 ? '2px solid #3b82f6' : '1px solid #e5e7eb',\r\n                    backgroundColor: index === 0 ? '#f0f9ff' : 'white',\r\n                    borderRadius: '8px',\r\n                    padding: '12px',\r\n                    transition: 'all 0.2s ease',\r\n                    ':hover': {\r\n                      backgroundColor: '#f8fafc',\r\n                      borderColor: '#3b82f6'\r\n                    }\r\n                  }}\r\n                  title={(() => {\r\n                    // ŒîŒ∑ŒºŒπŒøœÖœÅŒ≥ŒØŒ± badge Œ≥ŒπŒ± œÑŒø type œÑŒøœÖ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒøœÇ\r\n                    const getBadgeStyle = (badgeText: string) => {\r\n                      const colors: Record<string, { bg: string; text: string }> = {\r\n                        'ŒüŒîŒüŒ£+': { bg: '#22c55e', text: 'white' }, // œÄœÅŒ¨œÉŒπŒΩŒø Œ≥ŒπŒ± Œ±Œ∫œÅŒπŒ≤ŒÆ Œ¥ŒπŒµœçŒ∏œÖŒΩœÉŒ∑\r\n                        'ŒüŒîŒüŒ£': { bg: '#3b82f6', text: 'white' }, // ŒºœÄŒªŒµ Œ≥ŒπŒ± ŒøŒ¥œå\r\n                        'Œ£Œ•ŒùŒüŒôŒöŒôŒë': { bg: '#f59e0b', text: 'white' }, // œÄŒøœÅœÑŒøŒ∫Œ±ŒªŒØ Œ≥ŒπŒ± œÉœÖŒΩŒøŒπŒ∫ŒØŒ±\r\n                        'ŒßŒ©Œ°ŒôŒü': { bg: '#f59e0b', text: 'white' }, // œÄŒøœÅœÑŒøŒ∫Œ±ŒªŒØ Œ≥ŒπŒ± œáœâœÅŒπœå\r\n                        'Œ†ŒüŒõŒó': { bg: '#8b5cf6', text: 'white' }, // ŒºœâŒ≤ Œ≥ŒπŒ± œÄœåŒªŒ∑\r\n                        'ŒîŒóŒúŒüŒ£': { bg: '#8b5cf6', text: 'white' }, // ŒºœâŒ≤ Œ≥ŒπŒ± Œ¥ŒÆŒºŒø\r\n                        'ŒùŒüŒúŒüŒ£': { bg: '#6b7280', text: 'white' }, // Œ≥Œ∫œÅŒπ Œ≥ŒπŒ± ŒΩŒøŒºœå\r\n                        'Œ†ŒïŒ°ŒôŒ¶ŒïŒ°ŒïŒôŒë': { bg: '#6b7280', text: 'white' }, // Œ≥Œ∫œÅŒπ Œ≥ŒπŒ± œÄŒµœÅŒπœÜŒ≠œÅŒµŒπŒ±\r\n                        'ŒßŒ©Œ°Œë': { bg: '#374151', text: 'white' }, // œÉŒ∫ŒøœçœÅŒø Œ≥Œ∫œÅŒπ Œ≥ŒπŒ± œáœéœÅŒ±\r\n                        'Œ§ŒüŒ†ŒüŒ£': { bg: '#84cc16', text: 'white' } // lime Œ≥ŒπŒ± Œ≥ŒµŒΩŒπŒ∫œå œÑœåœÄŒø\r\n                      };\r\n                      return colors[badgeText] || { bg: '#6b7280', text: 'white' };\r\n                    };\r\n\r\n                    // ŒòŒ± œÖœÄŒøŒªŒøŒ≥ŒØœÉŒøœÖŒºŒµ œÑŒø badgeText œÄœÅœéœÑŒ± Œ≥ŒπŒ± ŒΩŒ± œÄŒ¨œÅŒøœÖŒºŒµ œÑŒø œÉœâœÉœÑœå style\r\n                    const hasStreetAndNumber = result.address.street && result.address.houseNumber;\r\n                    const hasStreetOnly = result.address.street && !result.address.houseNumber;\r\n\r\n                    // ŒöœçœÅŒπŒø œÄŒµœÅŒπŒµœáœåŒºŒµŒΩŒø - ŒµŒºœÜŒ¨ŒΩŒπœÉŒ∑ œÄŒªŒÆœÅŒøœÖœÇ Œ¥ŒπŒµœçŒ∏œÖŒΩœÉŒ∑œÇ œåœÄŒøœÖ œÖœÄŒ¨œÅœáŒµŒπ\r\n                    let content = '';\r\n                    let badgeText = '';\r\n                    let subtitle = '';\r\n\r\n                    if (hasStreetAndNumber) {\r\n                      // Œ†ŒªŒÆœÅŒ∑œÇ Œ¥ŒπŒµœçŒ∏œÖŒΩœÉŒ∑ ŒºŒµ œåŒªŒ± œÑŒ± œÉœÑŒøŒπœáŒµŒØŒ±\r\n                      content = `${result.address.street} ${result.address.houseNumber}`;\r\n                      badgeText = 'ŒüŒîŒüŒ£+';\r\n\r\n                      // Œ†œÅŒøœÉŒ∏ŒÆŒ∫Œ∑ postal code Œ±ŒΩ œÖœÄŒ¨œÅœáŒµŒπ\r\n                      const locationParts = [];\r\n                      if (result.address.postalCode) locationParts.push(result.address.postalCode);\r\n                      if (result.address.suburb || result.address.city) {\r\n                        locationParts.push(result.address.suburb || result.address.city);\r\n                      }\r\n                      if (locationParts.length > 0) {\r\n                        subtitle = locationParts.join(', ');\r\n                      }\r\n                    } else if (hasStreetOnly) {\r\n                      content = result.address.street;\r\n                      badgeText = 'ŒüŒîŒüŒ£';\r\n\r\n                      // Œ†œÅŒøœÉŒ∏ŒÆŒ∫Œ∑ œÄŒµœÅŒπŒøœáŒÆœÇ Œ±ŒΩ œÖœÄŒ¨œÅœáŒµŒπ\r\n                      const locationParts = [];\r\n                      if (result.address.suburb || result.address.city) {\r\n                        locationParts.push(result.address.suburb || result.address.city);\r\n                      }\r\n                      if (result.address.region) locationParts.push(result.address.region);\r\n                      if (locationParts.length > 0) {\r\n                        subtitle = locationParts.join(', ');\r\n                      }\r\n                    } else {\r\n                      // ŒìŒπŒ± ŒºŒ∑-ŒøŒ¥ŒøœçœÇ, œáœÅŒ∑œÉŒπŒºŒøœÄŒøŒØŒ∑œÉŒµ œÑŒ∑ŒΩ œÄŒπŒø œÉœÖŒ≥Œ∫ŒµŒ∫œÅŒπŒºŒ≠ŒΩŒ∑ œÄŒªŒ∑œÅŒøœÜŒøœÅŒØŒ±\r\n                      const address = result.address;\r\n\r\n                      if (address.suburb) {\r\n                        content = address.suburb;\r\n                        badgeText = 'Œ£Œ•ŒùŒüŒôŒöŒôŒë';\r\n                        if (address.city && address.city !== address.suburb) {\r\n                          subtitle = address.city;\r\n                        }\r\n                      } else if (address.village) {\r\n                        content = address.village;\r\n                        badgeText = 'ŒßŒ©Œ°ŒôŒü';\r\n                        if (address.county) subtitle = address.county;\r\n                      } else if (address.town) {\r\n                        content = address.town;\r\n                        badgeText = 'Œ†ŒüŒõŒó';\r\n                        if (address.region) subtitle = address.region;\r\n                      } else if (address.city) {\r\n                        content = address.city;\r\n                        badgeText = 'ŒîŒóŒúŒüŒ£';\r\n                        if (address.region) subtitle = address.region;\r\n                      } else if (address.county) {\r\n                        content = address.county;\r\n                        badgeText = 'ŒùŒüŒúŒüŒ£';\r\n                        if (address.region) subtitle = address.region;\r\n                      } else if (address.region) {\r\n                        content = address.region;\r\n                        badgeText = 'Œ†ŒïŒ°ŒôŒ¶ŒïŒ°ŒïŒôŒë';\r\n                        if (address.country) subtitle = address.country;\r\n                      } else if (address.country) {\r\n                        content = address.country;\r\n                        badgeText = 'ŒßŒ©Œ°Œë';\r\n                      } else {\r\n                        // ŒßœÅŒ∑œÉŒπŒºŒøœÄŒøŒØŒ∑œÉŒµ œÑŒ∑ŒΩ œÄŒπŒø Œ∫Œ±ŒªŒÆ œÄŒªŒ∑œÅŒøœÜŒøœÅŒØŒ± Œ±œÄœå œÑŒø displayName\r\n                        const queryWords = layoutLocation.toLowerCase().split(/[\\s,]+/);\r\n                        const displayParts = result.displayName.split(',').map(p => p.trim());\r\n\r\n                        // ŒíœÅŒµœÇ œÑŒø part œÄŒøœÖ œÑŒ±ŒπœÅŒπŒ¨Œ∂ŒµŒπ Œ∫Œ±ŒªœçœÑŒµœÅŒ± ŒºŒµ œÑŒø query\r\n                        let bestMatch = displayParts[0] || result.displayName;\r\n                        for (const part of displayParts) {\r\n                          for (const word of queryWords) {\r\n                            if (word.length > 2 && part.toLowerCase().includes(word)) {\r\n                              bestMatch = part;\r\n                              break;\r\n                            }\r\n                          }\r\n                        }\r\n\r\n                        content = bestMatch;\r\n                        badgeText = 'Œ§ŒüŒ†ŒüŒ£';\r\n                        // Œ†œÅŒøœÉŒ∏ŒÆŒ∫Œ∑ ŒµœÄŒπœÄŒªŒ≠ŒøŒΩ context\r\n                        if (displayParts.length > 1 && bestMatch !== result.displayName) {\r\n                          subtitle = displayParts.filter(p => p !== bestMatch).slice(0, 2).join(', ');\r\n                        }\r\n                      }\r\n                    }\r\n\r\n                    return (\r\n                      <Flex gap=\"sm\" align=\"center\" style={{ width: '100%' }}>\r\n                        <LocationIcon size=\"sm\" theme={hasStreetAndNumber || hasStreetOnly ? \"primary\" : \"neutral\"} />\r\n                        <div style={{ flex: 1, minWidth: 0 }}>\r\n                          <div style={{\r\n                            fontWeight: hasStreetAndNumber || hasStreetOnly ? 'bold' : 'normal',\r\n                            color: hasStreetAndNumber || hasStreetOnly ? '#1f2937' : '#6b7280',\r\n                            fontSize: hasStreetAndNumber || hasStreetOnly ? '14px' : '13px'\r\n                          }}>\r\n                            {content}\r\n                          </div>\r\n                          {subtitle && (\r\n                            <div style={{\r\n                              fontSize: '11px',\r\n                              color: '#9ca3af',\r\n                              marginTop: '2px'\r\n                            }}>\r\n                              {subtitle}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <div style={{\r\n                          backgroundColor: getBadgeStyle(badgeText).bg,\r\n                          color: getBadgeStyle(badgeText).text,\r\n                          padding: '2px 6px',\r\n                          borderRadius: '4px',\r\n                          fontSize: '9px',\r\n                          fontWeight: 'bold',\r\n                          textTransform: 'uppercase',\r\n                          letterSpacing: '0.5px'\r\n                        }}>\r\n                          {badgeText}\r\n                        </div>\r\n                      </Flex>\r\n                    );\r\n                  })()}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* ŒïœÅŒ≥Œ±ŒªŒµŒØŒ± Œ§ŒøœÄŒøŒ∏Œ≠œÑŒ∑œÉŒ∑œÇ - ŒìŒ±ŒªŒ¨Œ∂ŒπŒø œÄŒªŒ±ŒØœÉŒπŒø */}\r\n      <div\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '2px solid #60a5fa',\r\n          borderRadius: '12px',\r\n          padding: '20px',\r\n          marginBottom: '16px'\r\n        }}\r\n      >\r\n        <Text size=\"base\" weight=\"bold\" color=\"primary\">\r\n          {t('pipelines.steps.layout.placementTools.title')}\r\n        </Text>\r\n\r\n        <Text size=\"sm\" color=\"secondary\">\r\n          {t('pipelines.steps.layout.placementTools.description')}\r\n        </Text>\r\n\r\n        {/* Œ†ŒµœÅŒπœÉœÑœÅŒøœÜŒÆ */}\r\n        <div style={{ marginBottom: '16px' }}>\r\n          <Text size=\"sm\" weight=\"bold\">\r\n            {t('pipelines.steps.layout.placementTools.rotation')}\r\n          </Text>\r\n          <Flex gap=\"md\" align=\"center\" justify=\"center\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setLayoutRotation(-90)}\r\n              style={{\r\n                backgroundColor: '#d0d7de',\r\n                border: '1px solid #8c959f',\r\n                color: '#495057',\r\n                borderRadius: '6px',\r\n                padding: '8px 12px'\r\n              }}\r\n            >\r\n              -90¬∞\r\n            </Button>\r\n            <Text size=\"sm\">\r\n              {layoutRotation}¬∞\r\n            </Text>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setLayoutRotation(90)}\r\n              style={{\r\n                backgroundColor: '#d0d7de',\r\n                border: '1px solid #8c959f',\r\n                color: '#495057',\r\n                borderRadius: '6px',\r\n                padding: '8px 12px'\r\n              }}\r\n            >\r\n              +90¬∞\r\n            </Button>\r\n          </Flex>\r\n        </div>\r\n\r\n        {/* Scale Controls - Œ§œÅŒØŒ± œÄŒµŒ¥ŒØŒ± ŒºŒµ OK buttons */}\r\n        <div style={{\r\n          backgroundColor: '#f8f9fa',\r\n          border: '1px solid #dee2e6',\r\n          borderRadius: '8px',\r\n          padding: '8px',\r\n          margin: '8px 0'\r\n        }}>\r\n          <Text size=\"sm\" weight=\"bold\">\r\n            {t('pipelines.steps.layout.placementTools.scale')}\r\n          </Text>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '4px',\r\n            width: '100%',\r\n            justifyContent: 'space-between'\r\n          }}>\r\n          {/* cm - m */}\r\n          <div style={{ flex: 1, minWidth: 0 }}>\r\n            <Text size=\"sm\" weight=\"bold\">\r\n              {t('pipelines.steps.layout.placementTools.units.cmToM')}\r\n            </Text>\r\n            <div style={{ display: 'flex', gap: '2px', alignItems: 'center' }}>\r\n              <Input\r\n                type=\"number\"\r\n                value={layoutScaleWidth}\r\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                  setLayoutScaleWidth(parseFloat(e.target.value) || 1)\r\n                }\r\n                onFocus={() => handleScaleFieldEdit('width')}\r\n                disabled={activeScaleField !== null && activeScaleField !== 'width'}\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                className=\"layera-form-input\"\r\n                style={{\r\n                  borderRadius: '4px',\r\n                  padding: '4px 6px',\r\n                  backgroundColor: activeScaleField === 'width' ? '#ffffff' : '#f8f9fa',\r\n                  border: '1px solid #dee2e6',\r\n                  flex: 1,\r\n                  fontSize: '10px',\r\n                  minWidth: 0,\r\n                  maxWidth: '50px'\r\n                }}\r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => handleScaleFieldOk('width')}\r\n                disabled={activeScaleField !== 'width'}\r\n                style={{\r\n                  backgroundColor: activeScaleField === 'width' ? '#60a5fa' : '#e9ecef',\r\n                  border: `1px solid ${activeScaleField === 'width' ? '#60a5fa' : '#ced4da'}`,\r\n                  color: activeScaleField === 'width' ? 'white' : '#6c757d',\r\n                  borderRadius: '4px',\r\n                  padding: '6px',\r\n                  fontSize: '10px',\r\n                  minWidth: '24px',\r\n                  maxWidth: '24px',\r\n                  height: '24px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center'\r\n                }}\r\n              >\r\n                OK\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* mm - m */}\r\n          <div style={{ flex: 1, minWidth: 0 }}>\r\n            <Text size=\"sm\" weight=\"bold\">\r\n              {t('pipelines.steps.layout.placementTools.units.mmToM')}\r\n            </Text>\r\n            <div style={{ display: 'flex', gap: '2px', alignItems: 'center' }}>\r\n              <Input\r\n                type=\"number\"\r\n                value={layoutScaleHeight}\r\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                  setLayoutScaleHeight(parseFloat(e.target.value) || 1)\r\n                }\r\n                onFocus={() => handleScaleFieldEdit('height')}\r\n                disabled={activeScaleField !== null && activeScaleField !== 'height'}\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                className=\"layera-form-input\"\r\n                style={{\r\n                  borderRadius: '4px',\r\n                  padding: '4px 6px',\r\n                  backgroundColor: activeScaleField === 'height' ? '#ffffff' : '#f8f9fa',\r\n                  border: '1px solid #dee2e6',\r\n                  flex: 1,\r\n                  fontSize: '10px',\r\n                  minWidth: 0,\r\n                  maxWidth: '50px'\r\n                }}\r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => handleScaleFieldOk('height')}\r\n                disabled={activeScaleField !== 'height'}\r\n                style={{\r\n                  backgroundColor: activeScaleField === 'height' ? '#60a5fa' : '#e9ecef',\r\n                  border: `1px solid ${activeScaleField === 'height' ? '#60a5fa' : '#ced4da'}`,\r\n                  color: activeScaleField === 'height' ? 'white' : '#6c757d',\r\n                  borderRadius: '4px',\r\n                  padding: '6px',\r\n                  fontSize: '10px',\r\n                  minWidth: '24px',\r\n                  maxWidth: '24px',\r\n                  height: '24px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center'\r\n                }}\r\n              >\r\n                OK\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* m - m */}\r\n          <div style={{ flex: 1, minWidth: 0 }}>\r\n            <Text size=\"sm\" weight=\"bold\">\r\n              {t('pipelines.steps.layout.placementTools.units.mToM')}\r\n            </Text>\r\n            <div style={{ display: 'flex', gap: '2px', alignItems: 'center' }}>\r\n              <Input\r\n                type=\"number\"\r\n                value={layoutScaleDepth}\r\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                  setLayoutScaleDepth(parseFloat(e.target.value) || 1)\r\n                }\r\n                onFocus={() => handleScaleFieldEdit('depth')}\r\n                disabled={activeScaleField !== null && activeScaleField !== 'depth'}\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                className=\"layera-form-input\"\r\n                style={{\r\n                  borderRadius: '4px',\r\n                  padding: '4px 6px',\r\n                  backgroundColor: activeScaleField === 'depth' ? '#ffffff' : '#f8f9fa',\r\n                  border: '1px solid #dee2e6',\r\n                  flex: 1,\r\n                  fontSize: '10px',\r\n                  minWidth: 0,\r\n                  maxWidth: '50px'\r\n                }}\r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => handleScaleFieldOk('depth')}\r\n                disabled={activeScaleField !== 'depth'}\r\n                style={{\r\n                  backgroundColor: activeScaleField === 'depth' ? '#60a5fa' : '#e9ecef',\r\n                  border: `1px solid ${activeScaleField === 'depth' ? '#60a5fa' : '#ced4da'}`,\r\n                  color: activeScaleField === 'depth' ? 'white' : '#6c757d',\r\n                  borderRadius: '4px',\r\n                  padding: '6px',\r\n                  fontSize: '10px',\r\n                  minWidth: '24px',\r\n                  maxWidth: '24px',\r\n                  height: '24px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center'\r\n                }}\r\n              >\r\n                OK\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <FormActions>\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={onBack}\r\n          className=\"layera-unified-button\"\r\n          style={{\r\n            backgroundColor: '#f8f9fa',\r\n            border: '1px solid #dee2e6',\r\n            color: '#6c757d'\r\n          }}\r\n        >\r\n          {t('pipelines.steps.layout.actions.back')}\r\n        </Button>\r\n        <Button\r\n          variant=\"primary\"\r\n          onClick={onNext}\r\n          className=\"layera-unified-button\"\r\n          style={{\r\n            backgroundColor: '#10b981',\r\n            color: 'white',\r\n            border: 'none',\r\n            fontWeight: 'bold'\r\n          }}\r\n        >\r\n          {t('pipelines.steps.layout.actions.saveLocation')}\r\n        </Button>\r\n      </FormActions>\r\n    </Stack>\r\n  );\r\n};","/**\r\n * @layera/geocoding - useGeocode Hook\r\n * Enterprise React hook Œ≥ŒπŒ± location search functionality\r\n */\r\n\r\nimport { useState, useCallback, useEffect, useRef } from 'react';\r\nimport type {\r\n  UseGeocodeOptions,\r\n  UseGeocodeReturn,\r\n  GeocodeResult,\r\n  GeocodeRequest\r\n} from '../types';\r\nimport { nominatimProvider } from '../providers/nominatim';\r\n\r\nexport function useGeocode(options: UseGeocodeOptions = {}): UseGeocodeReturn {\r\n  const {\r\n    provider = nominatimProvider,\r\n    debounceMs = 300,\r\n    autoSearch = false,\r\n    onSelect\r\n  } = options;\r\n\r\n  // State\r\n  const [query, setQuery] = useState<string>('');\r\n  const [results, setResults] = useState<GeocodeResult[]>([]);\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [selectedResult, setSelectedResult] = useState<GeocodeResult | null>(null);\r\n  const [currentLanguage, setCurrentLanguage] = useState<string>(() => {\r\n    if (typeof window !== 'undefined') {\r\n      return localStorage.getItem('i18nextLng') || 'el';\r\n    }\r\n    return 'el';\r\n  });\r\n\r\n  // Refs Œ≥ŒπŒ± debouncing Œ∫Œ±Œπ cleanup\r\n  const debounceTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const abortControllerRef = useRef<AbortController | null>(null);\r\n\r\n  // ŒöœçœÅŒπŒ± ŒºŒ≠Œ∏ŒøŒ¥ŒøœÇ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑œÇ\r\n  const search = useCallback(async (searchQuery?: string) => {\r\n    const queryToSearch = searchQuery ?? query;\r\n\r\n    if (!queryToSearch.trim()) {\r\n      setResults([]);\r\n      setError(null);\r\n      return;\r\n    }\r\n\r\n    console.log('üîç useGeocode: Starting search for:', queryToSearch);\r\n\r\n    // Cancel œÄœÅŒøŒ∑Œ≥ŒøœçŒºŒµŒΩŒ∑ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑\r\n    if (abortControllerRef.current) {\r\n      abortControllerRef.current.abort();\r\n    }\r\n\r\n    // ŒîŒ∑ŒºŒπŒøœÖœÅŒ≥ŒØŒ± ŒΩŒ≠ŒøœÖ AbortController\r\n    abortControllerRef.current = new AbortController();\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // ŒëŒΩŒØœáŒΩŒµœÖœÉŒ∑ Œ≥ŒªœéœÉœÉŒ±œÇ Œ±œÄœå browser ŒÆ localStorage\r\n      // Œ£ŒóŒúŒëŒùŒ§ŒôŒöŒü: Œ§Œø i18nextLng ŒºœÄŒøœÅŒµŒØ ŒΩŒ± ŒµŒØŒΩŒ±Œπ 'el' ŒÆ 'en', œåœáŒπ 'el-GR' ŒÆ 'en-US'\r\n      const storedLang = typeof window !== 'undefined' ? localStorage.getItem('i18nextLng') : null;\r\n      const userLanguage = storedLang || (typeof navigator !== 'undefined' ? navigator.language.slice(0, 2) : 'el');\r\n\r\n      console.log('üåê Detected language:', userLanguage, '(stored:', storedLang, ')');\r\n\r\n      const request: GeocodeRequest = {\r\n        query: queryToSearch,\r\n        // ŒëœÜŒ±ŒπœÅŒøœçŒºŒµ œÑŒø countryCode Œ≥ŒπŒ± œÄŒ±Œ≥Œ∫œåœÉŒºŒπŒ± Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑\r\n        limit: 5,\r\n        language: userLanguage.startsWith('el') ? 'el' : 'en' // ŒßœÅŒÆœÉŒ∑ Œ≥ŒªœéœÉœÉŒ±œÇ œáœÅŒÆœÉœÑŒ∑\r\n      };\r\n\r\n      console.log('üì° useGeocode: Making API request with:', request);\r\n\r\n      const response = await provider.search(request);\r\n\r\n      // ŒàŒªŒµŒ≥œáŒøœÇ Œ±ŒΩ Œ∑ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ Œ±Œ∫œÖœÅœéŒ∏Œ∑Œ∫Œµ\r\n      if (abortControllerRef.current?.signal.aborted) {\r\n        console.log('üõë useGeocode: Search aborted');\r\n        return;\r\n      }\r\n\r\n      console.log('‚úÖ useGeocode: Search completed with', response.results.length, 'results');\r\n\r\n      if (response.status === 'error') {\r\n        setError(response.error || 'Œ£œÜŒ¨ŒªŒºŒ± Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑œÇ');\r\n        setResults([]);\r\n      } else {\r\n        setResults(response.results);\r\n        setError(null);\r\n      }\r\n\r\n    } catch (searchError) {\r\n      // ŒëŒ≥ŒΩœåŒ∑œÉŒµ œÉœÜŒ¨ŒªŒºŒ±œÑŒ± Œ±œÄœå cancelled requests\r\n      if (searchError instanceof Error && searchError.name === 'AbortError') {\r\n        console.log('üõë useGeocode: Request cancelled');\r\n        return;\r\n      }\r\n\r\n      console.error('‚ùå useGeocode: Search error:', searchError);\r\n      setError(searchError instanceof Error ? searchError.message : 'ŒÜŒ≥ŒΩœâœÉœÑŒø œÉœÜŒ¨ŒªŒºŒ±');\r\n      setResults([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [query, provider]);\r\n\r\n  // Debounced search Œ≥ŒπŒ± auto-search\r\n  const debouncedSearch = useCallback((searchQuery: string) => {\r\n    if (debounceTimeoutRef.current) {\r\n      clearTimeout(debounceTimeoutRef.current);\r\n    }\r\n\r\n    debounceTimeoutRef.current = setTimeout(() => {\r\n      search(searchQuery);\r\n    }, debounceMs);\r\n  }, [search, debounceMs]);\r\n\r\n  // Auto-search œåœÑŒ±ŒΩ Œ±ŒªŒªŒ¨Œ∂ŒµŒπ œÑŒø query\r\n  useEffect(() => {\r\n    if (autoSearch && query.trim()) {\r\n      debouncedSearch(query);\r\n    }\r\n\r\n    return () => {\r\n      if (debounceTimeoutRef.current) {\r\n        clearTimeout(debounceTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [query, autoSearch, debouncedSearch]);\r\n\r\n  // Listen Œ≥ŒπŒ± Œ±ŒªŒªŒ±Œ≥Œ≠œÇ Œ≥ŒªœéœÉœÉŒ±œÇ Œ∫Œ±Œπ re-search Œ±ŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒ±\r\n  useEffect(() => {\r\n    const handleLanguageChange = () => {\r\n      const newLanguage = localStorage.getItem('i18nextLng') || 'el';\r\n      console.log('üåç Language changed from', currentLanguage, 'to', newLanguage);\r\n\r\n      if (newLanguage !== currentLanguage) {\r\n        setCurrentLanguage(newLanguage);\r\n\r\n        // ŒëŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒ± ŒÆ active query, ŒæŒ±ŒΩŒ±Œ∫Œ¨ŒΩŒµ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑\r\n        if (query.trim() && results.length > 0) {\r\n          console.log('üîÑ Re-searching with new language:', newLanguage);\r\n          search(query);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Listen Œ≥ŒπŒ± storage events (Œ±ŒªŒªŒ±Œ≥Œ≠œÇ Œ±œÄœå Œ¨ŒªŒªŒ± tabs)\r\n    window.addEventListener('storage', handleLanguageChange);\r\n\r\n    // Listen Œ≥ŒπŒ± custom event Œ±œÄœå language switcher\r\n    window.addEventListener('languagechange', handleLanguageChange);\r\n\r\n    // Polling Œ≥ŒπŒ± œÑŒøœÄŒπŒ∫Œ≠œÇ Œ±ŒªŒªŒ±Œ≥Œ≠œÇ (same tab)\r\n    const interval = setInterval(() => {\r\n      const newLang = localStorage.getItem('i18nextLng') || 'el';\r\n      if (newLang !== currentLanguage) {\r\n        handleLanguageChange();\r\n      }\r\n    }, 500);\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', handleLanguageChange);\r\n      window.removeEventListener('languagechange', handleLanguageChange);\r\n      clearInterval(interval);\r\n    };\r\n  }, [currentLanguage, query, results.length, search]);\r\n\r\n  // Cleanup œåœÑŒ±ŒΩ unmount œÑŒø component\r\n  useEffect(() => {\r\n    return () => {\r\n      if (abortControllerRef.current) {\r\n        abortControllerRef.current.abort();\r\n      }\r\n      if (debounceTimeoutRef.current) {\r\n        clearTimeout(debounceTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Action Œ≥ŒπŒ± ŒµœÄŒπŒªŒøŒ≥ŒÆ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒøœÇ\r\n  const selectResult = useCallback((result: GeocodeResult) => {\r\n    console.log('üéØ useGeocode: Selected result:', result.displayName);\r\n    setSelectedResult(result);\r\n\r\n    if (onSelect) {\r\n      onSelect(result);\r\n    }\r\n  }, [onSelect]);\r\n\r\n  // Action Œ≥ŒπŒ± Œ∫Œ±Œ∏Œ±œÅŒπœÉŒºœå\r\n  const clear = useCallback(() => {\r\n    console.log('üßπ useGeocode: Clearing results');\r\n    setQuery('');\r\n    setResults([]);\r\n    setError(null);\r\n    setSelectedResult(null);\r\n    setIsLoading(false);\r\n\r\n    // Cancel œÑœÅŒ≠œáŒøœÖœÉŒ± Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑\r\n    if (abortControllerRef.current) {\r\n      abortControllerRef.current.abort();\r\n    }\r\n\r\n    // Clear debounce\r\n    if (debounceTimeoutRef.current) {\r\n      clearTimeout(debounceTimeoutRef.current);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    query,\r\n    results,\r\n    isLoading,\r\n    error,\r\n    selectedResult,\r\n    actions: {\r\n      setQuery,\r\n      search,\r\n      selectResult,\r\n      clear\r\n    }\r\n  };\r\n}","/**\r\n * @layera/geocoding - Nominatim Provider with Advanced Features\r\n * Full-featured OpenStreetMap geocoding service\r\n */\r\n\r\nimport type {\r\n  GeocodeRequest,\r\n  GeocodeResponse,\r\n  GeocodeResult,\r\n  GeocodeProvider,\r\n  GeocodeCoordinates,\r\n  ReverseGeocodeOptions,\r\n  SuggestOptions\r\n} from '../types';\r\n\r\ninterface NominatimResponse {\r\n  place_id: number;\r\n  licence: string;\r\n  osm_type: string;\r\n  osm_id: number;\r\n  boundingbox: string[];\r\n  lat: string;\r\n  lon: string;\r\n  display_name: string;\r\n  class: string;\r\n  type: string;\r\n  importance: number;\r\n  address?: {\r\n    house_number?: string;\r\n    road?: string;\r\n    suburb?: string;\r\n    city?: string;\r\n    municipality?: string;\r\n    village?: string;\r\n    town?: string;\r\n    county?: string;\r\n    state?: string;\r\n    postcode?: string;\r\n    country?: string;\r\n    country_code?: string;\r\n  };\r\n  geojson?: {\r\n    type: 'Polygon' | 'MultiPolygon';\r\n    coordinates: number[][][] | number[][][][];\r\n  };\r\n  extratags?: Record<string, string>;\r\n  namedetails?: Record<string, string>;\r\n}\r\n\r\nconst NOMINATIM_BASE_URL = 'https://nominatim.openstreetmap.org';\r\nconst NOMINATIM_SEARCH = `${NOMINATIM_BASE_URL}/search`;\r\nconst NOMINATIM_REVERSE = `${NOMINATIM_BASE_URL}/reverse`;\r\n\r\nfunction mapAccuracy(osmClass: string, osmType: string, interpolated?: boolean): GeocodeResult['accuracy'] {\r\n  if (interpolated) return 'interpolated';\r\n  if (osmType === 'house') return 'exact';\r\n  if (osmClass === 'highway' || osmType === 'residential') return 'street';\r\n  if (osmClass === 'place' && (osmType === 'city' || osmType === 'town' || osmType === 'village')) {\r\n    return 'city';\r\n  }\r\n  return 'region';\r\n}\r\n\r\nfunction parseNominatimResult(item: NominatimResponse): GeocodeResult {\r\n  const coordinates: GeocodeCoordinates = {\r\n    latitude: parseFloat(item.lat),\r\n    longitude: parseFloat(item.lon)\r\n  };\r\n\r\n  const address: GeocodeResult['address'] = {};\r\n\r\n  // Œ†ŒªŒÆœÅŒ∑œÇ extraction œåŒªœâŒΩ œÑœâŒΩ address fields\r\n  if (item.address?.road) address.street = item.address.road;\r\n  if (item.address?.house_number) address.houseNumber = item.address.house_number;\r\n  if (item.address?.postcode) address.postalCode = item.address.postcode;\r\n  if (item.address?.suburb) address.suburb = item.address.suburb;\r\n  if (item.address?.village) address.village = item.address.village;\r\n  if (item.address?.town) address.town = item.address.town;\r\n  if (item.address?.county) address.county = item.address.county;\r\n\r\n  // City priority: city -> municipality -> town -> village\r\n  if (item.address?.city) {\r\n    address.city = item.address.city;\r\n  } else if (item.address?.municipality) {\r\n    address.city = item.address.municipality;\r\n  } else if (item.address?.town) {\r\n    address.city = item.address.town;\r\n  } else if (item.address?.village) {\r\n    address.city = item.address.village;\r\n  }\r\n\r\n  if (item.address?.state) address.region = item.address.state;\r\n  if (item.address?.country) address.country = item.address.country;\r\n\r\n  const result: GeocodeResult = {\r\n    id: `nominatim_${item.place_id}`,\r\n    displayName: item.display_name,\r\n    coordinates,\r\n    accuracy: mapAccuracy(item.class, item.type),\r\n    address,\r\n    metadata: {\r\n      source: 'nominatim',\r\n      confidence: Math.min(item.importance || 0.5, 1.0),\r\n      osmType: item.osm_type,\r\n      osmId: item.osm_id,\r\n      class: item.class,\r\n      type: item.type,\r\n      importance: item.importance,\r\n      licence: item.licence\r\n    }\r\n  };\r\n\r\n  // Add polygon geometry if available\r\n  if (item.geojson) {\r\n    result.geometry = item.geojson;\r\n  }\r\n\r\n  // Add bounding box\r\n  if (item.boundingbox && item.boundingbox.length === 4) {\r\n    result.boundingBox = [\r\n      parseFloat(item.boundingbox[0] || '0'),\r\n      parseFloat(item.boundingbox[1] || '0'),\r\n      parseFloat(item.boundingbox[2] || '0'),\r\n      parseFloat(item.boundingbox[3] || '0')\r\n    ];\r\n  }\r\n\r\n  // Add extra tags and name details if available\r\n  if (item.extratags) result.extraTags = item.extratags;\r\n  if (item.namedetails) result.nameDetails = item.namedetails;\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Enhanced search with structured queries support\r\n */\r\nasync function searchNominatim(request: GeocodeRequest): Promise<GeocodeResponse> {\r\n  try {\r\n    const params = new URLSearchParams({\r\n      format: 'json',\r\n      addressdetails: request.addressDetails !== false ? '1' : '0',\r\n      limit: String(request.limit || 5),\r\n      'accept-language': request.language === 'el' ? 'el,en' : 'en'\r\n    });\r\n\r\n    // STRUCTURED SEARCH - ŒùŒ≠Œø feature!\r\n    if (request.structured) {\r\n      // Use structured endpoint for better accuracy\r\n      if (request.structured.street) params.append('street', request.structured.street);\r\n      if (request.structured.city) params.append('city', request.structured.city);\r\n      if (request.structured.postalcode) params.append('postalcode', request.structured.postalcode);\r\n      if (request.structured.state) params.append('state', request.structured.state);\r\n      if (request.structured.country) params.append('country', request.structured.country);\r\n      if (request.structured.amenity) params.append('amenity', request.structured.amenity);\r\n\r\n      console.log('üéØ Using STRUCTURED search:', request.structured);\r\n    } else {\r\n      // Free-form query\r\n      params.append('q', request.query);\r\n    }\r\n\r\n    // Country restriction\r\n    if (request.countryCode) {\r\n      params.append('countrycodes', request.countryCode);\r\n    }\r\n\r\n    // VIEWBOX - Œ†ŒµœÅŒπŒøœÅŒπœÉŒºœåœÇ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑œÇ œÉŒµ œÉœÖŒ≥Œ∫ŒµŒ∫œÅŒπŒºŒ≠ŒΩŒ∑ œÄŒµœÅŒπŒøœáŒÆ\r\n    if (request.viewbox) {\r\n      params.append('viewbox', request.viewbox.join(','));\r\n      if (request.bounded) {\r\n        params.append('bounded', '1');\r\n      }\r\n    }\r\n\r\n    // POLYGON EXTRACTION - Full boundaries!\r\n    if (request.polygonGeoJSON) {\r\n      params.append('polygon_geojson', '1');\r\n    }\r\n\r\n    // EXTRA TAGS - ŒïœÄŒπœÄŒªŒ≠ŒøŒΩ OSM tags\r\n    if (request.extraTags) {\r\n      params.append('extratags', '1');\r\n    }\r\n\r\n    // NAME DETAILS - ŒüŒΩœåŒºŒ±œÑŒ± œÉŒµ œÄŒøŒªŒªŒ≠œÇ Œ≥ŒªœéœÉœÉŒµœÇ\r\n    if (request.nameDetails) {\r\n      params.append('namedetails', '1');\r\n    }\r\n\r\n    // EXCLUDE PLACES - ŒëœÄŒøŒ∫ŒªŒµŒπœÉŒºœåœÇ œÉœÖŒ≥Œ∫ŒµŒ∫œÅŒπŒºŒ≠ŒΩœâŒΩ place IDs\r\n    if (request.excludePlaceIds?.length) {\r\n      params.append('exclude_place_ids', request.excludePlaceIds.join(','));\r\n    }\r\n\r\n    console.log('üîç NominatimProvider: Advanced search with params:', params.toString());\r\n\r\n    const response = await fetch(`${NOMINATIM_SEARCH}?${params.toString()}`, {\r\n      headers: {\r\n        'User-Agent': 'Layera-GeoAlert/1.0 (contact@layera.com)'\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Nominatim API error: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    let data: NominatimResponse[] = await response.json();\r\n\r\n    console.log('üìç NominatimProvider: Found', data.length, 'results');\r\n\r\n    // ADDRESS INTERPOLATION Œ≥ŒπŒ± missing addresses\r\n    if (data.length === 0 && request.query.includes(',')) {\r\n      console.log('üîÑ No exact match. Attempting interpolation and broader search...');\r\n\r\n      // Create user requested result with interpolation\r\n      const userRequestedResult: NominatimResponse = {\r\n        place_id: -1,\r\n        licence: 'User Input',\r\n        osm_id: -1,\r\n        osm_type: 'interpolated',\r\n        lat: '0',\r\n        lon: '0',\r\n        class: 'place',\r\n        type: 'address',\r\n        display_name: `‚ùì ŒëŒΩŒ±Œ∂Œ∑œÑŒÆœÉŒ±œÑŒµ: \"${request.query}\" (interpolated)`,\r\n        address: {\r\n          road: request.query.split(',')[0]?.trim() || '',\r\n          city: request.query.split(',')[request.query.split(',').length - 2]?.trim() || '',\r\n          country: request.query.split(',')[request.query.split(',').length - 1]?.trim() || ''\r\n        },\r\n        importance: 0,\r\n        boundingbox: []\r\n      };\r\n\r\n      data.push(userRequestedResult);\r\n\r\n      // Try broader search with fewer terms\r\n      const parts = request.query.split(',');\r\n      if (parts.length > 1) {\r\n        const broaderQuery = parts.slice(-2).join(',').trim();\r\n        const broaderParams = new URLSearchParams({\r\n          q: broaderQuery,\r\n          format: 'json',\r\n          addressdetails: '1',\r\n          limit: String((request.limit || 5) - 1),\r\n          'accept-language': request.language === 'el' ? 'el,en' : 'en'\r\n        });\r\n\r\n        if (request.polygonGeoJSON) {\r\n          broaderParams.append('polygon_geojson', '1');\r\n        }\r\n\r\n        const broaderResponse = await fetch(`${NOMINATIM_SEARCH}?${broaderParams.toString()}`, {\r\n          headers: {\r\n            'User-Agent': 'Layera-GeoAlert/1.0 (contact@layera.com)'\r\n          }\r\n        });\r\n\r\n        if (broaderResponse.ok) {\r\n          const broaderData: NominatimResponse[] = await broaderResponse.json();\r\n          if (broaderData.length > 0) {\r\n            console.log('‚úÖ Found alternative results via interpolation');\r\n            const alternativeResults = broaderData.map((item, index) => ({\r\n              ...item,\r\n              display_name: `üí° ŒïŒΩŒ±ŒªŒªŒ±Œ∫œÑŒπŒ∫Œ¨ ${index + 1}: ${item.display_name}`\r\n            }));\r\n            data.push(...alternativeResults);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const results = data.map(parseNominatimResult);\r\n\r\n    // Œ§Œ±ŒæŒπŒΩœåŒºŒ∑œÉŒ∑ Œ±œÄŒøœÑŒµŒªŒµœÉŒºŒ¨œÑœâŒΩ ŒºŒµ œÄœÅŒøœÑŒµœÅŒ±ŒπœåœÑŒ∑œÑŒ± œÉœÑŒπœÇ ŒøŒ¥ŒøœçœÇ Œ∫Œ±Œπ Œ¥ŒπŒøŒπŒ∫Œ∑œÑŒπŒ∫ŒÆ ŒπŒµœÅŒ±œÅœáŒØŒ±\r\n    const sortedResults = results.sort((a, b) => {\r\n      // 1. Œ†œÅŒøœÑŒµœÅŒ±ŒπœåœÑŒ∑œÑŒ± œÉŒµ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒ± ŒºŒµ ŒøŒ¥œå Œ∫Œ±Œπ Œ±œÅŒπŒ∏Œºœå\r\n      const aHasStreetAndNumber = a.address.street && a.address.houseNumber;\r\n      const bHasStreetAndNumber = b.address.street && b.address.houseNumber;\r\n\r\n      if (aHasStreetAndNumber && !bHasStreetAndNumber) return -1;\r\n      if (!aHasStreetAndNumber && bHasStreetAndNumber) return 1;\r\n\r\n      // 2. Œ†œÅŒøœÑŒµœÅŒ±ŒπœåœÑŒ∑œÑŒ± œÉŒµ Œ±œÄŒøœÑŒµŒªŒ≠œÉŒºŒ±œÑŒ± ŒºŒµ ŒøŒ¥œå (œáœâœÅŒØœÇ Œ±œÅŒπŒ∏Œºœå)\r\n      const aHasStreet = a.address.street && !a.address.houseNumber;\r\n      const bHasStreet = b.address.street && !b.address.houseNumber;\r\n\r\n      if (aHasStreet && !bHasStreet) return -1;\r\n      if (!aHasStreet && bHasStreet) return 1;\r\n\r\n      // 3. ŒîŒπŒøŒπŒ∫Œ∑œÑŒπŒ∫ŒÆ ŒπŒµœÅŒ±œÅœáŒØŒ± ŒïŒªŒªŒ¨Œ¥Œ±œÇ (Œ±œÄœå ŒºŒπŒ∫œÅœåœÑŒµœÅŒ∑ œÄœÅŒøœÇ ŒºŒµŒ≥Œ±ŒªœçœÑŒµœÅŒ∑)\r\n      const getAdministrativeLevel = (result: GeocodeResult): number => {\r\n        const address = result.address;\r\n\r\n        // ŒúŒπŒ∫œÅœåœÑŒµœÅŒµœÇ ŒµŒΩœåœÑŒ∑œÑŒµœÇ œÄœÅŒøœÇ ŒºŒµŒ≥Œ±ŒªœçœÑŒµœÅŒµœÇ\r\n        if (address.street) return 1; // ŒüŒ¥œåœÇ\r\n        if (address.suburb || address.village) return 2; // Œ£œÖŒΩŒøŒπŒ∫ŒØŒ±/ŒßœâœÅŒπœå\r\n        if (address.town) return 3; // ŒöœâŒºœåœÄŒøŒªŒ∑/Œ†œåŒªŒ∑\r\n        if (address.city) return 4; // Œ†œåŒªŒ∑/ŒîŒÆŒºŒøœÇ\r\n        if (address.county) return 5; // ŒùŒøŒºœåœÇ\r\n        if (address.region) return 6; // Œ†ŒµœÅŒπœÜŒ≠œÅŒµŒπŒ±\r\n        if (address.country) return 7; // ŒßœéœÅŒ±\r\n\r\n        return 8; // ŒÜŒ≥ŒΩœâœÉœÑŒø\r\n      };\r\n\r\n      const aLevel = getAdministrativeLevel(a);\r\n      const bLevel = getAdministrativeLevel(b);\r\n\r\n      if (aLevel !== bLevel) return aLevel - bLevel;\r\n\r\n      // 4. Similarity ŒºŒµ œÑŒø original query (œÄœÅœéœÑŒ∑ œÄœÅŒøœÉŒ≠Œ≥Œ≥ŒπœÉŒ∑)\r\n      const queryLower = request.query.toLowerCase();\r\n      const aDisplayLower = a.displayName.toLowerCase();\r\n      const bDisplayLower = b.displayName.toLowerCase();\r\n\r\n      const aStartsWithQuery = aDisplayLower.startsWith(queryLower);\r\n      const bStartsWithQuery = bDisplayLower.startsWith(queryLower);\r\n\r\n      if (aStartsWithQuery && !bStartsWithQuery) return -1;\r\n      if (!aStartsWithQuery && bStartsWithQuery) return 1;\r\n\r\n      const aIncludesQuery = aDisplayLower.includes(queryLower);\r\n      const bIncludesQuery = bDisplayLower.includes(queryLower);\r\n\r\n      if (aIncludesQuery && !bIncludesQuery) return -1;\r\n      if (!aIncludesQuery && bIncludesQuery) return 1;\r\n\r\n      // 5. ŒíŒ±œÉŒπŒ∫Œ¨ accuracy levels\r\n      const accuracyOrder: Record<string, number> = {\r\n        'exact': 1,\r\n        'interpolated': 2,\r\n        'street': 3,\r\n        'city': 4,\r\n        'region': 5\r\n      };\r\n\r\n      const aAccuracy = accuracyOrder[a.accuracy] || 6;\r\n      const bAccuracy = accuracyOrder[b.accuracy] || 6;\r\n\r\n      if (aAccuracy !== bAccuracy) return aAccuracy - bAccuracy;\r\n\r\n      // 6. Œ§ŒµŒªŒπŒ∫Œ¨ ŒºŒµ confidence score\r\n      const aConfidence = a.metadata?.confidence || 0;\r\n      const bConfidence = b.metadata?.confidence || 0;\r\n\r\n      return bConfidence - aConfidence;\r\n    });\r\n\r\n    console.log('üìç NominatimProvider: Results sorted with street priority');\r\n\r\n    return {\r\n      results: sortedResults,\r\n      total: sortedResults.length,\r\n      query: request.query,\r\n      status: sortedResults.length > 0 ? 'success' : 'no_results'\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('‚ùå NominatimProvider: Search error:', error);\r\n\r\n    return {\r\n      results: [],\r\n      total: 0,\r\n      query: request.query,\r\n      status: 'error',\r\n      error: error instanceof Error ? error.message : 'ŒÜŒ≥ŒΩœâœÉœÑŒø œÉœÜŒ¨ŒªŒºŒ± Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑œÇ'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * REVERSE GEOCODING - ŒëœÄœå œÉœÖŒΩœÑŒµœÑŒ±Œ≥ŒºŒ≠ŒΩŒµœÇ œÉŒµ Œ¥ŒπŒµœçŒ∏œÖŒΩœÉŒ∑\r\n */\r\nasync function reverseGeocode(\r\n  coordinates: GeocodeCoordinates,\r\n  options?: ReverseGeocodeOptions\r\n): Promise<GeocodeResult | null> {\r\n  try {\r\n    const params = new URLSearchParams({\r\n      format: 'json',\r\n      lat: String(coordinates.latitude),\r\n      lon: String(coordinates.longitude),\r\n      zoom: String(options?.zoom || 18),\r\n      addressdetails: options?.addressDetails !== false ? '1' : '0',\r\n      'accept-language': options?.language === 'en' ? 'en' : 'el,en'\r\n    });\r\n\r\n    console.log(`üìç Reverse geocoding for: ${coordinates.latitude}, ${coordinates.longitude}`);\r\n\r\n    const response = await fetch(`${NOMINATIM_REVERSE}?${params.toString()}`, {\r\n      headers: {\r\n        'User-Agent': 'Layera-GeoAlert/1.0 (contact@layera.com)'\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Reverse geocoding failed: ${response.status}`);\r\n    }\r\n\r\n    const data: NominatimResponse = await response.json();\r\n\r\n    if (!data || !data.place_id) {\r\n      return null;\r\n    }\r\n\r\n    return parseNominatimResult(data);\r\n  } catch (error) {\r\n    console.error('‚ùå Reverse geocoding error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * BATCH GEOCODING - Œ†ŒøŒªŒªŒ±œÄŒªŒ≠œÇ Œ¥ŒπŒµœÖŒ∏œçŒΩœÉŒµŒπœÇ œÑŒ±œÖœÑœåœáœÅŒøŒΩŒ±\r\n */\r\nasync function batchGeocode(requests: GeocodeRequest[]): Promise<GeocodeResponse[]> {\r\n  console.log(`üöÄ Batch geocoding ${requests.length} addresses...`);\r\n\r\n  // Process in parallel with rate limiting (max 5 concurrent)\r\n  const batchSize = 5;\r\n  const results: GeocodeResponse[] = [];\r\n\r\n  for (let i = 0; i < requests.length; i += batchSize) {\r\n    const batch = requests.slice(i, i + batchSize);\r\n    const batchPromises = batch.map(req => searchNominatim(req));\r\n\r\n    try {\r\n      const batchResults = await Promise.all(batchPromises);\r\n      results.push(...batchResults);\r\n\r\n      // Rate limiting: wait 1 second between batches\r\n      if (i + batchSize < requests.length) {\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n      }\r\n    } catch (error) {\r\n      console.error(`‚ùå Batch ${i / batchSize + 1} failed:`, error);\r\n      // Add empty results for failed batch\r\n      batch.forEach(() => results.push({\r\n        results: [],\r\n        total: 0,\r\n        query: '',\r\n        status: 'error',\r\n        error: 'Batch processing failed'\r\n      }));\r\n    }\r\n  }\r\n\r\n  console.log(`‚úÖ Batch geocoding completed: ${results.length} results`);\r\n  return results;\r\n}\r\n\r\n/**\r\n * ADDRESS INTERPOLATION - ŒïŒ∫œÑŒØŒºŒ∑œÉŒ∑ Œ¥ŒπŒµœÖŒ∏œçŒΩœÉŒµœâŒΩ œÄŒøœÖ ŒªŒµŒØœÄŒøœÖŒΩ\r\n */\r\nasync function interpolateAddress(\r\n  street: string,\r\n  houseNumber: string\r\n): Promise<GeocodeResult | null> {\r\n  console.log(`üî¢ Interpolating address: ${street} ${houseNumber}`);\r\n\r\n  // First, find the street\r\n  const streetSearch: GeocodeRequest = {\r\n    query: street,\r\n    limit: 1,\r\n    polygonGeoJSON: true,\r\n    addressDetails: true\r\n  };\r\n\r\n  const streetResult = await searchNominatim(streetSearch);\r\n\r\n  if (streetResult.results.length === 0) {\r\n    console.log('‚ùå Street not found for interpolation');\r\n    return null;\r\n  }\r\n\r\n  const streetData = streetResult.results[0];\r\n  if (!streetData) {\r\n    console.log('‚ùå No street data for interpolation');\r\n    return null;\r\n  }\r\n\r\n  // Create interpolated result\r\n  const interpolated: GeocodeResult = {\r\n    ...streetData,\r\n    id: `nominatim_interpolated_${Date.now()}`,\r\n    displayName: `${street} ${houseNumber} (estimated)`,\r\n    accuracy: 'interpolated',\r\n    address: {\r\n      ...streetData.address,\r\n      street,\r\n      houseNumber\r\n    },\r\n    metadata: {\r\n      ...streetData.metadata,\r\n      confidence: 0.7, // Lower confidence for interpolated\r\n      type: 'interpolated'\r\n    }\r\n  };\r\n\r\n  console.log('‚úÖ Address interpolated successfully');\r\n  return interpolated;\r\n}\r\n\r\n/**\r\n * AUTOCOMPLETE SUGGESTIONS - Œ†œÅŒøœÑŒ¨œÉŒµŒπœÇ Œ∫Œ±œÑŒ¨ œÑŒ∑ŒΩ œÄŒªŒ∑Œ∫œÑœÅŒøŒªœåŒ≥Œ∑œÉŒ∑\r\n */\r\nasync function getSuggestions(\r\n  partial: string,\r\n  options?: SuggestOptions\r\n): Promise<string[]> {\r\n  const searchRequest: GeocodeRequest = {\r\n    query: partial,\r\n    limit: options?.limit || 5\r\n  };\r\n\r\n  if (options?.countryCode) {\r\n    searchRequest.countryCode = options.countryCode;\r\n  }\r\n\r\n  if (options?.focus) {\r\n    // Use viewbox centered on focus point\r\n    const offset = 0.1; // ~10km radius\r\n    searchRequest.viewbox = [\r\n      options.focus.longitude - offset,\r\n      options.focus.latitude - offset,\r\n      options.focus.longitude + offset,\r\n      options.focus.latitude + offset\r\n    ];\r\n  }\r\n\r\n  const response = await searchNominatim(searchRequest);\r\n\r\n  // Return display names as suggestions\r\n  return response.results.map(r => r.displayName);\r\n}\r\n\r\n/**\r\n * Enhanced Nominatim Provider with all advanced features\r\n */\r\nexport const nominatimProvider: GeocodeProvider = {\r\n  name: 'nominatim',\r\n  search: searchNominatim,\r\n  reverse: reverseGeocode,\r\n  batch: batchGeocode,\r\n  interpolate: interpolateAddress,\r\n  suggest: getSuggestions,\r\n  isAvailable: () => typeof fetch !== 'undefined'\r\n};","/**\r\n * AddressBreakdownCard - Interactive address display ŒºŒµ clickable boundary search\r\n *\r\n * ŒßœÅŒ∑œÉŒπŒºŒøœÄŒøŒπŒµŒØ LEGO systems:\r\n * - @layera/cards Œ≥ŒπŒ± BaseCard\r\n * - @layera/buttons Œ≥ŒπŒ± clickable components\r\n * - @layera/icons Œ≥ŒπŒ± location/boundary icons\r\n * - @layera/tolgee Œ≥ŒπŒ± internationalization\r\n * - @layera/geo-drawing Œ≥ŒπŒ± boundary visualization\r\n */\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Button } from '@layera/buttons';\r\nimport { LocationIcon, MapIcon } from '@layera/icons';\r\nimport { Spinner } from '@layera/loading';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n// Fixed import - œáœÅŒ∑œÉŒπŒºŒøœÄŒøŒπŒøœçŒºŒµ œÑŒø ŒΩŒ≠Œø working osmService Œ±œÄœå geo-mapping\r\nimport { fetchBoundaryByAddressComponent } from '../../../geo-mapping/src/services/osmService';\r\n\r\nimport type {\r\n  AddressBreakdownCardProps,\r\n  AddressComponent,\r\n  BoundaryVisualizationEvent\r\n} from '../types';\r\nimport { parseFullAddress } from '../utils/addressParser';\r\n\r\n/**\r\n * AddressBreakdownCard Component\r\n *\r\n * ŒúŒµœÑŒ±œÑœÅŒ≠œÄŒµŒπ œÑŒø displayName Œ±œÄœå geocoding œÉŒµ structured, clickable ŒªŒØœÉœÑŒ±\r\n * ŒåœÑŒ±ŒΩ Œ∫Œ¨ŒΩŒµŒπœÇ Œ∫ŒªŒπŒ∫ œÉŒµ administrative area ‚Üí Œ¥ŒµŒØœáŒΩŒµŒπ œÑŒø boundary œÉœÑŒø œáŒ¨œÅœÑŒ∑\r\n */\r\nexport function AddressBreakdownCard({\r\n  geocodeResult,\r\n  config = {},\r\n  title,\r\n  isLoading = false,\r\n  error = null\r\n}: AddressBreakdownCardProps) {\r\n  const { t } = useLayeraTranslation();\r\n  const [boundaryLoading, setBoundaryLoading] = useState<string | null>(null);\r\n  const [boundaryError, setBoundaryError] = useState<string | null>(null);\r\n  const [loadingTimer, setLoadingTimer] = useState<number>(0);\r\n\r\n  // Timer effect Œ≥ŒπŒ± loading countdown\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n\r\n    if (boundaryLoading) {\r\n      setLoadingTimer(0);\r\n      interval = setInterval(() => {\r\n        setLoadingTimer(prev => prev + 1);\r\n      }, 1000);\r\n    } else {\r\n      setLoadingTimer(0);\r\n    }\r\n\r\n    return () => {\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    };\r\n  }, [boundaryLoading]);\r\n\r\n  // Default configuration\r\n  const finalConfig = {\r\n    layout: 'list' as const,\r\n    enableBoundarySearch: true,\r\n    maxComponents: 10,\r\n    ...config\r\n  };\r\n\r\n  // Parse œÑŒø geocode result œÉŒµ components\r\n  const components = parseFullAddress(geocodeResult);\r\n  const visibleComponents = finalConfig.maxComponents\r\n    ? components.slice(0, finalConfig.maxComponents)\r\n    : components;\r\n\r\n  /**\r\n   * Handle Œ∫ŒªŒπŒ∫ œÉŒµ address component\r\n   * ŒëŒΩ ŒµŒØŒΩŒ±Œπ clickable ‚Üí fetch boundary Œ∫Œ±Œπ dispatch event Œ≥ŒπŒ± œÑŒø œáŒ¨œÅœÑŒ∑\r\n   */\r\n  const handleComponentClick = useCallback(async (component: AddressComponent) => {\r\n    if (!component.clickable || !finalConfig.enableBoundarySearch) {\r\n      return;\r\n    }\r\n\r\n    if (finalConfig.onComponentClick) {\r\n      finalConfig.onComponentClick(component);\r\n    }\r\n\r\n    console.log(`üîÑ Starting boundary search for: ${component.label}, ID: ${component.id}`);\r\n    setBoundaryLoading(component.id);\r\n    setBoundaryError(null);\r\n\r\n    try {\r\n      // ŒöŒ¨ŒΩœâ fetch œÑŒøœÖ boundary Œ±œÄœå œÑŒø OSM API\r\n      console.log(`üîç Fetching boundary for: ${component.label}`);\r\n      const boundaryData = await fetchBoundaryByAddressComponent({\r\n        label: component.label,\r\n        type: component.type\r\n      });\r\n\r\n      if (boundaryData && boundaryData.features && boundaryData.features.length > 0) {\r\n        console.log(`‚úÖ Found boundary with ${boundaryData.features.length} features`);\r\n\r\n        // Dispatch event ŒºŒµ œÑŒ± actual boundary data\r\n        const event = new CustomEvent('showAdministrativeBoundary', {\r\n          detail: {\r\n            type: 'showBoundary',\r\n            component,\r\n            geocodeResult,\r\n            boundary: boundaryData\r\n          } as BoundaryVisualizationEvent & { boundary: any }\r\n        });\r\n        window.dispatchEvent(event);\r\n\r\n        console.log(`üéØ Boundary search completed for: ${component.label}`);\r\n      } else {\r\n        console.warn(`‚ö†Ô∏è No boundary data found for: ${component.label}`);\r\n        setBoundaryError(`ŒîŒµŒΩ Œ≤œÅŒ≠Œ∏Œ∑Œ∫Œ±ŒΩ œåœÅŒπŒ± Œ≥ŒπŒ± ${component.label}`);\r\n      }\r\n    } catch (error) {\r\n      setBoundaryError(`Failed to search boundary for ${component.label}`);\r\n      console.error('Boundary search error:', error);\r\n    } finally {\r\n      console.log(`üèÅ Boundary search completed for: ${component.label}, clearing loading state`);\r\n      setBoundaryLoading(null);\r\n    }\r\n  }, [finalConfig, geocodeResult, t]);\r\n\r\n  /**\r\n   * Render component based on layout\r\n   */\r\n  const renderComponent = (component: AddressComponent) => {\r\n    const isLoading = boundaryLoading === component.id;\r\n    const isClickable = component.clickable && finalConfig.enableBoundarySearch;\r\n\r\n\r\n    const componentProps = {\r\n      className: `address-component ${component.className || ''} ${isClickable ? 'clickable' : ''}`,\r\n      onClick: isClickable ? () => handleComponentClick(component) : undefined,\r\n      disabled: isLoading || !!boundaryLoading,\r\n      style: {\r\n        cursor: isClickable ? 'pointer' : 'default',\r\n        opacity: isLoading ? 0.6 : 1\r\n      }\r\n    };\r\n\r\n    if (finalConfig.layout === 'tags') {\r\n      return (\r\n        <Button\r\n          key={component.id}\r\n          {...componentProps}\r\n          variant={isClickable ? 'outline' : 'ghost'}\r\n          size=\"sm\"\r\n          startIcon={isClickable ? <MapIcon /> : <LocationIcon />}\r\n          loading={isLoading}\r\n        >\r\n          {component.label}\r\n          {isLoading && (\r\n            <span style={{\r\n              marginLeft: '0.5rem',\r\n              fontSize: '0.75rem',\r\n              color: '#6B7280'\r\n            }}>\r\n              ({loadingTimer}s)\r\n            </span>\r\n          )}\r\n        </Button>\r\n      );\r\n    }\r\n\r\n    // List layout\r\n    return (\r\n      <div\r\n        key={component.id}\r\n        {...componentProps}\r\n        className={`list-item ${componentProps.className}`}\r\n        style={{\r\n          ...componentProps.style,\r\n          padding: '0.75rem',\r\n          borderRadius: '0.375rem',\r\n          marginBottom: '0.5rem',\r\n          border: '1px solid #E5E7EB',\r\n          transition: 'all 0.2s ease-in-out',\r\n          backgroundColor: isClickable ? '#FFFFFF' : '#F9FAFB',\r\n          ...(isClickable && {\r\n            ':hover': {\r\n              backgroundColor: '#F3F4F6',\r\n              borderColor: '#D1D5DB',\r\n              transform: 'translateY(-1px)',\r\n              boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)'\r\n            }\r\n          })\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          if (isClickable && !isLoading) {\r\n            e.currentTarget.style.backgroundColor = '#F3F4F6';\r\n            e.currentTarget.style.borderColor = '#D1D5DB';\r\n            e.currentTarget.style.transform = 'translateY(-1px)';\r\n            e.currentTarget.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';\r\n          }\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          if (isClickable && !isLoading) {\r\n            e.currentTarget.style.backgroundColor = '#FFFFFF';\r\n            e.currentTarget.style.borderColor = '#E5E7EB';\r\n            e.currentTarget.style.transform = 'translateY(0)';\r\n            e.currentTarget.style.boxShadow = 'none';\r\n          }\r\n        }}\r\n      >\r\n        <div className=\"list-item-content\" style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          {isLoading ? (\r\n            <Spinner size=\"sm\" variant=\"default\" />\r\n          ) : isClickable ? (\r\n            <MapIcon className=\"list-icon\" style={{\r\n              width: '1rem',\r\n              height: '1rem',\r\n              color: '#3B82F6'\r\n            }} />\r\n          ) : (\r\n            <LocationIcon className=\"list-icon\" style={{\r\n              width: '1rem',\r\n              height: '1rem',\r\n              color: '#6B7280'\r\n            }} />\r\n          )}\r\n          <span className=\"list-label\" style={{\r\n            flex: 1,\r\n            fontSize: '0.875rem',\r\n            color: isClickable ? '#1F2937' : '#6B7280',\r\n            fontWeight: isClickable ? '500' : '400'\r\n          }}>\r\n            {component.label}\r\n          </span>\r\n        </div>\r\n        {isLoading && (\r\n          <div className=\"loading-indicator\" style={{\r\n            marginTop: '0.25rem',\r\n            fontSize: '0.75rem',\r\n            color: '#6B7280',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}>\r\n            <span>ŒëŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ œÄŒµœÅŒπŒ≥œÅŒ¨ŒºŒºŒ±œÑŒøœÇ...</span>\r\n            <span style={{\r\n              fontWeight: '500',\r\n              color: '#3B82F6',\r\n              minWidth: '2rem'\r\n            }}>\r\n              {loadingTimer}s\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Card actions\r\n  const cardActions = (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"sm\"\r\n      onClick={() => {\r\n        const event = new CustomEvent('showSearchResult', {\r\n          detail: {\r\n            latitude: geocodeResult.coordinates.latitude,\r\n            longitude: geocodeResult.coordinates.longitude,\r\n            zoom: 16,\r\n            displayName: geocodeResult.displayName\r\n          }\r\n        });\r\n        window.dispatchEvent(event);\r\n      }}\r\n    >\r\n      {t('showOnMap')}\r\n    </Button>\r\n  );\r\n\r\n  return (\r\n    <BaseCard\r\n      title={title || t('addressDetails')}\r\n      actions={cardActions}\r\n      className={`address-breakdown-card ${finalConfig.className || ''}`}\r\n    >\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {boundaryError && (\r\n        <div className=\"boundary-error\">\r\n          {boundaryError}\r\n        </div>\r\n      )}\r\n\r\n      {/* Instruction text ŒºŒØŒ± œÜŒøœÅŒ¨ œÉœÑŒ∑ŒΩ Œ∫ŒøœÅœÖœÜŒÆ */}\r\n      {!isLoading && visibleComponents.some(c => c.clickable) && finalConfig.enableBoundarySearch && (\r\n        <div style={{\r\n          fontSize: '0.875rem',\r\n          color: '#6B7280',\r\n          marginBottom: '0.75rem',\r\n          fontStyle: 'italic'\r\n        }}>\r\n          {t('clickToShowBoundary')}\r\n        </div>\r\n      )}\r\n\r\n      <div className={`address-components layout-${finalConfig.layout}`}>\r\n        {isLoading ? (\r\n          <div className=\"loading-state\">\r\n            Loading...\r\n          </div>\r\n        ) : (\r\n          visibleComponents.map(renderComponent)\r\n        )}\r\n      </div>\r\n\r\n      {components.length > visibleComponents.length && (\r\n        <div className=\"components-overflow\">\r\n          +{components.length - visibleComponents.length} more components\r\n        </div>\r\n      )}\r\n    </BaseCard>\r\n  );\r\n}","import { OSMAdminCollection } from '../types';\r\n\r\n/**\r\n * Fetch administrative boundary for address component using Enterprise BoundaryService\r\n * @param addressComponent - Component ŒºŒµ label Œ∫Œ±Œπ type\r\n * @returns OSM-style admin boundary collection\r\n */\r\nexport const fetchBoundaryByAddressComponent = async (\r\n  addressComponent: { label: string; type: string }\r\n): Promise<OSMAdminCollection> => {\r\n  try {\r\n    console.log(`üåç Fetching boundary Œ≥ŒπŒ±: ${addressComponent.label}`);\r\n\r\n    // ŒßœÅŒ∑œÉŒπŒºŒøœÄŒøŒπŒøœçŒºŒµ Nominatim Œ≥ŒπŒ± ŒΩŒ± œÄŒ¨œÅŒøœÖŒºŒµ œÑŒø Œ†ŒõŒóŒ°ŒïŒ£ POLYGON\r\n    const searchUrl = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(addressComponent.label)}&format=json&limit=1&polygon_geojson=1`;\r\n\r\n    const searchResponse = await fetch(searchUrl, {\r\n      headers: {\r\n        'User-Agent': 'Layera-GeoAlert/1.0'\r\n      }\r\n    });\r\n\r\n    if (!searchResponse.ok) {\r\n      throw new Error(`Nominatim error: ${searchResponse.status}`);\r\n    }\r\n\r\n    const searchData = await searchResponse.json();\r\n\r\n    if (searchData && searchData.length > 0) {\r\n      const result = searchData[0];\r\n\r\n      // Œ†œÅŒøœÑŒØŒºŒ∑œÉŒ∑: ŒßœÅŒÆœÉŒ∑ œÑŒøœÖ œÄœÅŒ±Œ≥ŒºŒ±œÑŒπŒ∫Œøœç polygon Œ±ŒΩ œÖœÄŒ¨œÅœáŒµŒπ\r\n      if (result.geojson) {\r\n        console.log(`‚úÖ Found FULL POLYGON Œ≥ŒπŒ± ${addressComponent.label} ŒºŒµ ${result.geojson.coordinates?.[0]?.length || 0} œÉŒ∑ŒºŒµŒØŒ±`);\r\n\r\n        return {\r\n          type: 'FeatureCollection',\r\n          features: [{\r\n            type: 'Feature',\r\n            properties: {\r\n              name: result.display_name || addressComponent.label,\r\n              admin_level: '8',\r\n              boundary: 'administrative',\r\n              osm_id: result.osm_id || 0,\r\n              osm_type: result.osm_type || 'node'\r\n            },\r\n            geometry: result.geojson\r\n          }]\r\n        };\r\n      }\r\n      // Fallback: ŒßœÅŒÆœÉŒ∑ bounding box Œ±ŒΩ Œ¥ŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ polygon\r\n      else if (result.boundingbox) {\r\n        const bbox = result.boundingbox;\r\n\r\n        // boundingbox format: [south, north, west, east]\r\n        const south = parseFloat(bbox[0]);\r\n        const north = parseFloat(bbox[1]);\r\n        const west = parseFloat(bbox[2]);\r\n        const east = parseFloat(bbox[3]);\r\n\r\n        console.log(`‚ö†Ô∏è Using bounding box Œ≥ŒπŒ± ${addressComponent.label} (no polygon available)`);\r\n\r\n        return {\r\n          type: 'FeatureCollection',\r\n          features: [{\r\n            type: 'Feature',\r\n            properties: {\r\n              name: result.display_name || addressComponent.label,\r\n              admin_level: '8',\r\n              boundary: 'administrative',\r\n              osm_id: result.osm_id || 0,\r\n              osm_type: result.osm_type || 'node'\r\n            },\r\n            geometry: {\r\n              type: 'Polygon',\r\n              coordinates: [[\r\n                [west, north],\r\n                [east, north],\r\n                [east, south],\r\n                [west, south],\r\n                [west, north]\r\n              ]]\r\n            }\r\n          }]\r\n        };\r\n      }\r\n    }\r\n\r\n    // Default Overpass query Œ≥ŒπŒ± Œ¨ŒªŒªŒµœÇ œÑŒøœÄŒøŒ∏ŒµœÉŒØŒµœÇ\r\n    const query = `\r\n      [out:json][timeout:10];\r\n      (\r\n        relation[\"boundary\"=\"administrative\"][\"name\"~\"${addressComponent.label}\",i];\r\n      );\r\n      out ids;\r\n    `;\r\n\r\n    const response = await fetch('https://overpass-api.de/api/interpreter', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: `data=${encodeURIComponent(query)}`\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Overpass API error: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.elements && data.elements.length > 0) {\r\n      console.log(`‚úÖ OSM boundary IDs found Œ≥ŒπŒ±: ${addressComponent.label} (${data.elements.length} elements)`);\r\n\r\n      // ŒïœÄŒπœÉœÑœÅŒ≠œÜŒøœÖŒºŒµ null geometry Œ≥ŒπŒ± œÑœéœÅŒ±\r\n      // Œ§Œø œÄœÅŒ±Œ≥ŒºŒ±œÑŒπŒ∫œå boundary œáœÅŒµŒπŒ¨Œ∂ŒµœÑŒ±Œπ œÄŒπŒø œÉœçŒΩŒ∏ŒµœÑŒø query\r\n      return {\r\n        type: 'FeatureCollection',\r\n        features: []\r\n      };\r\n    }\r\n\r\n    console.log(`‚ö†Ô∏è No OSM boundary found Œ≥ŒπŒ±: ${addressComponent.label}`);\r\n    return {\r\n      type: 'FeatureCollection',\r\n      features: []\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error(`üö´ OSM API error Œ≥ŒπŒ± ${addressComponent.label}:`, error);\r\n\r\n    // Fallback to local boundary system\r\n    console.log(`‚ö†Ô∏è Fallback to local boundary system Œ≥ŒπŒ±: ${addressComponent.label}`);\r\n    return await fetchLocalBoundary(addressComponent);\r\n  }\r\n};\r\n\r\n/**\r\n * Fallback boundary fetch using local system\r\n */\r\nasync function fetchLocalBoundary(\r\n  addressComponent: { label: string; type: string }\r\n): Promise<OSMAdminCollection> {\r\n  // Basic query normalization\r\n  const baseName = addressComponent.label\r\n    .replace(/^ŒîŒÆŒºŒøœÇ\\s+/, '')\r\n    .replace(/^ŒîŒ∑ŒºŒøœÑŒπŒ∫ŒÆ\\s+ŒïŒΩœåœÑŒ∑œÑŒ±\\s+/, '')\r\n    .replace(/^Œ†ŒµœÅŒπœÜŒ≠œÅŒµŒπŒ±\\s+/, '')\r\n    .replace(/^Œ†ŒµœÅŒπœÜŒµœÅŒµŒπŒ±Œ∫ŒÆ\\s+ŒïŒΩœåœÑŒ∑œÑŒ±\\s+/, '')\r\n    .replace(/\\s+-\\s+.*$/, '')\r\n    .replace(/\\s+\\(.+\\)$/, '')\r\n    .trim();\r\n\r\n  console.log('‚ö†Ô∏è Fallback to local boundary system Œ≥ŒπŒ±:', baseName);\r\n\r\n  // Use existing fallback system if available\r\n  try {\r\n    const { findFallbackBoundary } = await import('./fallbackBoundaries');\r\n    const searchTerms = [addressComponent.label, baseName];\r\n    const fallbackBoundary = findFallbackBoundary(searchTerms);\r\n\r\n    if (fallbackBoundary) {\r\n      console.log('‚úÖ Local fallback boundary found');\r\n      return fallbackBoundary;\r\n    }\r\n  } catch (fallbackError) {\r\n    console.warn('‚ö†Ô∏è Fallback system not available:', fallbackError);\r\n  }\r\n\r\n  // Ultimate fallback: empty collection\r\n  console.error('üö´ No boundary data available Œ≥ŒπŒ±:', addressComponent.label);\r\n  return {\r\n    type: 'FeatureCollection',\r\n    features: []\r\n  };\r\n}\r\n\r\n// Stub functions Œ≥ŒπŒ± compatibility\r\nexport const fetchBuildingOutlines = async () => ({ type: 'FeatureCollection', features: [] });\r\nexport const fetchAdministrativeBoundary = async () => ({ type: 'FeatureCollection', features: [] });\r\nexport const clearOSMCache = async () => {};\r\nexport const getCacheSize = () => 0;\r\nexport const isBoundsCached = () => false;\r\nexport const prefetchBuildingOutlines = async () => {};\r\n\r\n/**\r\n * Convert OSM geometry to GeoJSON geometry\r\n */\r\nfunction convertOSMGeometry(element: any): any {\r\n  if (!element.geometry) return null;\r\n\r\n  if (element.type === 'relation') {\r\n    // For relations, try to build polygon from ways\r\n    const coordinates: number[][][] = [];\r\n\r\n    if (element.geometry && element.geometry.length > 0) {\r\n      const outerRing: number[][] = [];\r\n\r\n      element.geometry.forEach((geom: any) => {\r\n        if (geom.lat && geom.lon) {\r\n          outerRing.push([geom.lon, geom.lat]);\r\n        }\r\n      });\r\n\r\n      if (outerRing.length > 2) {\r\n        // Close the ring if needed\r\n        if (outerRing[0][0] !== outerRing[outerRing.length - 1][0] ||\r\n            outerRing[0][1] !== outerRing[outerRing.length - 1][1]) {\r\n          outerRing.push([...outerRing[0]]);\r\n        }\r\n        coordinates.push(outerRing);\r\n      }\r\n    }\r\n\r\n    if (coordinates.length > 0) {\r\n      return {\r\n        type: 'Polygon',\r\n        coordinates: coordinates\r\n      };\r\n    }\r\n  }\r\n\r\n  if (element.type === 'way') {\r\n    const coordinates: number[][] = [];\r\n\r\n    if (element.geometry) {\r\n      element.geometry.forEach((geom: any) => {\r\n        if (geom.lat && geom.lon) {\r\n          coordinates.push([geom.lon, geom.lat]);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (coordinates.length > 2) {\r\n      // Close the ring if needed for polygon\r\n      if (coordinates[0][0] !== coordinates[coordinates.length - 1][0] ||\r\n          coordinates[0][1] !== coordinates[coordinates.length - 1][1]) {\r\n        coordinates.push([...coordinates[0]]);\r\n      }\r\n\r\n      return {\r\n        type: 'Polygon',\r\n        coordinates: [coordinates]\r\n      };\r\n    }\r\n  }\r\n\r\n  return null;\r\n}","/**\r\n * Address parsing utilities œÄŒøœÖ œáœÅŒ∑œÉŒπŒºŒøœÄŒøŒπŒøœçŒΩ œÑŒø @layera/geocoding\r\n */\r\n\r\n// Temporarily inline GeocodeResult to avoid build dependency issues\r\ninterface Coordinates {\r\n  latitude: number;\r\n  longitude: number;\r\n}\r\n\r\ninterface Address {\r\n  street?: string;\r\n  houseNumber?: string;\r\n  postalCode?: string;\r\n  city?: string;\r\n  region?: string;\r\n  country?: string;\r\n}\r\n\r\ninterface GeocodeResult {\r\n  id: string;\r\n  displayName: string;\r\n  coordinates: Coordinates;\r\n  accuracy: string;\r\n  address: Address;\r\n}\r\nimport type { AddressComponent } from '../types';\r\n\r\n/**\r\n * Parse Œ≠ŒΩŒ± GeocodeResult œÉŒµ clickable AddressComponents\r\n * ŒßœÅŒ∑œÉŒπŒºŒøœÄŒøŒπŒµŒØ œÑŒ± parsed fields Œ±œÄœå œÑŒø geocoding Œ±ŒΩœÑŒØ ŒΩŒ± Œ∫Œ¨ŒΩŒµŒπ custom parsing\r\n */\r\nexport function parseGeocodeToComponents(result: GeocodeResult): AddressComponent[] {\r\n  const components: AddressComponent[] = [];\r\n  let index = 0;\r\n\r\n  // Street & House Number\r\n  if (result.address.street && result.address.houseNumber) {\r\n    components.push({\r\n      id: `street-${index++}`,\r\n      label: `${result.address.street} ${result.address.houseNumber}`,\r\n      type: 'street',\r\n      clickable: false, // Streets Œ¥ŒµŒΩ Œ≠œáŒøœÖŒΩ boundaries\r\n      value: `${result.address.street} ${result.address.houseNumber}`,\r\n      className: 'address-street'\r\n    });\r\n  } else if (result.address.street) {\r\n    components.push({\r\n      id: `street-${index++}`,\r\n      label: result.address.street,\r\n      type: 'street',\r\n      clickable: false,\r\n      value: result.address.street,\r\n      className: 'address-street'\r\n    });\r\n  }\r\n\r\n  // Postal Code\r\n  if (result.address.postalCode) {\r\n    components.push({\r\n      id: `postal-${index++}`,\r\n      label: result.address.postalCode,\r\n      type: 'postalCode',\r\n      clickable: false, // Postal codes Œ¥ŒµŒΩ Œ≠œáŒøœÖŒΩ boundaries\r\n      value: result.address.postalCode,\r\n      className: 'address-postal'\r\n    });\r\n  }\r\n\r\n  // City (clickable Œ≥ŒπŒ± boundary)\r\n  if (result.address.city) {\r\n    components.push({\r\n      id: `city-${index++}`,\r\n      label: result.address.city,\r\n      type: 'city',\r\n      clickable: true, // Cities Œ≠œáŒøœÖŒΩ administrative boundaries\r\n      value: result.address.city,\r\n      className: 'address-city'\r\n    });\r\n  }\r\n\r\n  // Region/ŒîŒÆŒºŒøœÇ (clickable Œ≥ŒπŒ± boundary)\r\n  if (result.address.region) {\r\n    components.push({\r\n      id: `region-${index++}`,\r\n      label: result.address.region,\r\n      type: 'region',\r\n      clickable: true, // Regions Œ≠œáŒøœÖŒΩ administrative boundaries\r\n      value: result.address.region,\r\n      className: 'address-region'\r\n    });\r\n  }\r\n\r\n  // Country\r\n  if (result.address.country) {\r\n    components.push({\r\n      id: `country-${index++}`,\r\n      label: result.address.country,\r\n      type: 'country',\r\n      clickable: true, // Countries Œ≠œáŒøœÖŒΩ boundaries\r\n      value: result.address.country,\r\n      className: 'address-country'\r\n    });\r\n  }\r\n\r\n  return components;\r\n}\r\n\r\n/**\r\n * Parse œÑŒø displayName œÉŒµ ŒµœÄŒπœÄŒªŒ≠ŒøŒΩ components œÄŒøœÖ Œ¥ŒµŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ œÉœÑŒø parsed address\r\n * Useful Œ≥ŒπŒ± œÄŒµœÅŒπœÄœÑœéœÉŒµŒπœÇ œåœÄœâœÇ \"ŒúŒ∑œÑœÅŒøœÄŒøŒªŒπœÑŒπŒ∫ŒÆ ŒïŒΩœåœÑŒ∑œÑŒ± ŒòŒµœÉœÉŒ±ŒªŒøŒΩŒØŒ∫Œ∑œÇ\" œÄŒøœÖ Œ¥ŒµŒΩ ŒµŒØŒΩŒ±Œπ œÉœÑŒø address object\r\n */\r\nexport function parseDisplayNameToAdditionalComponents(\r\n  result: GeocodeResult,\r\n  existingComponents: AddressComponent[]\r\n): AddressComponent[] {\r\n  const displayName = result.displayName;\r\n  const additionalComponents: AddressComponent[] = [];\r\n\r\n  // Œ§ŒºŒÆŒºŒ±œÑŒ± œÑŒøœÖ displayName œÄŒøœÖ Œ¥ŒµŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ ŒÆŒ¥Œ∑ œÉœÑŒ± components\r\n  const existingValues = new Set(existingComponents.map(c => c.value?.toLowerCase()));\r\n\r\n  // Split by comma Œ∫Œ±Œπ Œ∫Œ±Œ∏Œ±œÅŒπœÉŒºœåœÇ\r\n  const parts = displayName.split(',').map((part: string) => part.trim());\r\n\r\n  let index = existingComponents.length;\r\n\r\n  for (const part of parts) {\r\n    // Skip Œ±ŒΩ œÖœÄŒ¨œÅœáŒµŒπ ŒÆŒ¥Œ∑\r\n    if (existingValues.has(part.toLowerCase())) {\r\n      continue;\r\n    }\r\n\r\n    // Skip Œ±ŒΩ ŒµŒØŒΩŒ±Œπ ŒºœåŒΩŒø Œ±œÅŒπŒ∏ŒºœåœÇ (house number)\r\n    if (/^\\d+$/.test(part)) {\r\n      continue;\r\n    }\r\n\r\n    // Skip Œ±ŒΩ ŒµŒØŒΩŒ±Œπ ŒºœåŒΩŒø postal code\r\n    if (/^\\d{5}$/.test(part)) {\r\n      continue;\r\n    }\r\n\r\n      // UNIVERSAL APPROACH: ŒöŒ¨ŒΩŒøœÖŒºŒµ clickable ŒüŒõŒë ŒµŒ∫œÑœåœÇ Œ±œÄœå:\r\n    // - ŒëœÅŒπŒ∏ŒºŒøœçœÇ ŒºœåŒΩŒø (house numbers)\r\n    // - Postal codes\r\n    // - Œ†ŒøŒªœç ŒºŒπŒ∫œÅŒ¨ strings (<=2 œáŒ±œÅŒ±Œ∫œÑŒÆœÅŒµœÇ)\r\n    // Œ§Œø œÉœçœÉœÑŒ∑ŒºŒ± Œ∏Œ± ŒµŒªŒ≠Œ≥ŒæŒµŒπ ŒîŒ•ŒùŒëŒúŒôŒöŒë Œ±ŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ boundaries\r\n    const isNotClickable =\r\n      /^\\d+$/.test(part) || // ŒúœåŒΩŒø Œ±œÅŒπŒ∏ŒºŒøŒØ\r\n      /^\\d{3,5}(-\\d{4})?$/.test(part) || // Postal codes\r\n      part.length <= 2; // Œ†ŒøŒªœç ŒºŒπŒ∫œÅŒ¨ strings\r\n\r\n    additionalComponents.push({\r\n      id: `additional-${index++}`,\r\n      label: part,\r\n      type: 'custom',\r\n      clickable: !isNotClickable, // ŒåŒªŒ± clickable ŒµŒ∫œÑœåœÇ Œ±œÄœå œÑŒπœÇ ŒµŒæŒ±ŒπœÅŒ≠œÉŒµŒπœÇ\r\n      value: part,\r\n      className: 'address-component'\r\n    });\r\n  }\r\n\r\n  return additionalComponents;\r\n}\r\n\r\n/**\r\n * Combine parsed address components ŒºŒµ additional components Œ±œÄœå œÑŒø displayName\r\n */\r\nexport function parseFullAddress(result: GeocodeResult): AddressComponent[] {\r\n  const baseComponents = parseGeocodeToComponents(result);\r\n  const additionalComponents = parseDisplayNameToAdditionalComponents(result, baseComponents);\r\n\r\n  // Combine Œ∫Œ±Œπ sort - Œ≤Œ¨Œ∂ŒøœÖŒºŒµ œÑŒ± administrative components œÄœÅœéœÑŒ±\r\n  const allComponents = [...baseComponents, ...additionalComponents];\r\n\r\n  return allComponents.sort((a, b) => {\r\n    // Administrative components œÄœÅœéœÑŒ±\r\n    if (a.clickable && !b.clickable) return -1;\r\n    if (!a.clickable && b.clickable) return 1;\r\n\r\n    // ŒúŒµœÑŒ¨ sort by type priority\r\n    const typePriority = {\r\n      'street': 1,\r\n      'houseNumber': 2,\r\n      'postalCode': 3,\r\n      'city': 4,\r\n      'region': 5,\r\n      'custom': 6,\r\n      'country': 7\r\n    };\r\n\r\n    return (typePriority[a.type] || 999) - (typePriority[b.type] || 999);\r\n  });\r\n}","import React, { useState } from 'react';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack } from '@layera/layout';\r\nimport { FormField, Input, TextArea, FormActions } from '@layera/forms';\r\nimport { Button } from '@layera/buttons';\r\nimport { useLayeraTranslation } from '@layera/tolgee';\r\n\r\nexport interface DetailsData {\r\n  title: string;\r\n  description: string;\r\n  price?: number;\r\n  salary?: number;\r\n  contactInfo: string;\r\n}\r\n\r\nexport interface DetailsStepProps {\r\n  category: 'property' | 'job';\r\n  intent: 'offer' | 'search';\r\n  onNext: (details: DetailsData) => void;\r\n  onBack: () => void;\r\n}\r\n\r\n/**\r\n * DetailsStep - Enterprise LEGO Component\r\n * Purpose: Additional details form\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const DetailsStep: React.FC<DetailsStepProps> = ({ category, intent, onNext, onBack }) => {\r\n  const { t } = useLayeraTranslation();\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [price, setPrice] = useState<number | undefined>();\r\n  const [salary, setSalary] = useState<number | undefined>();\r\n  const [contactInfo, setContactInfo] = useState('');\r\n\r\n  const isProperty = category === 'property';\r\n  const isOffer = intent === 'offer';\r\n\r\n  const handleNext = () => {\r\n    if (title && description && contactInfo) {\r\n      onNext({\r\n        title,\r\n        description,\r\n        price: isProperty ? price : undefined,\r\n        salary: !isProperty ? salary : undefined,\r\n        contactInfo\r\n      });\r\n    }\r\n  };\r\n\r\n  const isValid = title && description && contactInfo;\r\n\r\n  return (\r\n    <Stack spacing=\"lg\">\r\n      <Heading as=\"h2\" size=\"xl\" color=\"primary\">\r\n        {t('pipelines.steps.details.title', {\r\n          type: isProperty ? t('pipelines.steps.details.property') : t('pipelines.steps.details.job')\r\n        })}\r\n      </Heading>\r\n\r\n      <Text size=\"lg\" color=\"secondary\">\r\n        {t('pipelines.steps.details.subtitle', {\r\n          intent: isOffer ? t('pipelines.steps.details.offer') : t('pipelines.steps.details.search')\r\n        })}\r\n      </Text>\r\n\r\n      <Stack spacing=\"md\">\r\n        <FormField label={t('pipelines.steps.details.fields.title')} required>\r\n          <Input\r\n            type=\"text\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            placeholder={\r\n              isProperty\r\n                ? t('pipelines.steps.details.placeholders.propertyTitle')\r\n                : t('pipelines.steps.details.placeholders.jobTitle')\r\n            }\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n          />\r\n        </FormField>\r\n\r\n        <FormField label={t('pipelines.steps.details.fields.description')} required>\r\n          <TextArea\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            placeholder={t('pipelines.steps.details.placeholders.description')}\r\n            rows={4}\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n          />\r\n        </FormField>\r\n\r\n        {isProperty && (\r\n          <FormField label={t('pipelines.steps.details.fields.price')} required={isOffer}>\r\n            <Input\r\n              type=\"number\"\r\n              value={price || ''}\r\n              onChange={(e) => setPrice(e.target.value ? parseInt(e.target.value) : undefined)}\r\n              placeholder={t('pipelines.steps.details.placeholders.price')}\r\n              size=\"lg\"\r\n              variant=\"outline\"\r\n            />\r\n          </FormField>\r\n        )}\r\n\r\n        {!isProperty && (\r\n          <FormField label={t('pipelines.steps.details.fields.salary')} required={isOffer}>\r\n            <Input\r\n              type=\"number\"\r\n              value={salary || ''}\r\n              onChange={(e) => setSalary(e.target.value ? parseInt(e.target.value) : undefined)}\r\n              placeholder={t('pipelines.steps.details.placeholders.salary')}\r\n              size=\"lg\"\r\n              variant=\"outline\"\r\n            />\r\n          </FormField>\r\n        )}\r\n\r\n        <FormField label={t('pipelines.steps.details.fields.contactInfo')} required>\r\n          <Input\r\n            type=\"text\"\r\n            value={contactInfo}\r\n            onChange={(e) => setContactInfo(e.target.value)}\r\n            placeholder={t('pipelines.steps.details.placeholders.contact')}\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n          />\r\n        </FormField>\r\n      </Stack>\r\n\r\n      <FormActions>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          onClick={onBack}\r\n        >\r\n          {t('pipelines.actions.back')}\r\n        </Button>\r\n        <Button\r\n          variant=\"primary\"\r\n          size=\"lg\"\r\n          onClick={handleNext}\r\n          disabled={!isValid}\r\n        >\r\n          {t('pipelines.actions.continue')}\r\n        </Button>\r\n      </FormActions>\r\n    </Stack>\r\n  );\r\n};","import React from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Text, Heading } from '@layera/typography';\r\nimport { Stack, Flex } from '@layera/layout';\r\nimport { Button } from '@layera/buttons';\r\nimport { CheckIcon, AlertTriangleIcon } from '@layera/icons';\r\n\r\nexport interface CompleteStepProps {\r\n  category: 'property' | 'job';\r\n  intent: 'offer' | 'search';\r\n  onComplete: () => void;\r\n  onBack: () => void;\r\n}\r\n\r\n/**\r\n * CompleteStep - Enterprise LEGO Component\r\n * Purpose: Final confirmation and completion\r\n * Complexity: Low (< 15)\r\n * Lines: < 100 (Enterprise Standard)\r\n * Dependencies: ONLY @layera LEGO systems\r\n */\r\nexport const CompleteStep: React.FC<CompleteStepProps> = ({\r\n  category,\r\n  intent,\r\n  onComplete,\r\n  onBack\r\n}) => {\r\n  const isProperty = category === 'property';\r\n  const isOffer = intent === 'offer';\r\n\r\n  const getSuccessMessage = () => {\r\n    if (isProperty && isOffer) return 'Œó œÄœÅŒøœÉœÜŒøœÅŒ¨ Œ±Œ∫ŒπŒΩŒÆœÑŒøœÖ œÉŒ±œÇ Œ∫Œ±œÑŒ±œáœâœÅŒÆŒ∏Œ∑Œ∫Œµ ŒµœÄŒπœÑœÖœáœéœÇ!';\r\n    if (isProperty && !isOffer) return 'Œ§Œø Geo-Alert œÉŒ±œÇ Œ¥Œ∑ŒºŒπŒøœÖœÅŒ≥ŒÆŒ∏Œ∑Œ∫Œµ ŒµœÄŒπœÑœÖœáœéœÇ!';\r\n    if (!isProperty && isOffer) return 'Œó Œ±Œ≥Œ≥ŒµŒªŒØŒ± ŒµœÅŒ≥Œ±œÉŒØŒ±œÇ œÉŒ±œÇ Œ∫Œ±œÑŒ±œáœâœÅŒÆŒ∏Œ∑Œ∫Œµ ŒµœÄŒπœÑœÖœáœéœÇ!';\r\n    return 'Œó Œ±ŒØœÑŒ∑œÉŒ∑ ŒµœÅŒ≥Œ±œÉŒØŒ±œÇ œÉŒ±œÇ Œ∫Œ±œÑŒ±œáœâœÅŒÆŒ∏Œ∑Œ∫Œµ ŒµœÄŒπœÑœÖœáœéœÇ!';\r\n  };\r\n\r\n  const getNextSteps = () => {\r\n    if (isProperty && !isOffer) {\r\n      return [\r\n        'ŒòŒ± ŒªŒ±ŒºŒ≤Œ¨ŒΩŒµœÑŒµ ŒµŒπŒ¥ŒøœÄŒøŒπŒÆœÉŒµŒπœÇ œåœÑŒ±ŒΩ Œ≤œÅŒµŒ∏ŒøœçŒΩ ŒΩŒ≠Œ± Œ±Œ∫ŒØŒΩŒ∑œÑŒ±',\r\n        'ŒúœÄŒøœÅŒµŒØœÑŒµ ŒΩŒ± Œ¥ŒπŒ±œáŒµŒπœÅŒπœÉœÑŒµŒØœÑŒµ œÑŒ± alerts œÉŒ±œÇ Œ±œÄœå œÑŒø œÄœÅŒøœÜŒØŒª',\r\n        'ŒüŒπ ŒµŒπŒ¥ŒøœÄŒøŒπŒÆœÉŒµŒπœÇ Œ∏Œ± œÉœÑŒ±ŒªŒøœçŒΩ œÉœÑŒø email œÉŒ±œÇ'\r\n      ];\r\n    }\r\n\r\n    if (!isProperty && !isOffer) {\r\n      return [\r\n        'ŒüŒπ ŒµœÅŒ≥ŒøŒ¥œåœÑŒµœÇ Œ∏Œ± ŒºœÄŒøœÅŒøœçŒΩ ŒΩŒ± Œ¥ŒøœÖŒΩ œÑŒø œÄœÅŒøœÜŒØŒª œÉŒ±œÇ',\r\n        'ŒòŒ± ŒªŒ±ŒºŒ≤Œ¨ŒΩŒµœÑŒµ ŒµŒπŒ¥ŒøœÄŒøŒπŒÆœÉŒµŒπœÇ Œ≥ŒπŒ± Œ∫Œ±œÑŒ¨ŒªŒªŒ∑ŒªŒµœÇ Œ∏Œ≠œÉŒµŒπœÇ',\r\n        'ŒúœÄŒøœÅŒµŒØœÑŒµ ŒΩŒ± ŒµœÄŒµŒæŒµœÅŒ≥Œ±œÉœÑŒµŒØœÑŒµ œÑŒø œÄœÅŒøœÜŒØŒª œÉŒ±œÇ Œ±ŒΩŒ¨ œÄŒ¨œÉŒ± œÉœÑŒπŒ≥ŒºŒÆ'\r\n      ];\r\n    }\r\n\r\n    return [\r\n      'Œó Œ∫Œ±œÑŒ±œáœéœÅŒ∑œÉŒÆ œÉŒ±œÇ ŒµŒØŒΩŒ±Œπ œÄŒªŒ≠ŒøŒΩ ŒµŒΩŒµœÅŒ≥ŒÆ',\r\n      'ŒüŒπ ŒµŒΩŒ¥ŒπŒ±œÜŒµœÅœåŒºŒµŒΩŒøŒπ Œ∏Œ± ŒºœÄŒøœÅŒøœçŒΩ ŒΩŒ± œÉŒ±œÇ ŒµœÄŒπŒ∫ŒøŒπŒΩœâŒΩŒÆœÉŒøœÖŒΩ',\r\n      'ŒúœÄŒøœÅŒµŒØœÑŒµ ŒΩŒ± Œ¥ŒπŒ±œáŒµŒπœÅŒπœÉœÑŒµŒØœÑŒµ œÑŒ∑ŒΩ Œ∫Œ±œÑŒ±œáœéœÅŒ∑œÉŒ∑ Œ±œÄœå œÑŒø œÄœÅŒøœÜŒØŒª œÉŒ±œÇ'\r\n    ];\r\n  };\r\n\r\n  return (\r\n    <Stack spacing=\"lg\">\r\n      <BaseCard variant=\"outlined\" size=\"lg\" padding=\"lg\" className=\"layera-unified-card\">\r\n        <Stack spacing=\"lg\" style={{ textAlign: 'center' }}>\r\n          <CheckIcon size=\"xl\" theme=\"success\" />\r\n\r\n          <Heading as=\"h2\" size=\"xl\" color=\"success\">\r\n            ŒïœÄŒπœÑœÖœáŒÆœÇ ŒüŒªŒøŒ∫ŒªŒÆœÅœâœÉŒ∑!\r\n          </Heading>\r\n\r\n          <Text size=\"lg\" color=\"secondary\">\r\n            {getSuccessMessage()}\r\n          </Text>\r\n        </Stack>\r\n      </BaseCard>\r\n\r\n      <BaseCard variant=\"outlined\" size=\"lg\" padding=\"lg\" className=\"layera-unified-card\">\r\n        <Stack spacing=\"md\">\r\n          <Flex align=\"center\" gap=\"md\">\r\n            <AlertTriangleIcon size=\"lg\" theme=\"primary\" />\r\n            <Heading as=\"h3\" size=\"lg\" color=\"primary\">\r\n              ŒïœÄœåŒºŒµŒΩŒ± ŒíŒÆŒºŒ±œÑŒ±\r\n            </Heading>\r\n          </Flex>\r\n\r\n          <Stack spacing=\"sm\">\r\n            {getNextSteps().map((step, index) => (\r\n              <Text key={index} size=\"base\" color=\"secondary\">\r\n                ‚Ä¢ {step}\r\n              </Text>\r\n            ))}\r\n          </Stack>\r\n        </Stack>\r\n      </BaseCard>\r\n\r\n      <Stack spacing=\"md\">\r\n        <Button\r\n          variant=\"primary\"\r\n          size=\"lg\"\r\n          onClick={onComplete}\r\n          style={{ width: '100%' }}\r\n        >\r\n          Œ§Œ≠ŒªŒøœÇ\r\n        </Button>\r\n\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          onClick={onBack}\r\n          style={{ width: '100%' }}\r\n        >\r\n          Œ†ŒØœÉœâ Œ≥ŒπŒ± ŒëŒªŒªŒ±Œ≥Œ≠œÇ\r\n        </Button>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};"],"mappings":"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","names":["import_react","import_layout","import_buttons","import_forms","import_typography","import_react","import_tolgee","import_react","import_cards","import_typography","import_layout","import_icons","import_tolgee","import_jsx_runtime","import_cards","import_typography","import_layout","import_buttons","import_forms","import_icons","import_tolgee","import_jsx_runtime","import_cards","import_typography","import_layout","import_buttons","import_forms","import_icons","import_tolgee","import_jsx_runtime","import_cards","import_typography","import_layout","import_icons","import_tolgee","import_jsx_runtime","import_react","import_typography","import_layout","import_forms","import_buttons","import_tolgee","import_jsx_runtime","import_react","import_cards","import_typography","import_layout","import_buttons","import_forms","import_icons","import_tolgee","import_jsx_runtime","import_react","import_typography","import_layout","import_buttons","import_forms","import_icons","import_react","import_react","import_cards","import_buttons","import_icons","import_tolgee","findFallbackBoundary","import_jsx_runtime","error","isLoading","import_jsx_runtime","badgeText","import_react","import_typography","import_layout","import_forms","import_buttons","import_tolgee","import_jsx_runtime","import_cards","import_typography","import_layout","import_buttons","import_icons","import_jsx_runtime","import_jsx_runtime"]}