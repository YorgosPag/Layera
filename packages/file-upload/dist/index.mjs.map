{"version":3,"sources":["../src/components/FileUploader.tsx","../src/components/DragDropZone.tsx","../src/components/FileList.tsx","../src/utils/fileValidation.ts","../src/components/FilePreview.tsx","../src/utils/uploadEngine.ts","../src/index.ts"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { useLayeraTranslation } from '@layera/i18n';\nimport { useNotifications } from '@layera/notifications';\nimport { ErrorBoundary } from '@layera/error-boundary';\nimport { Text as Typography } from '@layera/typography';\nimport { Button } from '@layera/buttons';\nimport { UploadIcon, DeleteIcon } from '@layera/icons';\nimport { useTheme } from '@layera/theme-switcher';\nimport type { FileUploaderProps, FileUploadItem } from '../types';\nimport { DragDropZone } from './DragDropZone';\nimport { FileList } from './FileList';\nimport { FilePreview } from './FilePreview';\nimport { UploadEngine } from '../utils/uploadEngine';\nimport { validateFileList, validateFile } from '../utils/fileValidation';\n\n/**\n * Main file uploader component με enterprise-grade functionality\n * Βασισμένο σε Google Drive, Dropbox, WeTransfer patterns\n */\nexport const FileUploader: React.FC<FileUploaderProps> = ({\n  config,\n  initialFiles = [],\n  className = '',\n  disabled = false,\n  customDropZone: CustomDropZone,\n  customFileList: CustomFileList,\n  onUploadStart,\n  onUploadProgress,\n  onUploadComplete,\n  onUploadError,\n  onUploadCancel,\n  onFileRemove,\n  onAllUploadsComplete\n}) => {\n  const { t } = useLayeraTranslation();\n  const { theme } = useTheme();\n  const { addNotification } = useNotifications();\n  const [files, setFiles] = useState<FileUploadItem[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');\n  const uploadEngineRef = useRef<UploadEngine | null>(null);\n\n  // Initialize upload engine\n  useEffect(() => {\n    uploadEngineRef.current = new UploadEngine(config, {\n      onUploadStart: (file) => {\n        setFiles(prev => prev.map(f => f.id === file.id ? file : f));\n        onUploadStart?.(file);\n      },\n      onUploadProgress: (file, progress) => {\n        setFiles(prev => prev.map(f => f.id === file.id ? file : f));\n        onUploadProgress?.(file, progress);\n      },\n      onUploadComplete: (file) => {\n        setFiles(prev => prev.map(f => f.id === file.id ? file : f));\n        onUploadComplete?.(file);\n        addNotification({\n          type: 'success',\n          title: t('file-upload.notifications.upload-complete'),\n          message: t('file-upload.notifications.file-uploaded', { name: file.file.name })\n        });\n      },\n      onUploadError: (file, error) => {\n        setFiles(prev => prev.map(f => f.id === file.id ? file : f));\n        onUploadError?.(file, error);\n        addNotification({\n          type: 'error',\n          title: t('file-upload.notifications.upload-error'),\n          message: error\n        });\n      },\n      onUploadCancel: (file) => {\n        setFiles(prev => prev.map(f => f.id === file.id ? file : f));\n        onUploadCancel?.(file);\n        addNotification({\n          type: 'info',\n          title: t('file-upload.notifications.upload-cancelled'),\n          message: t('file-upload.notifications.file-cancelled', { name: file.file.name })\n        });\n      },\n      onAllUploadsComplete: (completedFiles) => {\n        setIsUploading(false);\n        onAllUploadsComplete?.(completedFiles);\n        addNotification({\n          type: 'success',\n          title: t('file-upload.notifications.all-complete'),\n          message: t('file-upload.notifications.all-files-uploaded', { count: completedFiles.length })\n        });\n      }\n    });\n\n    return () => {\n      uploadEngineRef.current?.clearAll();\n    };\n  }, [config, onUploadStart, onUploadProgress, onUploadComplete, onUploadError, onUploadCancel, onAllUploadsComplete, t, addNotification]);\n\n  // Initialize with initial files\n  useEffect(() => {\n    if (initialFiles.length > 0) {\n      handleFilesAdded(initialFiles);\n    }\n  }, []);\n\n  const generateFileId = (): string => {\n    return `file-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  };\n\n  const createFileUploadItem = (file: File): FileUploadItem => {\n    return {\n      id: generateFileId(),\n      file,\n      status: 'idle' as const,\n      progress: 0\n    };\n  };\n\n  const handleFilesAdded = useCallback((newFiles: File[]) => {\n    if (disabled) return;\n\n    // Validate files\n    const validation = validateFileList(newFiles, config);\n    if (!validation.isValid) {\n      validation.errors.forEach(error => {\n        addNotification({\n          type: 'error',\n          title: t('file-upload.notifications.validation-error'),\n          message: error\n        });\n      });\n      return;\n    }\n\n    // Show warnings if any\n    validation.warnings.forEach(warning => {\n      addNotification({\n        type: 'warning',\n        title: t('file-upload.notifications.validation-warning'),\n        message: warning\n      });\n    });\n\n    // Convert to FileUploadItems\n    const fileItems = newFiles.map(createFileUploadItem);\n\n    // Add to state\n    setFiles(prev => [...prev, ...fileItems]);\n\n    // Add to upload engine\n    fileItems.forEach(fileItem => {\n      uploadEngineRef.current?.addFile(fileItem);\n    });\n\n    // Auto-start uploading if enabled\n    if (config.autoUpload) {\n      setIsUploading(true);\n    }\n  }, [config, disabled, t, addNotification]);\n\n  const handleStartUpload = useCallback(() => {\n    if (!uploadEngineRef.current || isUploading) return;\n\n    const pendingFiles = files.filter(f => f.status === 'idle');\n    if (pendingFiles.length === 0) return;\n\n    setIsUploading(true);\n    pendingFiles.forEach(file => {\n      uploadEngineRef.current?.uploadFile(file);\n    });\n  }, [files, isUploading]);\n\n  const handlePauseUpload = useCallback(() => {\n    if (!uploadEngineRef.current) return;\n\n    const uploadingFiles = files.filter(f => f.status === 'uploading');\n    uploadingFiles.forEach(file => {\n      uploadEngineRef.current?.pauseUpload(file.id);\n    });\n    setIsUploading(false);\n  }, [files]);\n\n  const handleCancelUpload = useCallback((fileId: string) => {\n    uploadEngineRef.current?.cancelUpload(fileId);\n  }, []);\n\n  const handleRetryUpload = useCallback((fileId: string) => {\n    const file = files.find(f => f.id === fileId);\n    if (!file) return;\n\n    // Reset file status\n    const resetFile: FileUploadItem = { ...file, status: 'idle' as const, progress: 0, error: undefined };\n    setFiles(prev => prev.map(f => f.id === fileId ? resetFile : f));\n\n    // Add back to upload engine\n    uploadEngineRef.current?.addFile(resetFile);\n\n    if (config.autoUpload) {\n      setIsUploading(true);\n    }\n  }, [files, config.autoUpload]);\n\n  const handleRemoveFile = useCallback((fileId: string) => {\n    const file = files.find(f => f.id === fileId);\n    if (!file) return;\n\n    // Cancel upload if in progress\n    if (file.status === 'uploading') {\n      uploadEngineRef.current?.cancelUpload(fileId);\n    }\n\n    // Remove from state\n    setFiles(prev => prev.filter(f => f.id !== fileId));\n\n    // Call callback\n    onFileRemove?.(file);\n  }, [files, onFileRemove]);\n\n  const handleClearAll = useCallback(() => {\n    uploadEngineRef.current?.clearAll();\n    setFiles([]);\n    setIsUploading(false);\n  }, []);\n\n  const getUploadSummary = () => {\n    const total = files.length;\n    const completed = files.filter(f => f.status === 'completed').length;\n    const uploading = files.filter(f => f.status === 'uploading').length;\n    const errors = files.filter(f => f.status === 'error').length;\n\n    return { total, completed, uploading, errors };\n  };\n\n  const summary = getUploadSummary();\n  const hasFiles = files.length > 0;\n  const canStartUpload = !isUploading && files.some(f => f.status === 'idle');\n  const DropZoneComponent = CustomDropZone || DragDropZone;\n  const FileListComponent = CustomFileList || FileList;\n\n  return (\n    <ErrorBoundary>\n      <div className={`layera-file-uploader ${className}`}>\n        {/* Upload Controls */}\n        {hasFiles && (\n          <div className={`mb-6 p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-800' : 'bg-gray-50'}`}>\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <Typography variant=\"h6\" className=\"mb-1\">\n                  {t('file-upload.upload-summary')}\n                </Typography>\n                <Typography variant=\"caption\" className=\"text-gray-500\">\n                  {t('file-upload.files-summary', {\n                    total: summary.total,\n                    completed: summary.completed,\n                    uploading: summary.uploading,\n                    errors: summary.errors\n                  })}\n                </Typography>\n              </div>\n\n              <div className=\"flex items-center space-x-2\">\n                {/* View Mode Toggle */}\n                <div className=\"flex items-center space-x-1 mr-4\">\n                  <Button\n                    variant={viewMode === 'list' ? 'primary' : 'outline'}\n                    size=\"sm\"\n                    onClick={() => setViewMode('list')}\n                  >\n                    <UploadIcon className=\"w-4 h-4\" />\n                  </Button>\n                  <Button\n                    variant={viewMode === 'grid' ? 'primary' : 'outline'}\n                    size=\"sm\"\n                    onClick={() => setViewMode('grid')}\n                  >\n                    <UploadIcon className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n\n                {/* Upload Controls */}\n                {canStartUpload && (\n                  <Button\n                    variant=\"primary\"\n                    onClick={handleStartUpload}\n                    disabled={disabled}\n                  >\n                    <UploadIcon className=\"w-4 h-4 mr-2\" />\n                    {t('file-upload.start-upload')}\n                  </Button>\n                )}\n\n                {isUploading && (\n                  <Button\n                    variant=\"outline\"\n                    onClick={handlePauseUpload}\n                    disabled={disabled}\n                  >\n                    <UploadIcon className=\"w-4 h-4 mr-2\" />\n                    {t('file-upload.pause-upload')}\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"outline\"\n                  onClick={handleClearAll}\n                  disabled={disabled || isUploading}\n                >\n                  <DeleteIcon className=\"w-4 h-4 mr-2\" />\n                  {t('file-upload.clear-all')}\n                </Button>\n              </div>\n            </div>\n\n            {/* Overall Progress */}\n            {isUploading && summary.total > 0 && (\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div\n                  className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${(summary.completed / summary.total) * 100}%` }}\n                />\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Drop Zone */}\n        <div className=\"mb-6\">\n          <DropZoneComponent\n            enabled={!disabled && config.enableDragDrop}\n            acceptedTypes={config.acceptedTypes}\n            maxFiles={config.maxConcurrent}\n            onFilesDrop={handleFilesAdded}\n            multiple={true}\n          />\n        </div>\n\n        {/* File Display */}\n        {hasFiles && (\n          <div className=\"mb-6\">\n            {viewMode === 'list' ? (\n              <FileListComponent\n                files={files}\n                showProgress={true}\n                showActions={true}\n                onRemove={handleRemoveFile}\n                onCancel={handleCancelUpload}\n                onRetry={handleRetryUpload}\n              />\n            ) : (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4\">\n                {files.map(file => (\n                  <FilePreview\n                    key={file.id}\n                    file={file}\n                    showPreview={true}\n                    onRemove={handleRemoveFile}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </ErrorBoundary>\n  );\n};","import React, { useCallback, useState } from 'react';\nimport { useLayeraTranslation } from '@layera/i18n';\nimport { BaseCard as Card } from '@layera/cards';\nimport { Text as Typography } from '@layera/typography';\nimport { UploadIcon } from '@layera/icons';\nimport { useTheme } from '@layera/theme-switcher';\nimport type { DragDropZoneProps } from '../types';\n\n/**\n * Drag & Drop zone component με enterprise-grade functionality\n * Βασισμένο σε Google Drive, Dropbox patterns\n */\nexport const DragDropZone: React.FC<DragDropZoneProps> = ({\n  enabled,\n  acceptedTypes,\n  maxFiles,\n  dropZoneText,\n  onFilesDrop,\n  className = '',\n  multiple = true\n}) => {\n  const { t } = useLayeraTranslation();\n  const { theme } = useTheme();\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [dragCounter, setDragCounter] = useState(0);\n\n  const handleDragEnter = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!enabled) return;\n\n    setDragCounter(prev => prev + 1);\n\n    if (e.dataTransfer?.items && e.dataTransfer.items.length > 0) {\n      setIsDragOver(true);\n    }\n  }, [enabled]);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!enabled) return;\n\n    setDragCounter(prev => {\n      const newCounter = prev - 1;\n      if (newCounter === 0) {\n        setIsDragOver(false);\n      }\n      return newCounter;\n    });\n  }, [enabled]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!enabled) return;\n\n    if (e.dataTransfer) {\n      e.dataTransfer.dropEffect = 'copy';\n    }\n  }, [enabled]);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!enabled) return;\n\n    setIsDragOver(false);\n    setDragCounter(0);\n\n    const { files } = e.dataTransfer;\n    if (files && files.length > 0) {\n      const fileArray = Array.from(files);\n\n      // Apply maxFiles limit\n      const limitedFiles = maxFiles ? fileArray.slice(0, maxFiles) : fileArray;\n\n      // Filter by accepted types\n      const validFiles = limitedFiles.filter(file =>\n        acceptedTypes.length === 0 || acceptedTypes.includes(file.type as any)\n      );\n\n      if (validFiles.length > 0) {\n        onFilesDrop(validFiles);\n      }\n    }\n  }, [enabled, maxFiles, acceptedTypes, onFilesDrop]);\n\n  const handleFileInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const { files } = e.target;\n    if (files && files.length > 0) {\n      const fileArray = Array.from(files);\n      onFilesDrop(fileArray);\n    }\n\n    // Reset input value για να επιτρέπουμε re-upload του ίδιου file\n    e.target.value = '';\n  }, [onFilesDrop]);\n\n  const getZoneClasses = () => {\n    const baseClasses = [\n      'relative',\n      'border-2',\n      'border-dashed',\n      'rounded-lg',\n      'p-8',\n      'text-center',\n      'transition-all',\n      'duration-200',\n      'cursor-pointer'\n    ];\n\n    if (!enabled) {\n      baseClasses.push('opacity-50', 'cursor-not-allowed');\n    } else if (isDragOver) {\n      baseClasses.push(\n        'border-blue-500',\n        'bg-blue-50',\n        theme === 'dark' ? 'bg-blue-900/20' : 'bg-blue-50',\n        'scale-105'\n      );\n    } else {\n      baseClasses.push(\n        'border-gray-300',\n        'hover:border-gray-400',\n        theme === 'dark' ? 'border-gray-600 hover:border-gray-500' : 'border-gray-300 hover:border-gray-400'\n      );\n    }\n\n    return baseClasses.join(' ');\n  };\n\n  const acceptAttribute = acceptedTypes.length > 0 ? acceptedTypes.join(',') : undefined;\n\n  return (\n    <Card className={`${getZoneClasses()} ${className}`}>\n      <div\n        onDragEnter={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onDragOver={handleDragOver}\n        onDrop={handleDrop}\n        className=\"w-full h-full\"\n      >\n        <input\n          type=\"file\"\n          multiple={multiple}\n          accept={acceptAttribute}\n          onChange={handleFileInputChange}\n          disabled={!enabled}\n          className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed\"\n        />\n\n        <div className=\"flex flex-col items-center justify-center space-y-4\">\n          <div className={`p-4 rounded-full ${\n            isDragOver\n              ? 'bg-blue-100 text-blue-600'\n              : theme === 'dark'\n              ? 'bg-gray-700 text-gray-300'\n              : 'bg-gray-100 text-gray-500'\n          }`}>\n            <UploadIcon className=\"w-8 h-8\" />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Typography size=\"lg\" weight=\"medium\" className=\"\">\n              {dropZoneText || (\n                isDragOver\n                  ? t('file-upload.drop-files-here')\n                  : t('file-upload.drag-files-or-click')\n              )}\n            </Typography>\n\n            <Typography size=\"sm\" className={theme === 'dark' ? 'text-gray-400' : 'text-gray-500'}>\n              {acceptedTypes.length > 0 && (\n                <>\n                  {t('file-upload.accepted-types')}: {acceptedTypes.join(', ')}\n                  <br />\n                </>\n              )}\n              {maxFiles && (\n                <>\n                  {t('file-upload.max-files', { count: maxFiles })}\n                  <br />\n                </>\n              )}\n              {t('file-upload.or-click-to-browse')}\n            </Typography>\n          </div>\n\n          {isDragOver && (\n            <div className=\"flex items-center space-x-2 text-blue-600\">\n              <UploadIcon className=\"w-5 h-5\" />\n              <Typography size=\"base\" weight=\"medium\" className=\"\">\n                {t('file-upload.release-to-upload')}\n              </Typography>\n            </div>\n          )}\n        </div>\n      </div>\n    </Card>\n  );\n};","import React from 'react';\nimport { useLayeraTranslation } from '@layera/i18n';\nimport { BaseCard as Card } from '@layera/cards';\nimport { Text as Typography } from '@layera/typography';\nimport { Button } from '@layera/buttons';\nimport { UploadIcon, CloseIcon, RefreshIcon, DeleteIcon } from '@layera/icons';\nimport { useTheme } from '@layera/theme-switcher';\nimport type { FileListProps, FileUploadItem } from '../types';\nimport { formatBytes } from '../utils/fileValidation';\n\n/**\n * File list component για προβολή και διαχείριση uploaded files\n * Βασισμένο σε Google Drive, Dropbox patterns\n */\nexport const FileList: React.FC<FileListProps> = ({\n  files,\n  showProgress,\n  showActions,\n  onRemove,\n  onCancel,\n  onRetry\n}) => {\n  const { t } = useLayeraTranslation();\n  const { theme } = useTheme();\n\n  if (files.length === 0) {\n    return (\n      <Card className={`p-6 text-center ${theme === 'dark' ? 'bg-gray-800' : 'bg-gray-50'}`}>\n        <UploadIcon className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n        <Typography size=\"base\" className=\"text-gray-500\">\n          {t('file-upload.no-files')}\n        </Typography>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      {files.map((file) => (\n        <FileListItem\n          key={file.id}\n          file={file}\n          showProgress={showProgress}\n          showActions={showActions}\n          onRemove={onRemove}\n          onCancel={onCancel}\n          onRetry={onRetry}\n        />\n      ))}\n    </div>\n  );\n};\n\ninterface FileListItemProps {\n  file: FileUploadItem;\n  showProgress: boolean;\n  showActions: boolean;\n  onRemove: (fileId: string) => void;\n  onCancel: (fileId: string) => void;\n  onRetry: (fileId: string) => void;\n}\n\nconst FileListItem: React.FC<FileListItemProps> = ({\n  file,\n  showProgress,\n  showActions,\n  onRemove,\n  onCancel,\n  onRetry\n}) => {\n  const { t } = useLayeraTranslation();\n  const { theme } = useTheme();\n\n  const getStatusIcon = () => {\n    switch (file.status) {\n      case 'completed':\n        return <UploadIcon className=\"w-5 h-5 text-green-500\" />;\n      case 'error':\n        return <CloseIcon className=\"w-5 h-5 text-red-500\" />;\n      case 'uploading':\n        return <UploadIcon className=\"w-5 h-5 text-blue-500 animate-pulse\" />;\n      case 'cancelled':\n        return <CloseIcon className=\"w-5 h-5 text-gray-500\" />;\n      case 'paused':\n        return <UploadIcon className=\"w-5 h-5 text-yellow-500\" />;\n      default:\n        return <UploadIcon className=\"w-5 h-5 text-gray-400\" />;\n    }\n  };\n\n  const getStatusText = () => {\n    switch (file.status) {\n      case 'completed':\n        return t('file-upload.status.completed');\n      case 'error':\n        return file.error || t('file-upload.status.error');\n      case 'uploading':\n        return t('file-upload.status.uploading');\n      case 'cancelled':\n        return t('file-upload.status.cancelled');\n      case 'paused':\n        return t('file-upload.status.paused');\n      default:\n        return t('file-upload.status.pending');\n    }\n  };\n\n  const getProgressBarColor = () => {\n    switch (file.status) {\n      case 'completed':\n        return 'bg-green-500';\n      case 'error':\n        return 'bg-red-500';\n      case 'uploading':\n        return 'bg-blue-500';\n      case 'cancelled':\n        return 'bg-gray-500';\n      case 'paused':\n        return 'bg-yellow-500';\n      default:\n        return 'bg-gray-300';\n    }\n  };\n\n  const formatUploadSpeed = (speed?: number): string => {\n    if (!speed) return '';\n    return `${formatBytes(speed)}/s`;\n  };\n\n  const formatETA = (eta?: number): string => {\n    if (!eta) return '';\n    const minutes = Math.floor(eta / 60);\n    const seconds = Math.floor(eta % 60);\n    return minutes > 0 ? `${minutes}:${seconds.toString().padStart(2, '0')}` : `${seconds}s`;\n  };\n\n  return (\n    <Card className={`p-4 ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'}`}>\n      <div className=\"flex items-center justify-between\">\n        {/* File Info */}\n        <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n          <div className=\"flex-shrink-0\">\n            {getStatusIcon()}\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center justify-between\">\n              <Typography size=\"base\" weight=\"medium\" className=\"truncate\">\n                {file.file.name}\n              </Typography>\n              <Typography size=\"sm\" className=\"text-gray-500 ml-2\">\n                {formatBytes(file.file.size)}\n              </Typography>\n            </div>\n\n            <div className=\"flex items-center space-x-4 mt-1\">\n              <Typography size=\"sm\" className=\"text-gray-500\">\n                {getStatusText()}\n              </Typography>\n\n              {file.status === 'uploading' && file.speed && (\n                <>\n                  <Typography size=\"sm\" className=\"text-gray-500\">\n                    {formatUploadSpeed(file.speed)}\n                  </Typography>\n                  {file.eta && (\n                    <Typography size=\"sm\" className=\"text-gray-500\">\n                      {t('file-upload.eta', { time: formatETA(file.eta) })}\n                    </Typography>\n                  )}\n                </>\n              )}\n            </div>\n\n            {/* Progress Bar */}\n            {showProgress && (\n              <div className={`w-full bg-gray-200 rounded-full h-2 mt-2 ${theme === 'dark' ? 'bg-gray-600' : 'bg-gray-200'}`}>\n                <div\n                  className={`h-2 rounded-full transition-all duration-300 ${getProgressBarColor()}`}\n                  style={{ width: `${Math.min(file.progress, 100)}%` }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Actions */}\n        {showActions && (\n          <div className=\"flex items-center space-x-2 ml-4\">\n            {file.status === 'uploading' && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => onCancel(file.id)}\n                className=\"text-red-600 hover:text-red-700\"\n              >\n                <CloseIcon className=\"w-4 h-4\" />\n              </Button>\n            )}\n\n            {file.status === 'error' && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => onRetry(file.id)}\n                className=\"text-blue-600 hover:text-blue-700\"\n              >\n                <RefreshIcon className=\"w-4 h-4\" />\n              </Button>\n            )}\n\n            {(file.status === 'completed' || file.status === 'error' || file.status === 'cancelled') && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => onRemove(file.id)}\n                className=\"text-gray-600 hover:text-gray-700\"\n              >\n                <DeleteIcon className=\"w-4 h-4\" />\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n};","import type { SupportedFileType, FileValidationResult, FileUploadConfig } from '../types';\r\n// import { CONFIG } from '@layera/constants'; // Will use constants directly for now\r\n\r\n/**\r\n * File validation utilities για @layera/file-upload\r\n * Enterprise-grade validation με comprehensive error handling\r\n */\r\n\r\n/**\r\n * Validates a single file against configuration\r\n */\r\nexport const validateFile = (\r\n  file: File,\r\n  config: FileUploadConfig\r\n): FileValidationResult => {\r\n  const errors: string[] = [];\r\n  const warnings: string[] = [];\r\n\r\n  // File size validation\r\n  if (file.size > config.maxFileSize) {\r\n    errors.push(`File size (${formatBytes(file.size)}) exceeds maximum allowed size (${formatBytes(config.maxFileSize)})`);\r\n  }\r\n\r\n  // File type validation\r\n  if (!config.acceptedTypes.includes(file.type as SupportedFileType)) {\r\n    errors.push(`File type \"${file.type}\" is not supported`);\r\n  }\r\n\r\n  // File name validation\r\n  if (!isValidFileName(file.name)) {\r\n    errors.push('File name contains invalid characters');\r\n  }\r\n\r\n  // Security checks\r\n  const securityCheck = performSecurityValidation(file);\r\n  if (!securityCheck.isValid) {\r\n    errors.push(...securityCheck.errors);\r\n  }\r\n\r\n  // Performance warnings\r\n  const largeFileThreshold = 50 * 1024 * 1024; // 50MB\r\n  if (file.size > largeFileThreshold) {\r\n    warnings.push('Large file detected - upload may take longer');\r\n  }\r\n\r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors,\r\n    warnings\r\n  };\r\n};\r\n\r\n/**\r\n * Validates multiple files against total size limits\r\n */\r\nexport const validateFileList = (\r\n  files: File[],\r\n  config: FileUploadConfig\r\n): FileValidationResult => {\r\n  const errors: string[] = [];\r\n  const warnings: string[] = [];\r\n\r\n  // Total size validation\r\n  const totalSize = files.reduce((sum, file) => sum + file.size, 0);\r\n  if (totalSize > config.maxTotalSize) {\r\n    errors.push(`Total size (${formatBytes(totalSize)}) exceeds maximum allowed (${formatBytes(config.maxTotalSize)})`);\r\n  }\r\n\r\n  // Individual file validation\r\n  files.forEach((file, index) => {\r\n    const fileValidation = validateFile(file, config);\r\n    if (!fileValidation.isValid) {\r\n      errors.push(`File ${index + 1} (${file.name}): ${fileValidation.errors.join(', ')}`);\r\n    }\r\n    warnings.push(...fileValidation.warnings);\r\n  });\r\n\r\n  // Duplicate file names\r\n  const duplicates = findDuplicateFileNames(files);\r\n  if (duplicates.length > 0) {\r\n    warnings.push(`Duplicate file names detected: ${duplicates.join(', ')}`);\r\n  }\r\n\r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors,\r\n    warnings\r\n  };\r\n};\r\n\r\n/**\r\n * Validates file name for security and compatibility\r\n */\r\nconst isValidFileName = (fileName: string): boolean => {\r\n  // Check for dangerous characters\r\n  const dangerousChars = /[<>:\"|?*\\x00-\\x1f]/;\r\n  if (dangerousChars.test(fileName)) {\r\n    return false;\r\n  }\r\n\r\n  // Check for reserved names (Windows)\r\n  const reservedNames = /^(CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])(\\.|$)/i;\r\n  if (reservedNames.test(fileName)) {\r\n    return false;\r\n  }\r\n\r\n  // Check length\r\n  const maxFileNameLength = 255; // Standard filesystem limit\r\n  if (fileName.length > maxFileNameLength) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Performs security validation on file\r\n */\r\nconst performSecurityValidation = (file: File): FileValidationResult => {\r\n  const errors: string[] = [];\r\n\r\n  // Check file extension vs MIME type consistency\r\n  const extension = getFileExtension(file.name);\r\n  const expectedMimeTypes = getExpectedMimeTypes(extension);\r\n\r\n  if (expectedMimeTypes.length > 0 && !expectedMimeTypes.includes(file.type)) {\r\n    errors.push(`File extension \"${extension}\" does not match MIME type \"${file.type}\"`);\r\n  }\r\n\r\n  // Check for executable files\r\n  const executableExtensions = ['.exe', '.bat', '.cmd', '.scr', '.pif', '.com', '.dll'];\r\n  if (executableExtensions.some(ext => file.name.toLowerCase().endsWith(ext))) {\r\n    errors.push('Executable files are not allowed');\r\n  }\r\n\r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors,\r\n    warnings: []\r\n  };\r\n};\r\n\r\n/**\r\n * Gets file extension from filename\r\n */\r\nconst getFileExtension = (fileName: string): string => {\r\n  const lastDotIndex = fileName.lastIndexOf('.');\r\n  return lastDotIndex !== -1 ? fileName.substring(lastDotIndex) : '';\r\n};\r\n\r\n/**\r\n * Gets expected MIME types for file extension\r\n */\r\nconst getExpectedMimeTypes = (extension: string): string[] => {\r\n  const mimeMap: Record<string, string[]> = {\r\n    '.jpg': ['image/jpeg'],\r\n    '.jpeg': ['image/jpeg'],\r\n    '.png': ['image/png'],\r\n    '.gif': ['image/gif'],\r\n    '.pdf': ['application/pdf'],\r\n    '.txt': ['text/plain'],\r\n    '.csv': ['text/csv'],\r\n    '.json': ['application/json'],\r\n    '.xml': ['application/xml', 'text/xml'],\r\n    '.zip': ['application/zip'],\r\n    '.dxf': ['image/vnd.dxf', 'application/dxf']\r\n  };\r\n\r\n  return mimeMap[extension.toLowerCase()] || [];\r\n};\r\n\r\n/**\r\n * Finds duplicate file names in file list\r\n */\r\nconst findDuplicateFileNames = (files: File[]): string[] => {\r\n  const nameCount: Record<string, number> = {};\r\n  const duplicates: string[] = [];\r\n\r\n  files.forEach(file => {\r\n    nameCount[file.name] = (nameCount[file.name] || 0) + 1;\r\n  });\r\n\r\n  Object.entries(nameCount).forEach(([name, count]) => {\r\n    if (count > 1) {\r\n      duplicates.push(name);\r\n    }\r\n  });\r\n\r\n  return duplicates;\r\n};\r\n\r\n/**\r\n * Formats file size in human readable format\r\n */\r\nexport const formatBytes = (bytes: number, decimals: number = 2): string => {\r\n  if (bytes === 0) return '0 Bytes';\r\n\r\n  const k = 1024;\r\n  const dm = decimals < 0 ? 0 : decimals;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n};\r\n\r\n/**\r\n * Checks if file is an image\r\n */\r\nexport const isImageFile = (file: File): boolean => {\r\n  return file.type.startsWith('image/');\r\n};\r\n\r\n/**\r\n * Checks if file preview is supported\r\n */\r\nexport const isPreviewSupported = (file: File): boolean => {\r\n  const supportedTypes = [\r\n    'image/jpeg', 'image/png', 'image/gif', 'image/webp',\r\n    'text/plain', 'application/json', 'text/csv'\r\n  ];\r\n\r\n  return supportedTypes.includes(file.type);\r\n};","import React, { useState, useEffect } from 'react';\nimport { useLayeraTranslation } from '@layera/i18n';\nimport { BaseCard as Card } from '@layera/cards';\nimport { Text as Typography } from '@layera/typography';\nimport { Button } from '@layera/buttons';\nimport { UploadIcon, CloseIcon } from '@layera/icons';\nimport { useTheme } from '@layera/theme-switcher';\nimport type { FilePreviewProps } from '../types';\nimport { formatBytes, isImageFile, isPreviewSupported } from '../utils/fileValidation';\n\n/**\n * File preview component με thumbnail και metadata display\n * Βασισμένο σε Google Drive, Dropbox patterns\n */\nexport const FilePreview: React.FC<FilePreviewProps> = ({\n  file,\n  showPreview,\n  onRemove,\n  onClick\n}) => {\n  const { t } = useLayeraTranslation();\n  const { theme } = useTheme();\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const [previewError, setPreviewError] = useState(false);\n\n  useEffect(() => {\n    if (!showPreview || !isImageFile(file.file)) {\n      return;\n    }\n\n    const url = URL.createObjectURL(file.file);\n    setPreviewUrl(url);\n\n    return () => {\n      URL.revokeObjectURL(url);\n    };\n  }, [file.file, showPreview]);\n\n  const getFileIcon = () => {\n    // Use UploadIcon as a generic file icon for now\n    return <UploadIcon className=\"w-8 h-8\" />;\n  };\n\n  const getStatusColor = () => {\n    switch (file.status) {\n      case 'completed':\n        return 'border-green-500';\n      case 'error':\n        return 'border-red-500';\n      case 'uploading':\n        return 'border-blue-500';\n      case 'cancelled':\n        return 'border-gray-500';\n      case 'paused':\n        return 'border-yellow-500';\n      default:\n        return theme === 'dark' ? 'border-gray-600' : 'border-gray-300';\n    }\n  };\n\n  const getProgressOverlay = () => {\n    if (file.status !== 'uploading') return null;\n\n    return (\n      <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\n        <div className=\"text-center text-white\">\n          <UploadIcon className=\"w-6 h-6 mx-auto mb-2 animate-pulse\" />\n          <Typography variant=\"caption\" className=\"text-white\">\n            {Math.round(file.progress)}%\n          </Typography>\n        </div>\n      </div>\n    );\n  };\n\n  const handleImageError = () => {\n    setPreviewError(true);\n    setPreviewUrl(null);\n  };\n\n  const handleClick = () => {\n    if (onClick) {\n      onClick(file);\n    }\n  };\n\n  return (\n    <Card className={`relative overflow-hidden transition-all duration-200 ${getStatusColor()} border-2 ${\n      onClick ? 'cursor-pointer hover:shadow-lg' : ''\n    }`}>\n      <div onClick={handleClick} className=\"relative\">\n        {/* Preview Area */}\n        <div className=\"aspect-square bg-gray-50 dark:bg-gray-800 flex items-center justify-center\">\n          {showPreview && previewUrl && !previewError ? (\n            <img\n              src={previewUrl}\n              alt={file.file.name}\n              className=\"w-full h-full object-cover\"\n              onError={handleImageError}\n            />\n          ) : (\n            <div className={`text-gray-400 ${theme === 'dark' ? 'text-gray-500' : 'text-gray-400'}`}>\n              {getFileIcon()}\n            </div>\n          )}\n\n          {/* Progress Overlay */}\n          {getProgressOverlay()}\n\n          {/* Status Badge */}\n          <div className=\"absolute top-2 left-2\">\n            {file.status === 'completed' && (\n              <div className=\"bg-green-500 text-white rounded-full p-1\">\n                <UploadIcon className=\"w-3 h-3\" />\n              </div>\n            )}\n            {file.status === 'error' && (\n              <div className=\"bg-red-500 text-white rounded-full p-1\">\n                <CloseIcon className=\"w-3 h-3\" />\n              </div>\n            )}\n            {file.status === 'uploading' && (\n              <div className=\"bg-blue-500 text-white rounded-full p-1\">\n                <UploadIcon className=\"w-3 h-3 animate-pulse\" />\n              </div>\n            )}\n          </div>\n\n          {/* Remove Button */}\n          <div className=\"absolute top-2 right-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={(e) => {\n                e.stopPropagation();\n                onRemove(file.id);\n              }}\n              className=\"bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-600 hover:text-red-600 border-0 p-1 w-6 h-6\"\n            >\n              <CloseIcon className=\"w-3 h-3\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* File Info */}\n        <div className=\"p-3\">\n          <Typography\n            variant=\"caption\"\n            className=\"font-medium truncate block mb-1\"\n            title={file.file.name}\n          >\n            {file.file.name}\n          </Typography>\n\n          <div className=\"flex items-center justify-between\">\n            <Typography variant=\"caption\" className=\"text-gray-500\">\n              {formatBytes(file.file.size)}\n            </Typography>\n\n            {file.status === 'uploading' && (\n              <Typography variant=\"caption\" className=\"text-blue-600\">\n                {Math.round(file.progress)}%\n              </Typography>\n            )}\n\n            {file.status === 'error' && (\n              <Typography variant=\"caption\" className=\"text-red-600\" title={file.error}>\n                {t('file-upload.status.error')}\n              </Typography>\n            )}\n          </div>\n\n          {/* File Type Badge */}\n          <div className=\"mt-2\">\n            <span className={`inline-block px-2 py-1 text-xs rounded ${\n              theme === 'dark'\n                ? 'bg-gray-700 text-gray-300'\n                : 'bg-gray-100 text-gray-600'\n            }`}>\n              {file.file.type || t('file-upload.unknown-type')}\n            </span>\n          </div>\n\n          {/* Upload Speed & ETA */}\n          {file.status === 'uploading' && file.speed && (\n            <div className=\"mt-2 space-y-1\">\n              <div className=\"flex items-center justify-between text-xs text-gray-500\">\n                <span>{formatBytes(file.speed)}/s</span>\n                {file.eta && (\n                  <span>\n                    {Math.floor(file.eta / 60) > 0\n                      ? `${Math.floor(file.eta / 60)}:${Math.floor(file.eta % 60).toString().padStart(2, '0')}`\n                      : `${Math.floor(file.eta)}s`\n                    }\n                  </span>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </Card>\n  );\n};","import type {\r\n  FileUploadItem,\r\n  FileUploadConfig,\r\n  ChunkUploadProgress,\r\n  UploadEventCallbacks\r\n} from '../types';\r\n// import { CONFIG } from '@layera/constants'; // Not needed for now\r\n\r\n/**\r\n * Enterprise upload engine με chunked upload support\r\n * Βασισμένο σε Google Drive, Dropbox patterns\r\n */\r\n\r\nexport class UploadEngine {\r\n  private config: FileUploadConfig;\r\n  private callbacks: UploadEventCallbacks;\r\n  private activeUploads: Map<string, AbortController> = new Map();\r\n  private uploadQueue: FileUploadItem[] = [];\r\n  private concurrentUploads: number = 0;\r\n\r\n  constructor(config: FileUploadConfig, callbacks: UploadEventCallbacks = {}) {\r\n    this.config = config;\r\n    this.callbacks = callbacks;\r\n  }\r\n\r\n  /**\r\n   * Adds file to upload queue\r\n   */\r\n  public addFile(file: FileUploadItem): void {\r\n    this.uploadQueue.push(file);\r\n\r\n    if (this.config.autoUpload) {\r\n      this.processQueue();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Starts upload for specific file\r\n   */\r\n  public async uploadFile(fileItem: FileUploadItem): Promise<void> {\r\n    if (this.concurrentUploads >= this.config.maxConcurrent) {\r\n      return; // Will be processed when slot becomes available\r\n    }\r\n\r\n    this.concurrentUploads++;\r\n    const abortController = new AbortController();\r\n    this.activeUploads.set(fileItem.id, abortController);\r\n\r\n    try {\r\n      fileItem.status = 'uploading';\r\n      fileItem.startTime = Date.now();\r\n      this.callbacks.onUploadStart?.(fileItem);\r\n\r\n      if (this.config.enableChunking && fileItem.file.size > this.config.chunkSize) {\r\n        await this.uploadFileChunked(fileItem, abortController.signal);\r\n      } else {\r\n        await this.uploadFileStandard(fileItem, abortController.signal);\r\n      }\r\n\r\n      fileItem.status = 'completed';\r\n      fileItem.completionTime = Date.now();\r\n      this.callbacks.onUploadComplete?.(fileItem);\r\n\r\n    } catch (error) {\r\n      if (abortController.signal.aborted) {\r\n        fileItem.status = 'cancelled';\r\n        this.callbacks.onUploadCancel?.(fileItem);\r\n      } else {\r\n        fileItem.status = 'error';\r\n        fileItem.error = error instanceof Error ? error.message : 'Upload failed';\r\n        this.callbacks.onUploadError?.(fileItem, fileItem.error);\r\n      }\r\n    } finally {\r\n      this.activeUploads.delete(fileItem.id);\r\n      this.concurrentUploads--;\r\n      this.processQueue(); // Process next file in queue\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Standard upload για small files\r\n   */\r\n  private async uploadFileStandard(\r\n    fileItem: FileUploadItem,\r\n    signal: AbortSignal\r\n  ): Promise<void> {\r\n    const formData = new FormData();\r\n    formData.append('file', fileItem.file);\r\n    formData.append('filename', fileItem.file.name);\r\n\r\n    const xhr = new XMLHttpRequest();\r\n\r\n    // Track upload progress\r\n    xhr.upload.addEventListener('progress', (event) => {\r\n      if (event.lengthComputable) {\r\n        const progress = (event.loaded / event.total) * 100;\r\n        fileItem.progress = progress;\r\n\r\n        const chunkProgress: ChunkUploadProgress = {\r\n          currentChunk: 1,\r\n          totalChunks: 1,\r\n          chunkBytesUploaded: event.loaded,\r\n          totalBytesUploaded: event.loaded,\r\n          totalFileSize: event.total\r\n        };\r\n\r\n        this.calculateUploadSpeed(fileItem, event.loaded);\r\n        this.callbacks.onUploadProgress?.(fileItem, chunkProgress);\r\n      }\r\n    });\r\n\r\n    // Handle abort signal\r\n    signal.addEventListener('abort', () => {\r\n      xhr.abort();\r\n    });\r\n\r\n    return new Promise<void>((resolve, reject) => {\r\n      xhr.onload = () => {\r\n        if (xhr.status >= 200 && xhr.status < 300) {\r\n          fileItem.response = xhr.response;\r\n          resolve();\r\n        } else {\r\n          reject(new Error(`Upload failed with status ${xhr.status}`));\r\n        }\r\n      };\r\n\r\n      xhr.onerror = () => {\r\n        reject(new Error('Network error occurred'));\r\n      };\r\n\r\n      xhr.open('POST', this.config.uploadUrl);\r\n\r\n      // Add custom headers\r\n      if (this.config.headers) {\r\n        Object.entries(this.config.headers).forEach(([key, value]) => {\r\n          xhr.setRequestHeader(key, value);\r\n        });\r\n      }\r\n\r\n      xhr.send(formData);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Chunked upload για large files\r\n   */\r\n  private async uploadFileChunked(\r\n    fileItem: FileUploadItem,\r\n    signal: AbortSignal\r\n  ): Promise<void> {\r\n    const file = fileItem.file;\r\n    const chunkSize = this.config.chunkSize;\r\n    const totalChunks = Math.ceil(file.size / chunkSize);\r\n    let uploadedBytes = 0;\r\n\r\n    // Initialize upload session\r\n    const sessionId = await this.initializeUploadSession(fileItem);\r\n\r\n    for (let chunkIndex = 0; chunkIndex < totalChunks; chunkIndex++) {\r\n      if (signal.aborted) {\r\n        throw new Error('Upload cancelled');\r\n      }\r\n\r\n      const start = chunkIndex * chunkSize;\r\n      const end = Math.min(start + chunkSize, file.size);\r\n      const chunk = file.slice(start, end);\r\n\r\n      await this.uploadChunk(fileItem, chunk, chunkIndex, totalChunks, sessionId);\r\n\r\n      uploadedBytes += chunk.size;\r\n      fileItem.progress = (uploadedBytes / file.size) * 100;\r\n\r\n      const chunkProgress: ChunkUploadProgress = {\r\n        currentChunk: chunkIndex + 1,\r\n        totalChunks,\r\n        chunkBytesUploaded: chunk.size,\r\n        totalBytesUploaded: uploadedBytes,\r\n        totalFileSize: file.size\r\n      };\r\n\r\n      this.calculateUploadSpeed(fileItem, uploadedBytes);\r\n      this.callbacks.onUploadProgress?.(fileItem, chunkProgress);\r\n    }\r\n\r\n    // Finalize upload\r\n    await this.finalizeUploadSession(fileItem, sessionId);\r\n  }\r\n\r\n  /**\r\n   * Initializes chunked upload session\r\n   */\r\n  private async initializeUploadSession(fileItem: FileUploadItem): Promise<string> {\r\n    const response = await fetch(`${this.config.uploadUrl}/init`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...this.config.headers\r\n      },\r\n      body: JSON.stringify({\r\n        filename: fileItem.file.name,\r\n        fileSize: fileItem.file.size,\r\n        mimeType: fileItem.file.type\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to initialize upload session');\r\n    }\r\n\r\n    const data = await response.json() as { sessionId: string };\r\n    return data.sessionId;\r\n  }\r\n\r\n  /**\r\n   * Uploads a single chunk\r\n   */\r\n  private async uploadChunk(\r\n    fileItem: FileUploadItem,\r\n    chunk: Blob,\r\n    chunkIndex: number,\r\n    totalChunks: number,\r\n    sessionId: string\r\n  ): Promise<void> {\r\n    const formData = new FormData();\r\n    formData.append('chunk', chunk);\r\n    formData.append('chunkIndex', chunkIndex.toString());\r\n    formData.append('totalChunks', totalChunks.toString());\r\n    formData.append('sessionId', sessionId);\r\n\r\n    const response = await fetch(`${this.config.uploadUrl}/chunk`, {\r\n      method: 'POST',\r\n      headers: this.config.headers || {},\r\n      body: formData\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to upload chunk ${chunkIndex + 1}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finalizes chunked upload session\r\n   */\r\n  private async finalizeUploadSession(fileItem: FileUploadItem, sessionId: string): Promise<void> {\r\n    const response = await fetch(`${this.config.uploadUrl}/finalize`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...this.config.headers\r\n      },\r\n      body: JSON.stringify({\r\n        sessionId,\r\n        filename: fileItem.file.name\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to finalize upload');\r\n    }\r\n\r\n    fileItem.response = await response.json();\r\n  }\r\n\r\n  /**\r\n   * Calculates upload speed and ETA\r\n   */\r\n  private calculateUploadSpeed(fileItem: FileUploadItem, bytesUploaded: number): void {\r\n    if (!fileItem.startTime) return;\r\n\r\n    const elapsed = (Date.now() - fileItem.startTime) / 1000; // seconds\r\n    fileItem.speed = bytesUploaded / elapsed; // bytes per second\r\n\r\n    if (fileItem.speed > 0) {\r\n      const remainingBytes = fileItem.file.size - bytesUploaded;\r\n      fileItem.eta = remainingBytes / fileItem.speed; // seconds\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Processes upload queue\r\n   */\r\n  private processQueue(): void {\r\n    while (this.uploadQueue.length > 0 && this.concurrentUploads < this.config.maxConcurrent) {\r\n      const fileItem = this.uploadQueue.shift();\r\n      if (fileItem && fileItem.status === 'idle') {\r\n        this.uploadFile(fileItem);\r\n      }\r\n    }\r\n\r\n    // Check if all uploads are complete\r\n    if (this.uploadQueue.length === 0 && this.concurrentUploads === 0) {\r\n      this.callbacks.onAllUploadsComplete?.([]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cancels upload for specific file\r\n   */\r\n  public cancelUpload(fileId: string): void {\r\n    const abortController = this.activeUploads.get(fileId);\r\n    if (abortController) {\r\n      abortController.abort();\r\n    }\r\n\r\n    // Remove from queue if not started yet\r\n    this.uploadQueue = this.uploadQueue.filter(item => item.id !== fileId);\r\n  }\r\n\r\n  /**\r\n   * Pauses upload (για future implementation)\r\n   */\r\n  public pauseUpload(fileId: string): void {\r\n    // Implementation for pausable uploads\r\n    this.cancelUpload(fileId);\r\n  }\r\n\r\n  /**\r\n   * Clears all uploads and resets engine\r\n   */\r\n  public clearAll(): void {\r\n    // Cancel all active uploads\r\n    this.activeUploads.forEach(controller => controller.abort());\r\n    this.activeUploads.clear();\r\n\r\n    // Clear queue\r\n    this.uploadQueue = [];\r\n    this.concurrentUploads = 0;\r\n  }\r\n}","/**\r\n * @layera/file-upload\r\n * Enterprise-grade file upload system για Layera ecosystem\r\n *\r\n * Features:\r\n * - Drag & Drop interface με visual feedback\r\n * - Chunked upload για large files (Google Drive/Dropbox style)\r\n * - Multiple file support με concurrent uploading\r\n * - Real-time progress tracking με speed & ETA\r\n * - File validation & security checks\r\n * - Preview support για images\r\n * - Error handling & retry functionality\r\n * - Full i18n support (Greek/English)\r\n * - Dark/Light theme support\r\n * - Enterprise-grade TypeScript typing\r\n */\r\n\r\n// Main Components\r\nexport { FileUploader } from './components/FileUploader';\r\nexport { DragDropZone } from './components/DragDropZone';\r\nexport { FileList } from './components/FileList';\r\nexport { FilePreview } from './components/FilePreview';\r\n\r\n// Utilities\r\nexport { UploadEngine } from './utils/uploadEngine';\r\nexport { validateFile, validateFileList, formatBytes, isImageFile, isPreviewSupported } from './utils/fileValidation';\r\n\r\n// Types\r\nexport type {\r\n  FileUploadStatus,\r\n  SupportedFileType,\r\n  FileUploadConfig,\r\n  FileUploadItem,\r\n  ChunkUploadProgress,\r\n  FileValidationResult,\r\n  UploadEventCallbacks,\r\n  DragDropZoneProps,\r\n  FilePreviewProps,\r\n  FileListProps,\r\n  FileUploaderProps\r\n} from './types';\r\n\r\n// Default configurations\r\nexport const DEFAULT_UPLOAD_CONFIG = {\r\n  maxFileSize: 100 * 1024 * 1024, // 100MB\r\n  maxTotalSize: 500 * 1024 * 1024, // 500MB\r\n  enableChunking: true,\r\n  chunkSize: 1024 * 1024, // 1MB chunks\r\n  maxConcurrent: 3,\r\n  autoUpload: false,\r\n  enableDragDrop: true,\r\n  acceptedTypes: [\r\n    'image/jpeg', 'image/png', 'image/gif', 'image/webp',\r\n    'application/pdf',\r\n    'text/plain', 'text/csv',\r\n    'application/vnd.ms-excel',\r\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n    'application/zip'\r\n  ]\r\n};"],"mappings":"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","names":["useState","useCallback","useEffect","useLayeraTranslation","Typography","Button","UploadIcon","DeleteIcon","useTheme","useLayeraTranslation","Card","Typography","UploadIcon","useTheme","Fragment","jsx","jsxs","useLayeraTranslation","useTheme","Card","UploadIcon","Typography","useState","useLayeraTranslation","Card","Typography","Button","UploadIcon","CloseIcon","useTheme","jsx","jsxs","useLayeraTranslation","useTheme","useState","UploadIcon","Typography","Card","CloseIcon","Button","jsx","jsxs","useLayeraTranslation","useTheme","useState","useEffect","useCallback","Typography","Button","UploadIcon","DeleteIcon"]}