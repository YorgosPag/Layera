{"version":3,"sources":["../src/index.ts","../src/DeviceLayoutRenderer.tsx","../src/ResponsiveMapLayout.tsx"],"sourcesContent":["/**\r\n * @layera/device-layouts - Enterprise Device Layout LEGO Package\r\n *\r\n * Single source of truth για device-specific layout orchestration στο Layera ecosystem.\r\n * Εξαχθέν από GeoMapNew.tsx για reusability και modularity.\r\n */\r\n\r\nexport * from './types';\r\nexport * from './DeviceLayoutRenderer';\r\nexport * from './ResponsiveMapLayout';\r\n\r\n// Convenience re-exports για common usage patterns\r\nexport { DeviceLayoutRenderer as DeviceRenderer } from './DeviceLayoutRenderer';\r\nexport { ResponsiveMapLayout as MapLayout } from './ResponsiveMapLayout';","/**\r\n * DeviceLayoutRenderer.tsx - Enterprise Device Layout Orchestrator\r\n *\r\n * Single source of truth για device-specific rendering στο Layera ecosystem.\r\n * Αντικαθιστά duplicate device rendering logic με unified API.\r\n */\r\n\r\nimport React from 'react';\r\nimport { DeviceLayoutRendererProps, ResponsiveLayoutConfig, DeviceType } from './types';\r\n\r\nconst DEFAULT_LAYOUT_CONFIG: ResponsiveLayoutConfig = {\r\n  iphone: {\r\n    width: 430,\r\n    height: 932,\r\n    containerStyle: {\r\n      position: 'relative',\r\n      overflow: 'hidden'\r\n    }\r\n  },\r\n  tablet: {\r\n    containerStyle: {\r\n      width: '100%',\r\n      height: '100vh',\r\n      position: 'relative'\r\n    },\r\n    containerClassName: 'tablet-map-container'\r\n  },\r\n  desktop: {\r\n    containerStyle: {\r\n      width: '100%',\r\n      height: '100vh',\r\n      position: 'relative'\r\n    }\r\n  },\r\n  mobile: {\r\n    containerStyle: {\r\n      width: '100%',\r\n      height: '100vh',\r\n      position: 'relative'\r\n    },\r\n    containerClassName: 'mobile-map-container'\r\n  }\r\n};\r\n\r\nexport const DeviceLayoutRenderer: React.FC<DeviceLayoutRendererProps> = ({\r\n  deviceType: propDeviceType,\r\n  forceDeviceType,\r\n  layoutConfig = {},\r\n  commonProps = {},\r\n  components = {} as DeviceLayoutRendererProps['components'],\r\n  navigation,\r\n  navigationHandlers,\r\n  showCategoryElements = false,\r\n  fab\r\n}) => {\r\n  // Auto-detect device type αν δεν δίνεται - STABILIZED\r\n  const detectedDeviceType = React.useMemo((): DeviceType => {\r\n    if (forceDeviceType) {\r\n      return forceDeviceType;\r\n    }\r\n\r\n    if (propDeviceType) {\r\n      return propDeviceType;\r\n    }\r\n\r\n    // Fallback auto-detection (θα μπορούσε να χρησιμοποιήσει @layera/device-detection)\r\n    if (typeof window === 'undefined') {\r\n      return 'desktop';\r\n    }\r\n\r\n    // Χρησιμοποιώ σταθερή τιμή για να αποφύγω infinite re-renders\r\n    const width = window.innerWidth;\r\n    if (width <= 430) {\r\n      return 'mobile';\r\n    } else if (width <= 768) {\r\n      return 'tablet';\r\n    } else {\r\n      return 'desktop';\r\n    }\r\n  }, [propDeviceType, forceDeviceType]);\r\n\r\n  // Merge configuration\r\n  const finalConfig = {\r\n    ...DEFAULT_LAYOUT_CONFIG,\r\n    ...layoutConfig\r\n  };\r\n\r\n  // iPhone rendering\r\n  // ΣΗΜΑΝΤΙΚΟ: Αφαιρέθηκαν τα console.log για αποφυγή infinite render loops\r\n  // που προκαλούσαν εξαφάνιση του FAB στο iPhone 14 Pro Max\r\n  if (detectedDeviceType === 'iphone') {\r\n    const config = finalConfig.iphone;\r\n    const iPhoneComponents = components?.iphone || {};\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          width: config.width,\r\n          height: config.height,\r\n          ...config.containerStyle\r\n        }}\r\n      >\r\n        {/* Main device component */}\r\n        {iPhoneComponents.map && React.createElement(iPhoneComponents.map, {\r\n          ...commonProps,\r\n          isIPhone14ProMaxDevice: true\r\n        })}\r\n\r\n        {/* Conditional stepper rendering */}\r\n        {showCategoryElements && iPhoneComponents.stepper && navigation && (\r\n          React.createElement(iPhoneComponents.stepper, {\r\n            currentStep: navigation.currentStep,\r\n            totalSteps: navigation.totalSteps,\r\n            stepIndex: navigation.stepIndex,\r\n            selectedCategory: navigation.selectedCategory,\r\n            onNext: navigationHandlers?.onNext,\r\n            onPrevious: navigationHandlers?.onPrevious,\r\n            onReset: navigationHandlers?.onReset,\r\n            onStepClick: navigationHandlers?.onStepClick,\r\n            canGoNext: navigation.canGoNext,\r\n            canGoPrevious: navigation.canGoBack\r\n          })\r\n        )}\r\n\r\n        {/* Conditional category rendering */}\r\n        {showCategoryElements && iPhoneComponents.category && navigation && (\r\n          React.createElement(iPhoneComponents.category, {\r\n            isVisible: showCategoryElements,\r\n            currentStepId: navigation.currentStep,\r\n            onNext: async (_category: unknown) => {\r\n              // This logic θα μπορούσε να περάσει σαν prop\r\n              // Αφαιρέθηκαν console.log/error για αποφυγή render loops\r\n              try {\r\n                // await navigation.selectCategory(_category);\r\n                // Category selection logic εδώ\r\n              } catch (error) {\r\n                // Error handling χωρίς console output\r\n              }\r\n            }\r\n          })\r\n        )}\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Desktop rendering\r\n  if (detectedDeviceType === 'desktop') {\r\n    const config = finalConfig.desktop;\r\n    const desktopComponents = components?.desktop || {};\r\n\r\n    return (\r\n      <div style={config.containerStyle}>\r\n        {/* Desktop-specific component */}\r\n        {desktopComponents.map && React.createElement(desktopComponents.map, commonProps)}\r\n\r\n        {/* Common MapContainer component */}\r\n        {commonProps && (\r\n          <div>\r\n            {/* MapContainer θα rendered εδώ */}\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Tablet rendering\r\n  if (detectedDeviceType === 'tablet') {\r\n    const config = finalConfig.tablet;\r\n    const tabletComponents = components?.tablet || {};\r\n\r\n    return (\r\n      <div\r\n        className={config.containerClassName}\r\n        style={config.containerStyle}\r\n      >\r\n        {/* Tablet-specific component */}\r\n        {tabletComponents.map && React.createElement(tabletComponents.map, commonProps)}\r\n\r\n        {/* Common MapContainer component */}\r\n        {commonProps && (\r\n          <div>\r\n            {/* MapContainer θα rendered εδώ */}\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Mobile fallback rendering\r\n  const config = finalConfig.mobile;\r\n  return (\r\n    <div\r\n      className={config.containerClassName}\r\n      style={config.containerStyle}\r\n    >\r\n      {/* Common MapContainer component */}\r\n      {commonProps && (\r\n        <div>\r\n          {/* MapContainer θα rendered εδώ */}\r\n        </div>\r\n      )}\r\n\r\n      {/* FAB rendering */}\r\n      {fab && !fab.hidden && fab.component}\r\n    </div>\r\n  );\r\n};","/**\r\n * ResponsiveMapLayout.tsx - High-Level Responsive Map Layout Component\r\n *\r\n * Simplified API για common map layout patterns.\r\n * Wrapper γύρω από το DeviceLayoutRenderer για εύκολη χρήση.\r\n */\r\n\r\nimport React from 'react';\r\nimport { DeviceLayoutRenderer } from './DeviceLayoutRenderer';\r\nimport { DeviceType, MapComponentProps, StepperComponentProps, CategoryComponentProps } from './types';\r\n\r\nexport interface ResponsiveMapLayoutProps {\r\n  /** Auto-detected ή forced device type */\r\n  deviceType?: DeviceType;\r\n\r\n  /** Override auto-detection */\r\n  forceDeviceType?: DeviceType;\r\n\r\n  /** Map-related props */\r\n  map?: MapComponentProps;\r\n\r\n  /** Device-specific map components */\r\n  mapComponents?: {\r\n    iPhone?: React.ComponentType<MapComponentProps>;\r\n    tablet?: React.ComponentType<MapComponentProps>;\r\n    desktop?: React.ComponentType<MapComponentProps>;\r\n    mobile?: React.ComponentType<MapComponentProps>;\r\n  };\r\n\r\n  /** iPhone-specific components (stepper, category) */\r\n  iPhoneComponents?: {\r\n    stepper?: React.ComponentType<StepperComponentProps>;\r\n    category?: React.ComponentType<CategoryComponentProps>;\r\n  };\r\n\r\n  /** Navigation state */\r\n  navigation?: {\r\n    currentStep?: string;\r\n    totalSteps?: number;\r\n    stepIndex?: number;\r\n    selectedCategory?: string;\r\n    canGoNext?: boolean;\r\n    canGoBack?: boolean;\r\n  };\r\n\r\n  /** Navigation handlers */\r\n  navigationHandlers?: {\r\n    onNext?: () => void;\r\n    onPrevious?: () => void;\r\n    onReset?: () => void;\r\n    onStepClick?: (stepIndex: number) => void;\r\n    onNewEntryClick?: () => void;\r\n  };\r\n\r\n  /** Show category elements (για iPhone stepper) */\r\n  showCategoryElements?: boolean;\r\n\r\n  /** FAB configuration */\r\n  fab?: {\r\n    onClick?: () => void;\r\n    icon?: React.ReactNode;\r\n    hidden?: boolean;\r\n    deviceType?: DeviceType;\r\n  };\r\n\r\n}\r\n\r\nexport const ResponsiveMapLayout: React.FC<ResponsiveMapLayoutProps> = ({\r\n  deviceType,\r\n  forceDeviceType,\r\n  map = {},\r\n  mapComponents = {},\r\n  iPhoneComponents = {},\r\n  navigation,\r\n  navigationHandlers,\r\n  showCategoryElements = false,\r\n  fab\r\n}) => {\r\n  // Prepare FAB component αν υπάρχει\r\n  const fabComponent = fab && !fab.hidden ? (\r\n    <div\r\n      onClick={fab.onClick}\r\n      style={{\r\n        position: 'absolute',\r\n        right: '20px',\r\n        bottom: '20px',\r\n        width: 56,\r\n        height: 56,\r\n        borderRadius: '50%',\r\n        background: 'var(--layera-bg-success, #22C55E)',\r\n        border: '2px solid white',\r\n        boxShadow: '0 2px 8px rgba(0,0,0,0.2)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        cursor: 'pointer',\r\n        zIndex: 9999,\r\n        userSelect: 'none'\r\n      }}\r\n    >\r\n      {fab.icon}\r\n    </div>\r\n  ) : null;\r\n\r\n  return (\r\n    <DeviceLayoutRenderer\r\n      deviceType={deviceType}\r\n      forceDeviceType={forceDeviceType}\r\n      commonProps={map}\r\n      components={{\r\n        iphone: {\r\n          map: mapComponents.iPhone,\r\n          stepper: iPhoneComponents.stepper,\r\n          category: iPhoneComponents.category\r\n        },\r\n        tablet: {\r\n          map: mapComponents.tablet\r\n        },\r\n        desktop: {\r\n          map: mapComponents.desktop\r\n        },\r\n        mobile: {\r\n          map: mapComponents.mobile\r\n        }\r\n      }}\r\n      navigation={navigation}\r\n      navigationHandlers={navigationHandlers}\r\n      showCategoryElements={showCategoryElements}\r\n      fab={fab ? {\r\n        component: fabComponent,\r\n        onClick: fab.onClick,\r\n        icon: fab.icon,\r\n        hidden: fab.hidden\r\n      } : undefined}\r\n    />\r\n  );\r\n};"],"mappings":"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","names":["React","config","import_jsx_runtime"]}