{"version":3,"sources":["../../geo-mapping/src/services/fallbackBoundaries.ts","../src/components/AddressBreakdownCard.tsx","../../loading/src/components/Spinner/Spinner.tsx","../../loading/src/components/Skeleton/Skeleton.tsx","../../loading/src/components/SkeletonText/SkeletonText.tsx","../../loading/src/components/LoadingSpinner/LoadingSpinner.tsx","../../geo-mapping/src/utils/administrativeHierarchy.ts","../../geo-mapping/src/services/osmService.ts","../src/utils/addressParser.ts"],"sourcesContent":["/**\r\n * @layera/geo-mapping - Fallback Boundaries Configuration\r\n *\r\n * Type-safe configuration Î³Î¹Î± fallback polygons ÏŒÏ„Î±Î½ Ï„Î¿ OSM API Î±Ï€Î¿Ï„Ï…Î³Ï‡Î¬Î½ÎµÎ¹.\r\n * ÎšÎ‘ÎœÎ™Î‘ Ï‡ÏÎ®ÏƒÎ· any - TypeScript strict mode.\r\n */\r\n\r\nimport type { GeoJSONFeatureCollection } from '@layera/geo-core';\r\n\r\n/**\r\n * Fallback boundary configuration\r\n */\r\ninterface FallbackBoundary {\r\n  /** Unique keys Î³Î¹Î± matching (Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ variations) */\r\n  keys: string[];\r\n  /** Display name Î³Î¹Î± Ï„Î¿ boundary */\r\n  name: string;\r\n  /** Admin level Î±Ï€ÏŒ OSM */\r\n  adminLevel: string;\r\n  /** Polygon coordinates [lng, lat][] */\r\n  coordinates: number[][];\r\n}\r\n\r\n/**\r\n * Type-safe fallback boundaries registry\r\n *\r\n * Î£Î—ÎœÎ•Î™Î©Î£Î—: Î‘Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î® Î»ÏÏƒÎ·. Î¤Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ ÎµÎ¯Î½Î±Î¹ Î½Î± Î´Î¹Î¿ÏÎ¸Ï‰Î¸ÎµÎ¯\r\n * Ï„Î¿ OSM API integration Î³Î¹Î± ÎºÎ±Î¸Î¿Î»Î¹ÎºÎ® Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Ï€ÎµÏÎ¹Î¿Ï‡ÏÎ½.\r\n *\r\n * ÎœÎ­Ï‡ÏÎ¹ Ï„ÏŒÏ„Îµ, Ï€ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ Î¼ÏŒÎ½Î¿ critical Ï€ÎµÏÎ¹Î¿Ï‡Î­Ï‚ ÎµÎ´Ï.\r\n */\r\nconst FALLBACK_BOUNDARIES: FallbackBoundary[] = [\r\n  // Î˜ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ· - ÎšÎ­Î½Ï„ÏÎ¿\r\n  {\r\n    keys: ['Î˜ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ·Ï‚', 'Thessaloniki', 'Î˜ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ·'],\r\n    name: 'Î”Î®Î¼Î¿Ï‚ Î˜ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ·Ï‚',\r\n    adminLevel: '8',\r\n    coordinates: [\r\n      // Simplified boundary Î³Î¹Î± demo - ÏƒÏ„Î·Î½ Ï€ÏÎ¬Î¾Î· Î¸Î± Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Ï€Î»Î®ÏÎµÏ‚ polygon\r\n      [22.9352, 40.6401], [22.9600, 40.6401], [22.9600, 40.6250],\r\n      [22.9352, 40.6250], [22.9352, 40.6401]\r\n    ]\r\n  },\r\n\r\n  // ÎœÎ±ÎºÎµÎ´Î¿Î½Î¯Î± regions\r\n  {\r\n    keys: ['ÎšÎµÎ½Ï„ÏÎ¹ÎºÎ®Ï‚ ÎœÎ±ÎºÎµÎ´Î¿Î½Î¯Î±Ï‚', 'Central Macedonia', 'ÎšÎµÎ½Ï„ÏÎ¹ÎºÎ® ÎœÎ±ÎºÎµÎ´Î¿Î½Î¯Î±'],\r\n    name: 'Î ÎµÏÎ¹Ï†Î­ÏÎµÎ¹Î± ÎšÎµÎ½Ï„ÏÎ¹ÎºÎ®Ï‚ ÎœÎ±ÎºÎµÎ´Î¿Î½Î¯Î±Ï‚',\r\n    adminLevel: '4',\r\n    coordinates: [\r\n      // Simplified boundary Î³Î¹Î± demo\r\n      [22.0, 41.5], [24.5, 41.5], [24.5, 40.0],\r\n      [22.0, 40.0], [22.0, 41.5]\r\n    ]\r\n  },\r\n\r\n  // Î‘Î¼Ï€ÎµÎ»ÏŒÎºÎ·Ï€Î¿Î¹ (existing)\r\n  {\r\n    keys: ['Î‘Î¼Ï€ÎµÎ»Î¿ÎºÎ®Ï€Ï‰Î½', 'Ampelokipon', 'ĞĞ¼Ğ¿ĞµĞ»Ğ¾ĞºĞ¸Ğ¿Ğ¾Ğ½', 'Î‘Î¼Ï€ÎµÎ»ÏŒÎºÎ·Ï€Î¿Î¹'],\r\n    name: 'Î”Î·Î¼Î¿Ï„Î¹ÎºÎ® Î•Î½ÏŒÏ„Î·Ï„Î± Î‘Î¼Ï€ÎµÎ»Î¿ÎºÎ®Ï€Ï‰Î½',\r\n    adminLevel: '8',\r\n    coordinates: [\r\n      [22.9166013, 40.6545235], [22.916378, 40.6548432], [22.9161263, 40.654913],\r\n      [22.9159367, 40.6551479], [22.9157414, 40.6553883], [22.9155318, 40.655694],\r\n      [22.9155987, 40.6558613], [22.9154793, 40.6562918], [22.915702, 40.6565594],\r\n      [22.9150123, 40.6571562], [22.914356, 40.6575815], [22.9141897, 40.6577716],\r\n      [22.913965, 40.6580476], [22.9137682, 40.6584715], [22.9130735, 40.6595013],\r\n      [22.9146819, 40.6606645], [22.9195995, 40.6611276], [22.922064, 40.6603006],\r\n      [22.9243559, 40.6589395], [22.928998, 40.6570252], [22.9316767, 40.6565356],\r\n      [22.934234, 40.6567998], [22.9345673, 40.6568327], [22.9344419, 40.6563954],\r\n      [22.9345299, 40.6555972], [22.9346904, 40.654914], [22.9352047, 40.6527174],\r\n      [22.9342228, 40.6523744], [22.9341515, 40.651373], [22.9341167, 40.6510887],\r\n      [22.9340592, 40.6505896], [22.9339901, 40.6498829], [22.9340715, 40.6493217],\r\n      [22.9339464, 40.6484215], [22.9326998, 40.6484637], [22.931444, 40.6490899],\r\n      [22.9313272, 40.6491772], [22.9303401, 40.6495824], [22.929558, 40.6496515],\r\n      [22.9280302, 40.6497943], [22.9267611, 40.6494903], [22.9256199, 40.6492281],\r\n      [22.9243866, 40.6489393], [22.9239727, 40.6488403], [22.9195478, 40.6508989],\r\n      [22.919069, 40.6511528], [22.9186956, 40.651313], [22.9184825, 40.6514636],\r\n      [22.9183194, 40.6516322], [22.9181684, 40.6518332], [22.9180779, 40.6520084],\r\n      [22.9180263, 40.6522166], [22.9179568, 40.6523848], [22.9178432, 40.6525894],\r\n      [22.9171589, 40.6536558], [22.9166013, 40.6545235]\r\n    ]\r\n  }\r\n];\r\n\r\n/**\r\n * Î’ÏÎ¯ÏƒÎºÎµÎ¹ fallback boundary Î¼Îµ Î²Î¬ÏƒÎ· search terms\r\n */\r\nexport const findFallbackBoundary = (\r\n  searchTerms: string[]\r\n): GeoJSONFeatureCollection | null => {\r\n  // Normalize search terms\r\n  const normalizedSearchTerms = searchTerms\r\n    .filter(term => term && typeof term === 'string')\r\n    .map(term => term.toLowerCase().trim());\r\n\r\n  // Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î³Î¹Î± matching boundary\r\n  for (const boundary of FALLBACK_BOUNDARIES) {\r\n    const matches = boundary.keys.some(key => {\r\n      const normalizedKey = key.toLowerCase();\r\n      return normalizedSearchTerms.some(searchTerm =>\r\n        searchTerm.includes(normalizedKey) || normalizedKey.includes(searchTerm)\r\n      );\r\n    });\r\n\r\n    if (matches) {\r\n      console.log(`âœ… Fallback boundary found Î³Î¹Î±: ${boundary.name}`);\r\n      return {\r\n        type: 'FeatureCollection',\r\n        features: [{\r\n          type: 'Feature',\r\n          properties: {\r\n            name: boundary.name,\r\n            admin_level: boundary.adminLevel,\r\n            boundary: 'administrative'\r\n          },\r\n          geometry: {\r\n            type: 'Polygon',\r\n            coordinates: [boundary.coordinates]\r\n          }\r\n        }]\r\n      };\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n/**\r\n * Î ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ Î½Î­Î¿ fallback boundary\r\n */\r\nexport const addFallbackBoundary = (boundary: FallbackBoundary): void => {\r\n  // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î³Î¹Î± duplicates\r\n  const exists = FALLBACK_BOUNDARIES.some(b =>\r\n    b.keys.some(key => boundary.keys.includes(key))\r\n  );\r\n\r\n  if (!exists) {\r\n    FALLBACK_BOUNDARIES.push(boundary);\r\n    console.log(`ğŸ“ Added fallback boundary: ${boundary.name}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Î•Ï€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ ÏŒÎ»Î± Ï„Î± Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± fallback boundaries\r\n */\r\nexport const getAllFallbackBoundaries = (): readonly FallbackBoundary[] => {\r\n  return FALLBACK_BOUNDARIES;\r\n};\r\n\r\n/**\r\n * ÎšÎ±Î¸Î±ÏÎ¯Î¶ÎµÎ¹ ÏŒÎ»Î± Ï„Î± fallback boundaries (Î³Î¹Î± testing)\r\n */\r\nexport const clearFallbackBoundaries = (): void => {\r\n  FALLBACK_BOUNDARIES.length = 0;\r\n};","/**\r\n * AddressBreakdownCard - Interactive address display Î¼Îµ clickable boundary search\r\n *\r\n * Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ LEGO systems:\r\n * - @layera/cards Î³Î¹Î± BaseCard\r\n * - @layera/buttons Î³Î¹Î± clickable components\r\n * - @layera/icons Î³Î¹Î± location/boundary icons\r\n * - @layera/tolgee Î³Î¹Î± internationalization\r\n * - @layera/geo-drawing Î³Î¹Î± boundary visualization\r\n */\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { BaseCard } from '@layera/cards';\r\nimport { Button } from '@layera/buttons';\r\nimport { LocationIcon, MapIcon } from '@layera/icons';\r\nimport { Spinner } from '@layera/loading';\r\nimport { useLayeraTranslation } from '@layera/i18n';\r\n// Fixed import - Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Ï„Î¿ Î½Î­Î¿ working osmService Î±Ï€ÏŒ geo-mapping\r\nimport { fetchBoundaryByAddressComponent } from '../../../geo-mapping/src/services/osmService';\r\n\r\nimport type {\r\n  AddressBreakdownCardProps,\r\n  AddressComponent,\r\n  BoundaryVisualizationEvent\r\n} from '../types';\r\nimport { parseFullAddress } from '../utils/addressParser';\r\n\r\n/**\r\n * AddressBreakdownCard Component\r\n *\r\n * ÎœÎµÏ„Î±Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î¿ displayName Î±Ï€ÏŒ geocoding ÏƒÎµ structured, clickable Î»Î¯ÏƒÏ„Î±\r\n * ÎŒÏ„Î±Î½ ÎºÎ¬Î½ÎµÎ¹Ï‚ ÎºÎ»Î¹Îº ÏƒÎµ administrative area â†’ Î´ÎµÎ¯Ï‡Î½ÎµÎ¹ Ï„Î¿ boundary ÏƒÏ„Î¿ Ï‡Î¬ÏÏ„Î·\r\n */\r\nexport function AddressBreakdownCard({\r\n  geocodeResult,\r\n  config = {},\r\n  title,\r\n  onClick,\r\n  style,\r\n  isLoading = false,\r\n  error = null\r\n}: AddressBreakdownCardProps) {\r\n  const { t } = useLayeraTranslation();\r\n  const [boundaryLoading, setBoundaryLoading] = useState<string | null>(null);\r\n  const [boundaryError, setBoundaryError] = useState<string | null>(null);\r\n  const [loadingTimer, setLoadingTimer] = useState<number>(0);\r\n\r\n  // Timer effect Î³Î¹Î± loading countdown\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n\r\n    if (boundaryLoading) {\r\n      setLoadingTimer(0);\r\n      interval = setInterval(() => {\r\n        setLoadingTimer(prev => prev + 1);\r\n      }, 1000);\r\n    } else {\r\n      setLoadingTimer(0);\r\n    }\r\n\r\n    return () => {\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    };\r\n  }, [boundaryLoading]);\r\n\r\n  // Default configuration\r\n  const finalConfig = {\r\n    layout: 'list' as const,\r\n    enableBoundarySearch: true,\r\n    maxComponents: 10,\r\n    ...config\r\n  };\r\n\r\n  // Parse Ï„Î¿ geocode result ÏƒÎµ components\r\n  const components = parseFullAddress(geocodeResult);\r\n  const visibleComponents = finalConfig.maxComponents\r\n    ? components.slice(0, finalConfig.maxComponents)\r\n    : components;\r\n\r\n  /**\r\n   * Handle ÎºÎ»Î¹Îº ÏƒÎµ address component\r\n   * Î‘Î½ ÎµÎ¯Î½Î±Î¹ clickable â†’ fetch boundary ÎºÎ±Î¹ dispatch event Î³Î¹Î± Ï„Î¿ Ï‡Î¬ÏÏ„Î·\r\n   */\r\n  const handleComponentClick = useCallback(async (component: AddressComponent) => {\r\n    if (!component.clickable || !finalConfig.enableBoundarySearch) {\r\n      return;\r\n    }\r\n\r\n    if (finalConfig.onComponentClick) {\r\n      finalConfig.onComponentClick(component);\r\n    }\r\n\r\n    console.log(`ğŸ”„ Starting boundary search for: ${component.label}, ID: ${component.id}`);\r\n    setBoundaryLoading(component.id);\r\n    setBoundaryError(null);\r\n\r\n    try {\r\n      // ÎšÎ¬Î½Ï‰ fetch Ï„Î¿Ï… boundary Î±Ï€ÏŒ Ï„Î¿ OSM API\r\n      console.log(`ğŸ” Fetching boundary for: ${component.label}`);\r\n      const boundaryData = await fetchBoundaryByAddressComponent({\r\n        label: component.label,\r\n        type: component.type\r\n      });\r\n\r\n      if (boundaryData && boundaryData.features && boundaryData.features.length > 0) {\r\n        console.log(`âœ… Found boundary with ${boundaryData.features.length} features`);\r\n\r\n        // Dispatch event Î¼Îµ Ï„Î± actual boundary data\r\n        const event = new CustomEvent('showAdministrativeBoundary', {\r\n          detail: {\r\n            type: 'showBoundary',\r\n            component,\r\n            geocodeResult,\r\n            boundary: boundaryData\r\n          } as BoundaryVisualizationEvent & { boundary: any }\r\n        });\r\n        window.dispatchEvent(event);\r\n\r\n        console.log(`ğŸ¯ Boundary search completed for: ${component.label}`);\r\n      } else {\r\n        console.warn(`âš ï¸ No boundary data found for: ${component.label}`);\r\n        setBoundaryError(`Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ ÏŒÏÎ¹Î± Î³Î¹Î± ${component.label}`);\r\n      }\r\n    } catch (error) {\r\n      setBoundaryError(`Failed to search boundary for ${component.label}`);\r\n      console.error('Boundary search error:', error);\r\n    } finally {\r\n      console.log(`ğŸ Boundary search completed for: ${component.label}, clearing loading state`);\r\n      setBoundaryLoading(null);\r\n    }\r\n  }, [finalConfig, geocodeResult, t]);\r\n\r\n  /**\r\n   * Render component based on layout\r\n   */\r\n  const renderComponent = (component: AddressComponent) => {\r\n    const isLoading = boundaryLoading === component.id;\r\n    const isClickable = component.clickable && finalConfig.enableBoundarySearch;\r\n\r\n\r\n    const componentProps = {\r\n      className: `address-component ${component.className || ''} ${isClickable ? 'clickable' : ''}`,\r\n      onClick: isClickable ? () => handleComponentClick(component) : undefined,\r\n      disabled: isLoading || !!boundaryLoading,\r\n      style: {\r\n        cursor: isClickable ? 'pointer' : 'default',\r\n        opacity: isLoading ? 0.6 : 1\r\n      }\r\n    };\r\n\r\n    if (finalConfig.layout === 'tags') {\r\n      return (\r\n        <Button\r\n          key={component.id}\r\n          {...componentProps}\r\n          variant={isClickable ? 'outline' : 'ghost'}\r\n          size=\"sm\"\r\n          startIcon={isClickable ? <MapIcon /> : <LocationIcon />}\r\n          loading={isLoading}\r\n        >\r\n          {component.label}\r\n          {isLoading && (\r\n            <span style={{\r\n              marginLeft: '0.5rem',\r\n              fontSize: '0.75rem',\r\n              color: '#6B7280'\r\n            }}>\r\n              ({loadingTimer}s)\r\n            </span>\r\n          )}\r\n        </Button>\r\n      );\r\n    }\r\n\r\n    // List layout - Î™Î•Î¡Î‘Î¡Î§Î™ÎšÎ— Î•ÎœÎ¦Î‘ÎÎ™Î£Î—\r\n    return (\r\n      <div\r\n        key={component.id}\r\n        {...componentProps}\r\n        className={`list-item ${componentProps.className}`}\r\n        style={{\r\n          ...componentProps.style,\r\n          padding: '0.75rem',\r\n          borderRadius: '0.375rem',\r\n          marginBottom: '0.5rem',\r\n          border: '1px solid #E5E7EB',\r\n          transition: 'all 0.2s ease-in-out',\r\n          backgroundColor: isClickable ? '#FFFFFF' : '#F9FAFB',\r\n          textAlign: 'left', // Î•Ï…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ· Ï€ÏÎ¿Ï‚ Ï„Î± Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬\r\n          ...(isClickable && {\r\n            ':hover': {\r\n              backgroundColor: '#F3F4F6',\r\n              borderColor: '#D1D5DB',\r\n              transform: 'translateY(-1px)',\r\n              boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)'\r\n            }\r\n          })\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          if (isClickable && !isLoading) {\r\n            e.currentTarget.style.backgroundColor = '#F3F4F6';\r\n            e.currentTarget.style.borderColor = '#D1D5DB';\r\n            e.currentTarget.style.transform = 'translateY(-1px)';\r\n            e.currentTarget.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';\r\n          }\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          if (isClickable && !isLoading) {\r\n            e.currentTarget.style.backgroundColor = '#FFFFFF';\r\n            e.currentTarget.style.borderColor = '#E5E7EB';\r\n            e.currentTarget.style.transform = 'translateY(0)';\r\n            e.currentTarget.style.boxShadow = 'none';\r\n          }\r\n        }}\r\n      >\r\n        <div className=\"list-item-content\" style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'flex-start', // Î•Ï…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ· Ï€ÏÎ¿Ï‚ Ï„Î± Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬\r\n          gap: '0.5rem',\r\n          width: '100%'\r\n        }}>\r\n          {isLoading ? (\r\n            <Spinner size=\"sm\" variant=\"default\" />\r\n          ) : isClickable ? (\r\n            <MapIcon className=\"list-icon\" style={{\r\n              width: '1rem',\r\n              height: '1rem',\r\n              color: '#3B82F6'\r\n            }} />\r\n          ) : (\r\n            <LocationIcon className=\"list-icon\" style={{\r\n              width: '1rem',\r\n              height: '1rem',\r\n              color: '#6B7280'\r\n            }} />\r\n          )}\r\n          <span className=\"list-label\" style={{\r\n            flex: 1,\r\n            fontSize: '0.875rem',\r\n            color: isClickable ? '#1F2937' : '#6B7280',\r\n            fontWeight: isClickable ? '500' : '400',\r\n            textAlign: 'left', // Î•Ï…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ· ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Ï€ÏÎ¿Ï‚ Ï„Î± Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬\r\n            whiteSpace: 'nowrap',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis'\r\n          }}>\r\n            {component.label}\r\n          </span>\r\n        </div>\r\n        {isLoading && (\r\n          <div className=\"loading-indicator\" style={{\r\n            marginTop: '0.25rem',\r\n            fontSize: '0.75rem',\r\n            color: '#6B7280',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}>\r\n            <span>Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï€ÎµÏÎ¹Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚...</span>\r\n            <span style={{\r\n              fontWeight: '500',\r\n              color: '#3B82F6',\r\n              minWidth: '2rem'\r\n            }}>\r\n              {loadingTimer}s\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Card actions\r\n  const cardActions = (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"sm\"\r\n      onClick={() => {\r\n        const event = new CustomEvent('showSearchResult', {\r\n          detail: {\r\n            latitude: geocodeResult.coordinates.latitude,\r\n            longitude: geocodeResult.coordinates.longitude,\r\n            zoom: 16,\r\n            displayName: geocodeResult.displayName\r\n          }\r\n        });\r\n        window.dispatchEvent(event);\r\n      }}\r\n    >\r\n      {t('showOnMap')}\r\n    </Button>\r\n  );\r\n\r\n  return (\r\n    <BaseCard\r\n      title={title || t('addressDetails')}\r\n      actions={cardActions}\r\n      className={`address-breakdown-card ${finalConfig.className || ''}`}\r\n      onClick={onClick}\r\n      style={style}\r\n    >\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {boundaryError && (\r\n        <div className=\"boundary-error\">\r\n          {boundaryError}\r\n        </div>\r\n      )}\r\n\r\n      {/* Instruction text Î¼Î¯Î± Ï†Î¿ÏÎ¬ ÏƒÏ„Î·Î½ ÎºÎ¿ÏÏ…Ï†Î® */}\r\n      {!isLoading && visibleComponents.some(c => c.clickable) && finalConfig.enableBoundarySearch && (\r\n        <div style={{\r\n          fontSize: '0.875rem',\r\n          color: '#6B7280',\r\n          marginBottom: '0.75rem',\r\n          fontStyle: 'italic'\r\n        }}>\r\n          {t('clickToShowBoundary')}\r\n        </div>\r\n      )}\r\n\r\n      <div className={`address-components layout-${finalConfig.layout}`}>\r\n        {isLoading ? (\r\n          <div className=\"loading-state\">\r\n            Loading...\r\n          </div>\r\n        ) : (\r\n          visibleComponents.map(renderComponent)\r\n        )}\r\n      </div>\r\n\r\n      {components.length > visibleComponents.length && (\r\n        <div className=\"components-overflow\">\r\n          +{components.length - visibleComponents.length} more components\r\n        </div>\r\n      )}\r\n    </BaseCard>\r\n  );\r\n}","import React from 'react';\r\nimport type { SpinnerProps } from '../../types';\r\nimport './Spinner.css';\r\n\r\n/**\r\n * Spinner - Î’Î±ÏƒÎ¹ÎºÏŒ loading spinner component\r\n */\r\nexport const Spinner: React.FC<SpinnerProps> = ({\r\n  size = 'md',\r\n  variant = 'default',\r\n  color,\r\n  speed = 'normal',\r\n  className = ''\r\n}) => {\r\n  const spinnerClasses = [\r\n    'layera-spinner',\r\n    `layera-spinner--${size}`,\r\n    `layera-spinner--${variant}`,\r\n    `layera-spinner--speed-${speed}`,\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  const spinnerStyle = color ? { color } : undefined;\r\n\r\n  const renderSpinner = () => {\r\n    switch (variant) {\r\n      case 'dots':\r\n        return (\r\n          <div className={spinnerClasses} style={spinnerStyle}>\r\n            <div className=\"layera-spinner__dot\" />\r\n            <div className=\"layera-spinner__dot\" />\r\n            <div className=\"layera-spinner__dot\" />\r\n          </div>\r\n        );\r\n\r\n      case 'pulse':\r\n        return (\r\n          <div className={spinnerClasses} style={spinnerStyle}>\r\n            <div className=\"layera-spinner__pulse\" />\r\n          </div>\r\n        );\r\n\r\n      case 'ring':\r\n        return (\r\n          <div className={spinnerClasses} style={spinnerStyle}>\r\n            <div className=\"layera-spinner__ring\">\r\n              <div />\r\n              <div />\r\n              <div />\r\n              <div />\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'bars':\r\n        return (\r\n          <div className={spinnerClasses} style={spinnerStyle}>\r\n            <div className=\"layera-spinner__bars\">\r\n              <div />\r\n              <div />\r\n              <div />\r\n              <div />\r\n              <div />\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return (\r\n          <div className={spinnerClasses} style={spinnerStyle}>\r\n            <svg\r\n              className=\"layera-spinner__circle\"\r\n              viewBox=\"0 0 50 50\"\r\n              fill=\"none\"\r\n            >\r\n              <circle\r\n                className=\"layera-spinner__track\"\r\n                cx=\"25\"\r\n                cy=\"25\"\r\n                r=\"20\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"4\"\r\n                opacity=\"0.2\"\r\n              />\r\n              <circle\r\n                className=\"layera-spinner__progress\"\r\n                cx=\"25\"\r\n                cy=\"25\"\r\n                r=\"20\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"4\"\r\n                strokeLinecap=\"round\"\r\n                strokeDasharray=\"31.416\"\r\n                strokeDashoffset=\"31.416\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  return renderSpinner();\r\n};","import React from 'react';\r\nimport type { SkeletonProps } from '../../types';\r\nimport './Skeleton.css';\r\n\r\n/**\r\n * Skeleton - Î’Î±ÏƒÎ¹ÎºÏŒ skeleton component Î³Î¹Î± loading placeholders\r\n */\r\nexport const Skeleton: React.FC<SkeletonProps> = ({\r\n  width = '100%',\r\n  height = '1em',\r\n  variant = 'text',\r\n  animation = 'wave',\r\n  className = ''\r\n}) => {\r\n  const skeletonClasses = [\r\n    'layera-skeleton',\r\n    `layera-skeleton--${variant}`,\r\n    animation !== 'none' && `layera-skeleton--${animation}`,\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  const skeletonStyle = {\r\n    width: typeof width === 'number' ? `${width}px` : width,\r\n    height: typeof height === 'number' ? `${height}px` : height\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={skeletonClasses}\r\n      style={skeletonStyle}\r\n      aria-hidden=\"true\"\r\n    />\r\n  );\r\n};","import React from 'react';\r\nimport { Skeleton } from '../Skeleton';\r\nimport type { SkeletonTextProps } from '../../types';\r\nimport './SkeletonText.css';\r\n\r\n/**\r\n * SkeletonText - Multi-line text skeleton\r\n */\r\nexport const SkeletonText: React.FC<SkeletonTextProps> = ({\r\n  lines = 3,\r\n  spacing = 'md',\r\n  lastLineWidth = '75%',\r\n  className = ''\r\n}) => {\r\n  const containerClasses = [\r\n    'layera-skeleton-text',\r\n    `layera-skeleton-text--spacing-${spacing}`,\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      {Array.from({ length: lines }, (_, index) => (\r\n        <Skeleton\r\n          key={index}\r\n          variant=\"text\"\r\n          width={index === lines - 1 ? lastLineWidth : '100%'}\r\n          animation=\"wave\"\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { Spinner } from '../Spinner';\r\nimport type { LoadingSpinnerProps } from '../../types';\r\nimport './LoadingSpinner.css';\r\n\r\n/**\r\n * LoadingSpinner - Enhanced spinner Î¼Îµ overlay ÎºÎ±Î¹ message\r\n */\r\nexport const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({\r\n  overlay = false,\r\n  message,\r\n  centered = false,\r\n  size = 'md',\r\n  variant = 'default',\r\n  color,\r\n  speed = 'normal',\r\n  className = ''\r\n}) => {\r\n  const containerClasses = [\r\n    'layera-loading-spinner',\r\n    overlay && 'layera-loading-spinner--overlay',\r\n    centered && 'layera-loading-spinner--centered',\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <div className=\"layera-loading-spinner__content\">\r\n        <Spinner\r\n          size={size}\r\n          variant={variant}\r\n          color={color}\r\n          speed={speed}\r\n        />\r\n        {message && (\r\n          <div className=\"layera-loading-spinner__message\">\r\n            {message}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};","/**\r\n * Administrative Hierarchy Utils - Î”Î¹Î¿Î¹ÎºÎ·Ï„Î¹ÎºÎ® Î™ÎµÏÎ±ÏÏ‡Î¯Î±\r\n *\r\n * ÎšÎ±Î¸Î¿Î»Î¹ÎºÏŒ ÏƒÏÏƒÏ„Î·Î¼Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ Î´Î¹Î¿Î¹ÎºÎ·Ï„Î¹ÎºÏÎ½ Î´Î¹Î±Î¹ÏÎ­ÏƒÎµÏ‰Î½ Î¼Îµ:\r\n * - Î™ÎµÏÎ±ÏÏ‡Î¹ÎºÎ® Ï„Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· Î±Ï€ÏŒ Î¼Î¹ÎºÏÏŒ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ³Î¬Î»Î¿\r\n * - ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒ Î´Î¹Ï€Î»ÏŒÏ„Ï…Ï€Ï‰Î½\r\n * - Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Ï€Î¿Î»Î»Î±Ï€Î»ÏÎ½ Ï‡Ï‰ÏÏÎ½ (Î•Î»Î»Î¬Î´Î±, Î¼ÎµÎ»Î»Î¿Î½Ï„Î¹ÎºÎ¬ Î’Î¿Ï…Î»Î³Î±ÏÎ¯Î± Îº.Î±.)\r\n */\r\n\r\n/**\r\n * Î¤ÏÏ€Î¿Î¹ Î´Î¹Î¿Î¹ÎºÎ·Ï„Î¹ÎºÏÎ½ ÎµÏ€Î¹Ï€Î­Î´Ï‰Î½ Î³Î¹Î± Î•Î»Î»Î¬Î´Î±\r\n */\r\nexport enum GreekAdministrativeLevel {\r\n  STREET = 1,           // ÎŸÎ´ÏŒÏ‚/Î›ÎµÏ‰Ï†ÏŒÏÎ¿Ï‚ + Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ + Î¤.Îš.\r\n  COMMUNITY = 2,        // ÎšÎ¿Î¹Î½ÏŒÏ„Î·Ï„Î±\r\n  NEIGHBORHOOD = 3,     // Î£Ï…Î½Î¿Î¹ÎºÎ¯Î±/Î“ÎµÎ¹Ï„Î¿Î½Î¹Î¬\r\n  VILLAGE = 4,          // Î§Ï‰ÏÎ¹ÏŒ/ÎšÏ‰Î¼ÏŒÏ€Î¿Î»Î·\r\n  MUNICIPAL_UNIT = 5,   // Î”Î·Î¼Î¿Ï„Î¹ÎºÎ® Î•Î½ÏŒÏ„Î·Ï„Î±\r\n  MUNICIPALITY = 6,     // Î”Î®Î¼Î¿Ï‚\r\n  METROPOLITAN = 7,     // ÎœÎ·Ï„ÏÎ¿Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ® Î•Î½ÏŒÏ„Î·Ï„Î±\r\n  PREFECTURE = 8,       // ÎÎ¿Î¼ÏŒÏ‚\r\n  REGION = 9,           // Î ÎµÏÎ¹Ï†Î­ÏÎµÎ¹Î±\r\n  DECENTRALIZED = 10,   // Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½Î· Î”Î¹Î¿Î¯ÎºÎ·ÏƒÎ·\r\n  COUNTRY = 11          // Î§ÏÏÎ±\r\n}\r\n\r\n/**\r\n * Patterns Î³Î¹Î± Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· ÎµÎ»Î»Î·Î½Î¹ÎºÏÎ½ Î´Î¹Î¿Î¹ÎºÎ·Ï„Î¹ÎºÏÎ½ Ï„ÏÏ€Ï‰Î½\r\n */\r\nconst GREEK_PATTERNS = {\r\n  [GreekAdministrativeLevel.STREET]: [\r\n    /^.*?\\s*\\d+/, // ÎŸÎ´ÏŒÏ‚ Î¼Îµ Î±ÏÎ¹Î¸Î¼ÏŒ\r\n    /Î¿Î´ÏŒÏ‚|Î»ÎµÏ‰Ï†ÏŒÏÎ¿Ï‚|Ï€Î»Î±Ï„ÎµÎ¯Î±|Î±Î³Î¯Î¿Ï…|Î±Î³Î¯Î±Ï‚/i\r\n  ],\r\n  [GreekAdministrativeLevel.COMMUNITY]: [\r\n    /ÎºÎ¿Î¹Î½ÏŒÏ„Î·Ï„Î±|community/i\r\n  ],\r\n  [GreekAdministrativeLevel.NEIGHBORHOOD]: [\r\n    /ÏƒÏ…Î½Î¿Î¹ÎºÎ¯Î±|Î³ÎµÎ¹Ï„Î¿Î½Î¹Î¬|Ï€ÎµÏÎ¹Î¿Ï‡Î®/i\r\n  ],\r\n  [GreekAdministrativeLevel.VILLAGE]: [\r\n    /Ï‡Ï‰ÏÎ¹ÏŒ|ÎºÏ‰Î¼ÏŒÏ€Î¿Î»Î·|Î¿Î¹ÎºÎ¹ÏƒÎ¼ÏŒÏ‚/i\r\n  ],\r\n  [GreekAdministrativeLevel.MUNICIPAL_UNIT]: [\r\n    /Î´Î·Î¼Î¿Ï„Î¹ÎºÎ®\\s+ÎµÎ½ÏŒÏ„Î·Ï„Î±|municipal\\s+unit/i\r\n  ],\r\n  [GreekAdministrativeLevel.MUNICIPALITY]: [\r\n    /^Î´Î®Î¼Î¿Ï‚\\s+|municipality\\s+of/i\r\n  ],\r\n  [GreekAdministrativeLevel.METROPOLITAN]: [\r\n    /Î¼Î·Ï„ÏÎ¿Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ®\\s+ÎµÎ½ÏŒÏ„Î·Ï„Î±|metropolitan/i\r\n  ],\r\n  [GreekAdministrativeLevel.PREFECTURE]: [\r\n    /Î½Î¿Î¼ÏŒÏ‚|Î½Î¿Î¼Î±ÏÏ‡Î¯Î±|prefecture/i\r\n  ],\r\n  [GreekAdministrativeLevel.REGION]: [\r\n    /Ï€ÎµÏÎ¹Ï†Î­ÏÎµÎ¹Î±|region/i\r\n  ],\r\n  [GreekAdministrativeLevel.DECENTRALIZED]: [\r\n    /Î±Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½Î·\\s+Î´Î¹Î¿Î¯ÎºÎ·ÏƒÎ·|decentralized/i\r\n  ],\r\n  [GreekAdministrativeLevel.COUNTRY]: [\r\n    /ÎµÎ»Î»Î¬Î´Î±|greece/i\r\n  ]\r\n};\r\n\r\n/**\r\n * Î‘Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· ÎµÏ€Î¹Ï€Î­Î´Î¿Ï… Î´Î¹Î¿Î¹ÎºÎ·Ï„Î¹ÎºÎ®Ï‚ Î´Î¹Î±Î¯ÏÎµÏƒÎ·Ï‚\r\n */\r\nexport function getAdministrativeLevel(text: string): GreekAdministrativeLevel {\r\n  const cleanText = text.trim();\r\n\r\n  // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î³Î¹Î± ÎºÎ¬Î¸Îµ ÎµÏ€Î¯Ï€ÎµÎ´Î¿ Î¼Îµ Ï„Î± patterns\r\n  for (const [level, patterns] of Object.entries(GREEK_PATTERNS)) {\r\n    for (const pattern of patterns) {\r\n      if (pattern.test(cleanText)) {\r\n        return parseInt(level) as GreekAdministrativeLevel;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Default: Î±Î½ Î´ÎµÎ½ Î±Î½Î±Î³Î½Ï‰ÏÎ¯Î¶ÎµÏ„Î±Î¹, Î¸ÎµÏ‰ÏÎ¿ÏÎ¼Îµ ÏŒÏ„Î¹ ÎµÎ¯Î½Î±Î¹ Ï€ÏŒÎ»Î·/Ï€ÎµÏÎ¹Î¿Ï‡Î®\r\n  return GreekAdministrativeLevel.NEIGHBORHOOD;\r\n}\r\n\r\n/**\r\n * ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î´Î¹Ï€Î»ÏŒÏ„Ï…Ï€Ï‰Î½ ÎºÎ±Î¹ Ï€Î±ÏÏŒÎ¼Î¿Î¹Ï‰Î½ Î¿Î½Î¿Î¼Î¬Ï„Ï‰Î½\r\n */\r\nexport function removeDuplicates(items: string[]): string[] {\r\n  const cleaned: string[] = [];\r\n  const seen = new Set<string>();\r\n\r\n  for (const item of items) {\r\n    const normalized = normalizeText(item);\r\n\r\n    // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î³Î¹Î± exact match\r\n    if (seen.has(normalized)) {\r\n      continue;\r\n    }\r\n\r\n    // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î³Î¹Î± Ï€Î±ÏÏŒÎ¼Î¿Î¹Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± (substring)\r\n    const isDuplicate = Array.from(seen).some(existing => {\r\n      return areTextsSimilar(normalized, existing);\r\n    });\r\n\r\n    if (!isDuplicate) {\r\n      seen.add(normalized);\r\n      cleaned.push(item);\r\n    }\r\n  }\r\n\r\n  return cleaned;\r\n}\r\n\r\n/**\r\n * ÎšÎ±Î½Î¿Î½Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î³Î¹Î± ÏƒÏÎ³ÎºÏÎ¹ÏƒÎ·\r\n */\r\nfunction normalizeText(text: string): string {\r\n  return text\r\n    .toLowerCase()\r\n    .replace(/^(Î´Î®Î¼Î¿Ï‚|Î´Î·Î¼Î¿Ï„Î¹ÎºÎ®\\s+ÎµÎ½ÏŒÏ„Î·Ï„Î±|Ï€ÎµÏÎ¹Ï†Î­ÏÎµÎ¹Î±|Î½Î¿Î¼ÏŒÏ‚)\\s+/i, '')\r\n    .replace(/\\s*-\\s*/g, '-')\r\n    .replace(/\\s+/g, ' ')\r\n    .trim();\r\n}\r\n\r\n/**\r\n * ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Î´ÏÎ¿ ÎºÎµÎ¯Î¼ÎµÎ½Î± ÎµÎ¯Î½Î±Î¹ Ï€Î±ÏÏŒÎ¼Î¿Î¹Î± (Î³Î¹Î± Î´Î¹Ï€Î»ÏŒÏ„Ï…Ï€Î±)\r\n * Î•Î™Î”Î™ÎšÎŸÎ£ Î•Î›Î•Î“Î§ÎŸÎ£: \"Î•Î»ÎµÏ…Î¸Î­ÏÎ¹Î¿\" vs \"Î•Î»ÎµÏ…Î¸Î­ÏÎ¹Î¿-ÎšÎ¿ÏÎ´ÎµÎ»Î¹ÏŒ\"\r\n */\r\nfunction areTextsSimilar(text1: string, text2: string): boolean {\r\n  // Exact match\r\n  if (text1 === text2) return true;\r\n\r\n  // Î•Î™Î”Î™ÎšÎŸÎ£ ÎšÎ‘ÎÎŸÎÎ‘Î£: Î‘Î½ Î­Î½Î± ÎºÎµÎ¯Î¼ÎµÎ½Î¿ ÎµÎ¯Î½Î±Î¹ substring Ï„Î¿Ï… Î¬Î»Î»Î¿Ï… ÎšÎ‘Î™ ÎµÎ¯Î½Î±Î¹ Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ Î±Ï€ÏŒ 50% Ï„Î¿Ï… Î¬Î»Î»Î¿Ï…, Î”Î•Î ÎµÎ¯Î½Î±Î¹ Î´Î¹Ï€Î»ÏŒÏ„Ï…Ï€Î¿\r\n  if (text1.includes(text2)) {\r\n    const ratio = text2.length / text1.length;\r\n    if (ratio < 0.6) return true; // Î¤Î¿ Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ ÎµÎ¯Î½Î±Î¹ Î´Î¹Ï€Î»ÏŒÏ„Ï…Ï€Î¿\r\n  }\r\n  if (text2.includes(text1)) {\r\n    const ratio = text1.length / text2.length;\r\n    if (ratio < 0.6) return true; // Î¤Î¿ Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ ÎµÎ¯Î½Î±Î¹ Î´Î¹Ï€Î»ÏŒÏ„Ï…Ï€Î¿\r\n  }\r\n\r\n  // Î Î±ÏÏŒÎ¼Î¿Î¹Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± Î¼Îµ Î¼Î¹ÎºÏÎ­Ï‚ Î´Î¹Î±Ï†Î¿ÏÎ­Ï‚\r\n  const similarity = calculateSimilarity(text1, text2);\r\n  return similarity > 0.85; // 85% similarity threshold\r\n}\r\n\r\n/**\r\n * Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î¿Î¼Î¿Î¹ÏŒÏ„Î·Ï„Î±Ï‚ ÎºÎµÎ¹Î¼Î­Î½Ï‰Î½ (Levenshtein distance)\r\n */\r\nfunction calculateSimilarity(str1: string, str2: string): number {\r\n  const longer = str1.length > str2.length ? str1 : str2;\r\n  const shorter = str1.length > str2.length ? str2 : str1;\r\n\r\n  if (longer.length === 0) return 1;\r\n\r\n  const distance = levenshteinDistance(longer, shorter);\r\n  return (longer.length - distance) / longer.length;\r\n}\r\n\r\n/**\r\n * Levenshtein distance algorithm\r\n */\r\nfunction levenshteinDistance(str1: string, str2: string): number {\r\n  const matrix = Array(str2.length + 1).fill(null).map(() => Array(str1.length + 1).fill(null));\r\n\r\n  for (let i = 0; i <= str1.length; i++) matrix[0][i] = i;\r\n  for (let j = 0; j <= str2.length; j++) matrix[j][0] = j;\r\n\r\n  for (let j = 1; j <= str2.length; j++) {\r\n    for (let i = 1; i <= str1.length; i++) {\r\n      const cost = str1[i - 1] === str2[j - 1] ? 0 : 1;\r\n      matrix[j][i] = Math.min(\r\n        matrix[j][i - 1] + 1,     // deletion\r\n        matrix[j - 1][i] + 1,     // insertion\r\n        matrix[j - 1][i - 1] + cost // substitution\r\n      );\r\n    }\r\n  }\r\n\r\n  return matrix[str2.length][str1.length];\r\n}\r\n\r\n/**\r\n * ÎšÎ¥Î¡Î™Î‘ FUNCTION: Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± display_name ÏƒÎµ Î¹ÎµÏÎ±ÏÏ‡Î¹ÎºÎ® Î´Î¿Î¼Î®\r\n * Î Î±Î¯ÏÎ½ÎµÎ¹ Ï„Î¿ raw display_name Î±Ï€ÏŒ OSM ÎºÎ±Î¹ Ï„Î¿ ÎºÎ¬Î½ÎµÎ¹ ÎºÎ±Î¸Î±ÏÏŒ ÎºÎ±Î¹ Ï„Î±Î¾Î¹Î½Î¿Î¼Î·Î¼Î­Î½Î¿\r\n * Î•Ï€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ ÎºÎ¬Î¸Îµ Î´Î¹Î¿Î¹ÎºÎ·Ï„Î¹ÎºÎ® Î´Î¹Î±Î¯ÏÎµÏƒÎ· ÏƒÎµ Î¾ÎµÏ‡Ï‰ÏÎ¹ÏƒÏ„Î® Î³ÏÎ±Î¼Î¼Î®\r\n */\r\nexport function processDisplayNameToHierarchy(displayName: string): string {\r\n  console.log('ğŸ”„ Processing display name for hierarchy:', displayName);\r\n\r\n  // Split by comma ÎºÎ±Î¹ ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚\r\n  const parts = displayName\r\n    .split(',')\r\n    .map(part => part.trim())\r\n    .filter(part => part.length > 0);\r\n\r\n  console.log('ğŸ“ Initial parts:', parts);\r\n\r\n  // Î•Î™Î”Î™ÎšÎ— Î›ÎŸÎ“Î™ÎšÎ—: Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î¿Î´Î¿Ï Î¼Îµ Î±ÏÎ¹Î¸Î¼ÏŒ ÎºÎ±Î¹ Î¤.Îš.\r\n  let streetWithNumberAndPostal = '';\r\n  const nonStreetParts: string[] = [];\r\n  let postalCode = '';\r\n\r\n  // Î’ÏÎµÏ‚ postal code\r\n  const postalIndex = parts.findIndex(part => /^\\d{3,5}(-\\d{4})?$/.test(part));\r\n  if (postalIndex !== -1) {\r\n    postalCode = parts[postalIndex];\r\n  }\r\n\r\n  // Î’ÏÎµÏ‚ Î¿Î´ÏŒ Î¼Îµ Î±ÏÎ¹Î¸Î¼ÏŒ (Ï€ÏÏÏ„Î¿ part Ï€Î¿Ï… Î­Ï‡ÎµÎ¹ Î±ÏÎ¹Î¸Î¼ÏŒ)\r\n  const streetIndex = parts.findIndex(part => /^.*?\\s*\\d+/.test(part));\r\n  if (streetIndex !== -1) {\r\n    streetWithNumberAndPostal = postalCode\r\n      ? `${parts[streetIndex]}, ${postalCode}`\r\n      : parts[streetIndex];\r\n  }\r\n\r\n  // ÎœÎ¬Î¶ÎµÏˆÎµ ÏŒÎ»Î± Ï„Î± Î¬Î»Î»Î± parts (ÎµÎºÏ„ÏŒÏ‚ Î±Ï€ÏŒ Î¿Î´ÏŒ ÎºÎ±Î¹ postal code)\r\n  for (let i = 0; i < parts.length; i++) {\r\n    const part = parts[i];\r\n\r\n    // Skip postal codes\r\n    if (/^\\d{3,5}(-\\d{4})?$/.test(part)) continue;\r\n    // Skip pure numbers\r\n    if (/^\\d+$/.test(part)) continue;\r\n    // Skip Ï„Î·Î½ Î¿Î´ÏŒ Ï€Î¿Ï… Î®Î´Î· Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎ±Î¼Îµ\r\n    if (i === streetIndex) continue;\r\n\r\n    nonStreetParts.push(part);\r\n  }\r\n\r\n  console.log('ğŸ›£ï¸ Street with number and postal:', streetWithNumberAndPostal);\r\n  console.log('ğŸ§¹ Non-street parts:', nonStreetParts);\r\n\r\n  // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Î´Î¹Ï€Î»ÏŒÏ„Ï…Ï€Ï‰Î½ Î±Ï€ÏŒ Ï„Î± non-street parts\r\n  const uniqueNonStreetParts = removeDuplicates(nonStreetParts);\r\n  console.log('âœ¨ Unique non-street parts:', uniqueNonStreetParts);\r\n\r\n  // Î¤Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· ÎºÎ±Ï„Î¬ Î¹ÎµÏÎ±ÏÏ‡Î¹ÎºÏŒ ÎµÏ€Î¯Ï€ÎµÎ´Î¿ (Î¼Î¹ÎºÏÏŒ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ³Î¬Î»Î¿)\r\n  const hierarchicalParts = uniqueNonStreetParts\r\n    .map(part => ({\r\n      text: part,\r\n      level: getAdministrativeLevel(part)\r\n    }))\r\n    .sort((a, b) => a.level - b.level)\r\n    .map(item => item.text);\r\n\r\n  console.log('ğŸ›ï¸ Hierarchically sorted non-street parts:', hierarchicalParts);\r\n\r\n  // Î£Î¥ÎÎŸÎ›Î™ÎšÎ— Î™Î•Î¡Î‘Î¡Î§Î™Î‘: ÎŸÎ´ÏŒÏ‚ Ï€ÏÏÏ„Î±, Î¼ÎµÏ„Î¬ Ï„Î± Ï…Ï€ÏŒÎ»Î¿Î¹Ï€Î±\r\n  const finalParts = [];\r\n  if (streetWithNumberAndPostal) {\r\n    finalParts.push(streetWithNumberAndPostal);\r\n  }\r\n  finalParts.push(...hierarchicalParts);\r\n\r\n  // ÎšÎ‘Î˜Î• Î”Î™ÎŸÎ™ÎšÎ—Î¤Î™ÎšÎ— Î”Î™Î‘Î™Î¡Î•Î£Î— Î£Î• ÎÎ•Î§Î©Î¡Î™Î£Î¤Î— Î“Î¡Î‘ÎœÎœÎ—\r\n  const formattedHierarchy = finalParts.join('\\n');\r\n  console.log('ğŸ“‹ Final formatted hierarchy:', formattedHierarchy);\r\n\r\n  return formattedHierarchy;\r\n}\r\n\r\n/**\r\n * ÎœÎµÎ»Î»Î¿Î½Ï„Î¹ÎºÎ® Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Î³Î¹Î± Î¬Î»Î»ÎµÏ‚ Ï‡ÏÏÎµÏ‚\r\n */\r\nexport function getCountryFromDisplayName(displayName: string): 'greece' | 'bulgaria' | 'unknown' {\r\n  const lowerName = displayName.toLowerCase();\r\n\r\n  if (lowerName.includes('ÎµÎ»Î»Î¬Î´Î±') || lowerName.includes('greece')) {\r\n    return 'greece';\r\n  }\r\n\r\n  if (lowerName.includes('bulgaria') || lowerName.includes('Î²Î¿Ï…Î»Î³Î±ÏÎ¯Î±')) {\r\n    return 'bulgaria';\r\n  }\r\n\r\n  return 'unknown';\r\n}\r\n\r\n/**\r\n * Country-specific processing (Î³Î¹Î± Î¼ÎµÎ»Î»Î¿Î½Ï„Î¹ÎºÎ® ÎµÏ€Î­ÎºÏ„Î±ÏƒÎ·)\r\n */\r\nexport function processDisplayNameByCountry(displayName: string): string {\r\n  const country = getCountryFromDisplayName(displayName);\r\n\r\n  switch (country) {\r\n    case 'greece':\r\n      return processDisplayNameToHierarchy(displayName);\r\n\r\n    case 'bulgaria':\r\n      // TODO: Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î³Î¹Î± Î’Î¿Ï…Î»Î³Î±ÏÎ¯Î±\r\n      return displayName; // Fallback Ï€ÏÎ¿Ï‚ Ï„Î¿ Ï€Î±ÏÏŒÎ½\r\n\r\n    default:\r\n      // Universal fallback\r\n      return processDisplayNameToHierarchy(displayName);\r\n  }\r\n}","import { OSMAdminCollection } from '../types';\r\nimport { processDisplayNameByCountry } from '../utils/administrativeHierarchy';\r\n\r\n/**\r\n * Fetch administrative boundary for address component using Enterprise BoundaryService\r\n * @param addressComponent - Component Î¼Îµ label ÎºÎ±Î¹ type\r\n * @returns OSM-style admin boundary collection\r\n */\r\nexport const fetchBoundaryByAddressComponent = async (\r\n  addressComponent: { label: string; type: string }\r\n): Promise<OSMAdminCollection> => {\r\n  try {\r\n    console.log(`ğŸŒ Fetching boundary Î³Î¹Î±: ${addressComponent.label}`);\r\n\r\n    // Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Nominatim Î³Î¹Î± Î½Î± Ï€Î¬ÏÎ¿Ï…Î¼Îµ Ï„Î¿ Î Î›Î—Î¡Î•Î£ POLYGON\r\n    const searchUrl = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(addressComponent.label)}&format=json&limit=1&polygon_geojson=1`;\r\n\r\n    const searchResponse = await fetch(searchUrl, {\r\n      headers: {\r\n        'User-Agent': 'Layera-GeoAlert/1.0'\r\n      }\r\n    });\r\n\r\n    if (!searchResponse.ok) {\r\n      throw new Error(`Nominatim error: ${searchResponse.status}`);\r\n    }\r\n\r\n    const searchData = await searchResponse.json();\r\n\r\n    if (searchData && searchData.length > 0) {\r\n      const result = searchData[0];\r\n\r\n      // Î ÏÎ¿Ï„Î¯Î¼Î·ÏƒÎ·: Î§ÏÎ®ÏƒÎ· Ï„Î¿Ï… Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ¿Ï polygon Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹\r\n      if (result.geojson) {\r\n        console.log(`âœ… Found FULL POLYGON Î³Î¹Î± ${addressComponent.label} Î¼Îµ ${result.geojson.coordinates?.[0]?.length || 0} ÏƒÎ·Î¼ÎµÎ¯Î±`);\r\n\r\n        return {\r\n          type: 'FeatureCollection',\r\n          features: [{\r\n            type: 'Feature',\r\n            properties: {\r\n              name: result.display_name ? processDisplayNameByCountry(result.display_name) : addressComponent.label,\r\n              admin_level: '8',\r\n              boundary: 'administrative',\r\n              osm_id: result.osm_id || 0,\r\n              osm_type: result.osm_type || 'node'\r\n            },\r\n            geometry: result.geojson\r\n          }]\r\n        };\r\n      }\r\n      // Fallback: Î§ÏÎ®ÏƒÎ· bounding box Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ polygon\r\n      else if (result.boundingbox) {\r\n        const bbox = result.boundingbox;\r\n\r\n        // boundingbox format: [south, north, west, east]\r\n        const south = parseFloat(bbox[0]);\r\n        const north = parseFloat(bbox[1]);\r\n        const west = parseFloat(bbox[2]);\r\n        const east = parseFloat(bbox[3]);\r\n\r\n        console.log(`âš ï¸ Using bounding box Î³Î¹Î± ${addressComponent.label} (no polygon available)`);\r\n\r\n        return {\r\n          type: 'FeatureCollection',\r\n          features: [{\r\n            type: 'Feature',\r\n            properties: {\r\n              name: result.display_name ? processDisplayNameByCountry(result.display_name) : addressComponent.label,\r\n              admin_level: '8',\r\n              boundary: 'administrative',\r\n              osm_id: result.osm_id || 0,\r\n              osm_type: result.osm_type || 'node'\r\n            },\r\n            geometry: {\r\n              type: 'Polygon',\r\n              coordinates: [[\r\n                [west, north],\r\n                [east, north],\r\n                [east, south],\r\n                [west, south],\r\n                [west, north]\r\n              ]]\r\n            }\r\n          }]\r\n        };\r\n      }\r\n    }\r\n\r\n    // Default Overpass query Î³Î¹Î± Î¬Î»Î»ÎµÏ‚ Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯ÎµÏ‚\r\n    const query = `\r\n      [out:json][timeout:10];\r\n      (\r\n        relation[\"boundary\"=\"administrative\"][\"name\"~\"${addressComponent.label}\",i];\r\n      );\r\n      out ids;\r\n    `;\r\n\r\n    const response = await fetch('https://overpass-api.de/api/interpreter', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: `data=${encodeURIComponent(query)}`\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Overpass API error: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.elements && data.elements.length > 0) {\r\n      console.log(`âœ… OSM boundary IDs found Î³Î¹Î±: ${addressComponent.label} (${data.elements.length} elements)`);\r\n\r\n      // Î•Ï€Î¹ÏƒÏ„ÏÎ­Ï†Î¿Ï…Î¼Îµ null geometry Î³Î¹Î± Ï„ÏÏÎ±\r\n      // Î¤Î¿ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÏŒ boundary Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Ï€Î¹Î¿ ÏƒÏÎ½Î¸ÎµÏ„Î¿ query\r\n      return {\r\n        type: 'FeatureCollection',\r\n        features: []\r\n      };\r\n    }\r\n\r\n    console.log(`âš ï¸ No OSM boundary found Î³Î¹Î±: ${addressComponent.label}`);\r\n    return {\r\n      type: 'FeatureCollection',\r\n      features: []\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error(`ğŸš« OSM API error Î³Î¹Î± ${addressComponent.label}:`, error);\r\n\r\n    // Fallback to local boundary system\r\n    console.log(`âš ï¸ Fallback to local boundary system Î³Î¹Î±: ${addressComponent.label}`);\r\n    return await fetchLocalBoundary(addressComponent);\r\n  }\r\n};\r\n\r\n/**\r\n * Fallback boundary fetch using local system\r\n */\r\nasync function fetchLocalBoundary(\r\n  addressComponent: { label: string; type: string }\r\n): Promise<OSMAdminCollection> {\r\n  // Basic query normalization\r\n  const baseName = addressComponent.label\r\n    .replace(/^Î”Î®Î¼Î¿Ï‚\\s+/, '')\r\n    .replace(/^Î”Î·Î¼Î¿Ï„Î¹ÎºÎ®\\s+Î•Î½ÏŒÏ„Î·Ï„Î±\\s+/, '')\r\n    .replace(/^Î ÎµÏÎ¹Ï†Î­ÏÎµÎ¹Î±\\s+/, '')\r\n    .replace(/^Î ÎµÏÎ¹Ï†ÎµÏÎµÎ¹Î±ÎºÎ®\\s+Î•Î½ÏŒÏ„Î·Ï„Î±\\s+/, '')\r\n    .replace(/\\s+-\\s+.*$/, '')\r\n    .replace(/\\s+\\(.+\\)$/, '')\r\n    .trim();\r\n\r\n  console.log('âš ï¸ Fallback to local boundary system Î³Î¹Î±:', baseName);\r\n\r\n  // Use existing fallback system if available\r\n  try {\r\n    const { findFallbackBoundary } = await import('./fallbackBoundaries');\r\n    const searchTerms = [addressComponent.label, baseName];\r\n    const fallbackBoundary = findFallbackBoundary(searchTerms);\r\n\r\n    if (fallbackBoundary) {\r\n      console.log('âœ… Local fallback boundary found');\r\n      return fallbackBoundary;\r\n    }\r\n  } catch (fallbackError) {\r\n    console.warn('âš ï¸ Fallback system not available:', fallbackError);\r\n  }\r\n\r\n  // Ultimate fallback: empty collection\r\n  console.error('ğŸš« No boundary data available Î³Î¹Î±:', addressComponent.label);\r\n  return {\r\n    type: 'FeatureCollection',\r\n    features: []\r\n  };\r\n}\r\n\r\n// Stub functions Î³Î¹Î± compatibility\r\nexport const fetchBuildingOutlines = async () => ({ type: 'FeatureCollection', features: [] });\r\nexport const fetchAdministrativeBoundary = async () => ({ type: 'FeatureCollection', features: [] });\r\nexport const clearOSMCache = async () => {};\r\nexport const getCacheSize = () => 0;\r\nexport const isBoundsCached = () => false;\r\nexport const prefetchBuildingOutlines = async () => {};\r\n\r\n/**\r\n * Convert OSM geometry to GeoJSON geometry\r\n */\r\nfunction convertOSMGeometry(element: any): any {\r\n  if (!element.geometry) return null;\r\n\r\n  if (element.type === 'relation') {\r\n    // For relations, try to build polygon from ways\r\n    const coordinates: number[][][] = [];\r\n\r\n    if (element.geometry && element.geometry.length > 0) {\r\n      const outerRing: number[][] = [];\r\n\r\n      element.geometry.forEach((geom: any) => {\r\n        if (geom.lat && geom.lon) {\r\n          outerRing.push([geom.lon, geom.lat]);\r\n        }\r\n      });\r\n\r\n      if (outerRing.length > 2) {\r\n        // Close the ring if needed\r\n        if (outerRing[0][0] !== outerRing[outerRing.length - 1][0] ||\r\n            outerRing[0][1] !== outerRing[outerRing.length - 1][1]) {\r\n          outerRing.push([...outerRing[0]]);\r\n        }\r\n        coordinates.push(outerRing);\r\n      }\r\n    }\r\n\r\n    if (coordinates.length > 0) {\r\n      return {\r\n        type: 'Polygon',\r\n        coordinates: coordinates\r\n      };\r\n    }\r\n  }\r\n\r\n  if (element.type === 'way') {\r\n    const coordinates: number[][] = [];\r\n\r\n    if (element.geometry) {\r\n      element.geometry.forEach((geom: any) => {\r\n        if (geom.lat && geom.lon) {\r\n          coordinates.push([geom.lon, geom.lat]);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (coordinates.length > 2) {\r\n      // Close the ring if needed for polygon\r\n      if (coordinates[0][0] !== coordinates[coordinates.length - 1][0] ||\r\n          coordinates[0][1] !== coordinates[coordinates.length - 1][1]) {\r\n        coordinates.push([...coordinates[0]]);\r\n      }\r\n\r\n      return {\r\n        type: 'Polygon',\r\n        coordinates: [coordinates]\r\n      };\r\n    }\r\n  }\r\n\r\n  return null;\r\n}","/**\r\n * Address parsing utilities Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ½ Ï„Î¿ @layera/geocoding\r\n */\r\n\r\n// Temporarily inline GeocodeResult to avoid build dependency issues\r\ninterface Coordinates {\r\n  latitude: number;\r\n  longitude: number;\r\n}\r\n\r\ninterface Address {\r\n  street?: string;\r\n  houseNumber?: string;\r\n  postalCode?: string;\r\n  city?: string;\r\n  region?: string;\r\n  country?: string;\r\n}\r\n\r\ninterface GeocodeResult {\r\n  id: string;\r\n  displayName: string;\r\n  coordinates: Coordinates;\r\n  accuracy: string;\r\n  address: Address;\r\n}\r\nimport type { AddressComponent } from '../types';\r\n\r\n/**\r\n * Parse Î­Î½Î± GeocodeResult ÏƒÎµ clickable AddressComponents\r\n * Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î± parsed fields Î±Ï€ÏŒ Ï„Î¿ geocoding Î±Î½Ï„Î¯ Î½Î± ÎºÎ¬Î½ÎµÎ¹ custom parsing\r\n */\r\nexport function parseGeocodeToComponents(result: GeocodeResult): AddressComponent[] {\r\n  const components: AddressComponent[] = [];\r\n  let index = 0;\r\n\r\n  // Street & House Number\r\n  if (result.address.street && result.address.houseNumber) {\r\n    components.push({\r\n      id: `street-${index++}`,\r\n      label: `${result.address.street} ${result.address.houseNumber}`,\r\n      type: 'street',\r\n      clickable: false, // Streets Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î½ boundaries\r\n      value: `${result.address.street} ${result.address.houseNumber}`,\r\n      className: 'address-street'\r\n    });\r\n  } else if (result.address.street) {\r\n    components.push({\r\n      id: `street-${index++}`,\r\n      label: result.address.street,\r\n      type: 'street',\r\n      clickable: false,\r\n      value: result.address.street,\r\n      className: 'address-street'\r\n    });\r\n  }\r\n\r\n  // Postal Code\r\n  if (result.address.postalCode) {\r\n    components.push({\r\n      id: `postal-${index++}`,\r\n      label: result.address.postalCode,\r\n      type: 'postalCode',\r\n      clickable: false, // Postal codes Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î½ boundaries\r\n      value: result.address.postalCode,\r\n      className: 'address-postal'\r\n    });\r\n  }\r\n\r\n  // City (clickable Î³Î¹Î± boundary)\r\n  if (result.address.city) {\r\n    components.push({\r\n      id: `city-${index++}`,\r\n      label: result.address.city,\r\n      type: 'city',\r\n      clickable: true, // Cities Î­Ï‡Î¿Ï…Î½ administrative boundaries\r\n      value: result.address.city,\r\n      className: 'address-city'\r\n    });\r\n  }\r\n\r\n  // Region/Î”Î®Î¼Î¿Ï‚ (clickable Î³Î¹Î± boundary)\r\n  if (result.address.region) {\r\n    components.push({\r\n      id: `region-${index++}`,\r\n      label: result.address.region,\r\n      type: 'region',\r\n      clickable: true, // Regions Î­Ï‡Î¿Ï…Î½ administrative boundaries\r\n      value: result.address.region,\r\n      className: 'address-region'\r\n    });\r\n  }\r\n\r\n  // Country\r\n  if (result.address.country) {\r\n    components.push({\r\n      id: `country-${index++}`,\r\n      label: result.address.country,\r\n      type: 'country',\r\n      clickable: true, // Countries Î­Ï‡Î¿Ï…Î½ boundaries\r\n      value: result.address.country,\r\n      className: 'address-country'\r\n    });\r\n  }\r\n\r\n  return components;\r\n}\r\n\r\n/**\r\n * Parse Ï„Î¿ displayName ÏƒÎµ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ components Ï€Î¿Ï… Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÏƒÏ„Î¿ parsed address\r\n * Useful Î³Î¹Î± Ï€ÎµÏÎ¹Ï€Ï„ÏÏƒÎµÎ¹Ï‚ ÏŒÏ€Ï‰Ï‚ \"ÎœÎ·Ï„ÏÎ¿Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ® Î•Î½ÏŒÏ„Î·Ï„Î± Î˜ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ·Ï‚\" Ï€Î¿Ï… Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ ÏƒÏ„Î¿ address object\r\n */\r\nexport function parseDisplayNameToAdditionalComponents(\r\n  result: GeocodeResult,\r\n  existingComponents: AddressComponent[]\r\n): AddressComponent[] {\r\n  const displayName = result.displayName;\r\n  const additionalComponents: AddressComponent[] = [];\r\n\r\n  // Î¤Î¼Î®Î¼Î±Ï„Î± Ï„Î¿Ï… displayName Ï€Î¿Ï… Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î®Î´Î· ÏƒÏ„Î± components\r\n  const existingValues = new Set(existingComponents.map(c => c.value?.toLowerCase()));\r\n\r\n  // Split by comma ÎºÎ±Î¹ ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚\r\n  const parts = displayName.split(',').map((part: string) => part.trim());\r\n\r\n  let index = existingComponents.length;\r\n\r\n  for (const part of parts) {\r\n    // Skip Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î®Î´Î·\r\n    if (existingValues.has(part.toLowerCase())) {\r\n      continue;\r\n    }\r\n\r\n    // Skip Î±Î½ ÎµÎ¯Î½Î±Î¹ Î¼ÏŒÎ½Î¿ Î±ÏÎ¹Î¸Î¼ÏŒÏ‚ (house number)\r\n    if (/^\\d+$/.test(part)) {\r\n      continue;\r\n    }\r\n\r\n    // Skip Î±Î½ ÎµÎ¯Î½Î±Î¹ Î¼ÏŒÎ½Î¿ postal code\r\n    if (/^\\d{5}$/.test(part)) {\r\n      continue;\r\n    }\r\n\r\n      // UNIVERSAL APPROACH: ÎšÎ¬Î½Î¿Ï…Î¼Îµ clickable ÎŸÎ›Î‘ ÎµÎºÏ„ÏŒÏ‚ Î±Ï€ÏŒ:\r\n    // - Î‘ÏÎ¹Î¸Î¼Î¿ÏÏ‚ Î¼ÏŒÎ½Î¿ (house numbers)\r\n    // - Postal codes\r\n    // - Î Î¿Î»Ï Î¼Î¹ÎºÏÎ¬ strings (<=2 Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚)\r\n    // Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î¸Î± ÎµÎ»Î­Î³Î¾ÎµÎ¹ Î”Î¥ÎÎ‘ÎœÎ™ÎšÎ‘ Î±Î½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ boundaries\r\n    const isNotClickable =\r\n      /^\\d+$/.test(part) || // ÎœÏŒÎ½Î¿ Î±ÏÎ¹Î¸Î¼Î¿Î¯\r\n      /^\\d{3,5}(-\\d{4})?$/.test(part) || // Postal codes\r\n      part.length <= 2; // Î Î¿Î»Ï Î¼Î¹ÎºÏÎ¬ strings\r\n\r\n    additionalComponents.push({\r\n      id: `additional-${index++}`,\r\n      label: part,\r\n      type: 'custom',\r\n      clickable: !isNotClickable, // ÎŒÎ»Î± clickable ÎµÎºÏ„ÏŒÏ‚ Î±Ï€ÏŒ Ï„Î¹Ï‚ ÎµÎ¾Î±Î¹ÏÎ­ÏƒÎµÎ¹Ï‚\r\n      value: part,\r\n      className: 'address-component'\r\n    });\r\n  }\r\n\r\n  return additionalComponents;\r\n}\r\n\r\n/**\r\n * Î™ÎµÏÎ±ÏÏ‡Î¹ÎºÎ® Ï„Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· administrative Î´Î¹Î±Î¹ÏÎ­ÏƒÎµÏ‰Î½ - Î±Ï€ÏŒ Î¼Î¹ÎºÏÏŒ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ³Î¬Î»Î¿\r\n */\r\nfunction getAdministrativeHierarchy(label: string): number {\r\n  const lowerLabel = label.toLowerCase();\r\n\r\n  // Î‘Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· Ï„ÏÏ€Î¿Ï… Î´Î¹Î¿Î¹ÎºÎ·Ï„Î¹ÎºÎ®Ï‚ Î´Î¹Î±Î¯ÏÎµÏƒÎ·Ï‚ Î¼Îµ pattern matching\r\n  if (lowerLabel.includes('Î¿Î´ÏŒÏ‚') || lowerLabel.includes('Î¿Î´ÏŒ') || lowerLabel.includes('Î»ÎµÏ‰Ï†ÏŒÏÎ¿Ï‚')) return 1;\r\n  if (lowerLabel.includes('ÏƒÏ…Î½Î¿Î¹ÎºÎ¯Î±') || lowerLabel.includes('Î³ÎµÎ¹Ï„Î¿Î½Î¹Î¬')) return 2;\r\n  if (lowerLabel.includes('Ï‡Ï‰ÏÎ¹ÏŒ') || lowerLabel.includes('ÎºÏ‰Î¼ÏŒÏ€Î¿Î»Î·')) return 3;\r\n  if (lowerLabel.includes('Ï€ÏŒÎ»Î·') || lowerLabel.includes('Î´Î®Î¼Î¿Ï‚') || lowerLabel.includes('Î´Î·Î¼ÏŒÏ„Î·Ï„Î±')) return 4;\r\n  if (lowerLabel.includes('Î½Î¿Î¼ÏŒÏ‚') || lowerLabel.includes('ÎµÏ€Î±ÏÏ‡Î¯Î±')) return 5;\r\n  if (lowerLabel.includes('Ï€ÎµÏÎ¹Ï†Î­ÏÎµÎ¹Î±') || lowerLabel.includes('Î¼Î±ÎºÎµÎ´Î¿Î½Î¯Î±') || lowerLabel.includes('Î¸ÏÎ¬ÎºÎ·') || lowerLabel.includes('Î¸ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ·')) return 6;\r\n  if (lowerLabel.includes('ÎµÎ»Î»Î¬Î´Î±') || lowerLabel.includes('greece')) return 7;\r\n\r\n  // Default Î³Î¹Î± Î¬Î³Î½Ï‰ÏƒÏ„Î¿Ï…Ï‚ Ï„ÏÏ€Î¿Ï…Ï‚ - ÏƒÏ„Î· Î¼Î­ÏƒÎ·\r\n  return 5;\r\n}\r\n\r\n/**\r\n * Combine parsed address components Î¼Îµ additional components Î±Ï€ÏŒ Ï„Î¿ displayName\r\n * Î™Î•Î¡Î‘Î¡Î§Î™ÎšÎ— Î¤Î‘ÎÎ™ÎÎŸÎœÎ—Î£Î—: Î‘Ï€ÏŒ Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿\r\n */\r\nexport function parseFullAddress(result: GeocodeResult): AddressComponent[] {\r\n  const baseComponents = parseGeocodeToComponents(result);\r\n  const additionalComponents = parseDisplayNameToAdditionalComponents(result, baseComponents);\r\n\r\n  // Combine ÏŒÎ»Î± Ï„Î± components\r\n  const allComponents = [...baseComponents, ...additionalComponents];\r\n\r\n  // Î™Î•Î¡Î‘Î¡Î§Î™ÎšÎ— Î¤Î‘ÎÎ™ÎÎŸÎœÎ—Î£Î— - Î¼Î¹ÎºÏÏŒ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ³Î¬Î»Î¿\r\n  return allComponents.sort((a, b) => {\r\n    // Î ÏÏÏ„Î± non-clickable (Î¿Î´Î¿Î¯, postal codes)\r\n    if (!a.clickable && b.clickable) return -1;\r\n    if (a.clickable && !b.clickable) return 1;\r\n\r\n    // ÎœÎµÏ„Î¬ Î¹ÎµÏÎ±ÏÏ‡Î¹ÎºÎ® Ï„Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· Î³Î¹Î± clickable components\r\n    if (a.clickable && b.clickable) {\r\n      const hierarchyA = getAdministrativeHierarchy(a.label);\r\n      const hierarchyB = getAdministrativeHierarchy(b.label);\r\n      return hierarchyA - hierarchyB; // Î‘Ï€ÏŒ Î¼Î¹ÎºÏÏŒ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ³Î¬Î»Î¿\r\n    }\r\n\r\n    // Fallback - type priority Î³Î¹Î± non-clickable\r\n    const typePriority = {\r\n      'street': 1,\r\n      'houseNumber': 2,\r\n      'postalCode': 3,\r\n      'city': 4,\r\n      'region': 5,\r\n      'custom': 6,\r\n      'country': 7\r\n    };\r\n\r\n    return (typePriority[a.type] || 999) - (typePriority[b.type] || 999);\r\n  });\r\n}"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA+BM,qBAyDO,sBA2CA,qBAeA,0BAOA;AAzJb;AAAA;AAAA;AA+BA,IAAM,sBAA0C;AAAA;AAAA,MAE9C;AAAA,QACE,MAAM,CAAC,4EAAgB,gBAAgB,oEAAa;AAAA,QACpD,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,aAAa;AAAA;AAAA,UAEX,CAAC,SAAS,OAAO;AAAA,UAAG,CAAC,OAAS,OAAO;AAAA,UAAG,CAAC,OAAS,MAAO;AAAA,UACzD,CAAC,SAAS,MAAO;AAAA,UAAG,CAAC,SAAS,OAAO;AAAA,QACvC;AAAA,MACF;AAAA;AAAA,MAGA;AAAA,QACE,MAAM,CAAC,uHAAwB,qBAAqB,yGAAoB;AAAA,QACxE,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,aAAa;AAAA;AAAA,UAEX,CAAC,IAAM,IAAI;AAAA,UAAG,CAAC,MAAM,IAAI;AAAA,UAAG,CAAC,MAAM,EAAI;AAAA,UACvC,CAAC,IAAM,EAAI;AAAA,UAAG,CAAC,IAAM,IAAI;AAAA,QAC3B;AAAA,MACF;AAAA;AAAA,MAGA;AAAA,QACE,MAAM,CAAC,sEAAe,eAAe,sEAAe,oEAAa;AAAA,QACjE,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,aAAa;AAAA,UACX,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,WAAW,UAAU;AAAA,UAAG,CAAC,YAAY,SAAS;AAAA,UACzE,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,SAAS;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,WAAW,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,WAAW,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC1E,CAAC,WAAW,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,WAAW,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,WAAW,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC1E,CAAC,WAAW,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,SAAS;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,SAAS;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC3E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,WAAW,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,WAAW,UAAU;AAAA,UAC1E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC3E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC3E,CAAC,WAAW,UAAU;AAAA,UAAG,CAAC,YAAY,SAAS;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UACzE,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC3E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,UAC3E,CAAC,YAAY,UAAU;AAAA,UAAG,CAAC,YAAY,UAAU;AAAA,QACnD;AAAA,MACF;AAAA,IACF;AAKO,IAAM,uBAAuB,CAClC,gBACoC;AAEpC,YAAM,wBAAwB,YAC3B,OAAO,UAAQ,QAAQ,OAAO,SAAS,QAAQ,EAC/C,IAAI,UAAQ,KAAK,YAAY,EAAE,KAAK,CAAC;AAGxC,iBAAW,YAAY,qBAAqB;AAC1C,cAAM,UAAU,SAAS,KAAK,KAAK,SAAO;AACxC,gBAAM,gBAAgB,IAAI,YAAY;AACtC,iBAAO,sBAAsB;AAAA,YAAK,gBAChC,WAAW,SAAS,aAAa,KAAK,cAAc,SAAS,UAAU;AAAA,UACzE;AAAA,QACF,CAAC;AAED,YAAI,SAAS;AACX,kBAAQ,IAAI,sDAAkC,SAAS,IAAI,EAAE;AAC7D,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,UAAU,CAAC;AAAA,cACT,MAAM;AAAA,cACN,YAAY;AAAA,gBACV,MAAM,SAAS;AAAA,gBACf,aAAa,SAAS;AAAA,gBACtB,UAAU;AAAA,cACZ;AAAA,cACA,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa,CAAC,SAAS,WAAW;AAAA,cACpC;AAAA,YACF,CAAC;AAAA,UACH;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAKO,IAAM,sBAAsB,CAAC,aAAqC;AAEvE,YAAM,SAAS,oBAAoB;AAAA,QAAK,OACtC,EAAE,KAAK,KAAK,SAAO,SAAS,KAAK,SAAS,GAAG,CAAC;AAAA,MAChD;AAEA,UAAI,CAAC,QAAQ;AACX,4BAAoB,KAAK,QAAQ;AACjC,gBAAQ,IAAI,sCAA+B,SAAS,IAAI,EAAE;AAAA,MAC5D;AAAA,IACF;AAKO,IAAM,2BAA2B,MAAmC;AACzE,aAAO;AAAA,IACT;AAKO,IAAM,0BAA0B,MAAY;AACjD,0BAAoB,SAAS;AAAA,IAC/B;AAAA;AAAA;;;AChJA,SAAS,UAAU,aAAa,iBAAiB;AACjD,SAAS,gBAAgB;AACzB,SAAS,cAAc;AACvB,SAAS,cAAc,eAAe;;;;ACP/B,IAAM,UAAkC,CAAC,EAC9C,OAAO,MACP,UAAU,WACV,OACA,QAAQ,UACR,YAAY,GAAE,MACX;AACH,QAAM,iBAAiB;IACrB;IACA,mBAAmB,IAAI;IACvB,mBAAmB,OAAO;IAC1B,yBAAyB,KAAK;IAC9B;IACA,OAAO,OAAO,EAAE,KAAK,GAAG;AAE1B,QAAM,eAAe,QAAQ,EAAE,MAAK,IAAK;AAEzC,QAAM,gBAAgB,MAAK;AACzB,YAAQ,SAAO;MACb,KAAK;AACH,eACE,MAAA;UAAA;UAAA,EAAK,WAAW,gBAAgB,OAAO,aAAY;UACjD,MAAA,cAAA,OAAA,EAAK,WAAU,sBAAqB,CAAA;UACpC,MAAA,cAAA,OAAA,EAAK,WAAU,sBAAqB,CAAA;UACpC,MAAA,cAAA,OAAA,EAAK,WAAU,sBAAqB,CAAA;QAAG;MAI7C,KAAK;AACH,eACE,MAAA;UAAA;UAAA,EAAK,WAAW,gBAAgB,OAAO,aAAY;UACjD,MAAA,cAAA,OAAA,EAAK,WAAU,wBAAuB,CAAA;QAAG;MAI/C,KAAK;AACH,eACE,MAAA;UAAA;UAAA,EAAK,WAAW,gBAAgB,OAAO,aAAY;UACjD,MAAA;YAAA;YAAA,EAAK,WAAU,uBAAsB;YACnC,MAAA,cAAA,OAAA,IAAA;YACA,MAAA,cAAA,OAAA,IAAA;YACA,MAAA,cAAA,OAAA,IAAA;YACA,MAAA,cAAA,OAAA,IAAA;UAAO;QACH;MAIZ,KAAK;AACH,eACE,MAAA;UAAA;UAAA,EAAK,WAAW,gBAAgB,OAAO,aAAY;UACjD,MAAA;YAAA;YAAA,EAAK,WAAU,uBAAsB;YACnC,MAAA,cAAA,OAAA,IAAA;YACA,MAAA,cAAA,OAAA,IAAA;YACA,MAAA,cAAA,OAAA,IAAA;YACA,MAAA,cAAA,OAAA,IAAA;YACA,MAAA,cAAA,OAAA,IAAA;UAAO;QACH;MAIZ;AACE,eACE,MAAA;UAAA;UAAA,EAAK,WAAW,gBAAgB,OAAO,aAAY;UACjD,MAAA;YAAA;YAAA,EACE,WAAU,0BACV,SAAQ,aACR,MAAK,OAAM;YAEX,MAAA,cAAA,UAAA,EACE,WAAU,yBACV,IAAG,MACH,IAAG,MACH,GAAE,MACF,MAAK,QACL,QAAO,gBACP,aAAY,KACZ,SAAQ,MAAK,CAAA;YAEf,MAAA,cAAA,UAAA,EACE,WAAU,4BACV,IAAG,MACH,IAAG,MACH,GAAE,MACF,MAAK,QACL,QAAO,gBACP,aAAY,KACZ,eAAc,SACd,iBAAgB,UAChB,kBAAiB,SAAQ,CAAA;UACzB;QACE;;EAIhB;AAEA,SAAO,cAAa;AACtB;;;ADxFA,SAAS,4BAA4B;;;AKarC,IAAM,iBAAiB;AAAA,EACrB,CAAC,cAA+B,GAAG;AAAA,IACjC;AAAA;AAAA,IACA;AAAA,EACF;AAAA,EACA,CAAC,iBAAkC,GAAG;AAAA,IACpC;AAAA,EACF;AAAA,EACA,CAAC,oBAAqC,GAAG;AAAA,IACvC;AAAA,EACF;AAAA,EACA,CAAC,eAAgC,GAAG;AAAA,IAClC;AAAA,EACF;AAAA,EACA,CAAC,sBAAuC,GAAG;AAAA,IACzC;AAAA,EACF;AAAA,EACA,CAAC,oBAAqC,GAAG;AAAA,IACvC;AAAA,EACF;AAAA,EACA,CAAC,oBAAqC,GAAG;AAAA,IACvC;AAAA,EACF;AAAA,EACA,CAAC,kBAAmC,GAAG;AAAA,IACrC;AAAA,EACF;AAAA,EACA,CAAC,cAA+B,GAAG;AAAA,IACjC;AAAA,EACF;AAAA,EACA,CAAC,sBAAsC,GAAG;AAAA,IACxC;AAAA,EACF;AAAA,EACA,CAAC,gBAAgC,GAAG;AAAA,IAClC;AAAA,EACF;AACF;AAKO,SAAS,uBAAuB,MAAwC;AAC7E,QAAM,YAAY,KAAK,KAAK;AAG5B,aAAW,CAAC,OAAO,QAAQ,KAAK,OAAO,QAAQ,cAAc,GAAG;AAC9D,eAAW,WAAW,UAAU;AAC9B,UAAI,QAAQ,KAAK,SAAS,GAAG;AAC3B,eAAO,SAAS,KAAK;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAGA,SAAO;AACT;AAKO,SAAS,iBAAiB,OAA2B;AAC1D,QAAM,UAAoB,CAAC;AAC3B,QAAM,OAAO,oBAAI,IAAY;AAE7B,aAAW,QAAQ,OAAO;AACxB,UAAM,aAAa,cAAc,IAAI;AAGrC,QAAI,KAAK,IAAI,UAAU,GAAG;AACxB;AAAA,IACF;AAGA,UAAM,cAAc,MAAM,KAAK,IAAI,EAAE,KAAK,cAAY;AACpD,aAAO,gBAAgB,YAAY,QAAQ;AAAA,IAC7C,CAAC;AAED,QAAI,CAAC,aAAa;AAChB,WAAK,IAAI,UAAU;AACnB,cAAQ,KAAK,IAAI;AAAA,IACnB;AAAA,EACF;AAEA,SAAO;AACT;AAKA,SAAS,cAAc,MAAsB;AAC3C,SAAO,KACJ,YAAY,EACZ,QAAQ,oDAAoD,EAAE,EAC9D,QAAQ,YAAY,GAAG,EACvB,QAAQ,QAAQ,GAAG,EACnB,KAAK;AACV;AAMA,SAAS,gBAAgB,OAAe,OAAwB;AAE9D,MAAI,UAAU,MAAO,QAAO;AAG5B,MAAI,MAAM,SAAS,KAAK,GAAG;AACzB,UAAM,QAAQ,MAAM,SAAS,MAAM;AACnC,QAAI,QAAQ,IAAK,QAAO;AAAA,EAC1B;AACA,MAAI,MAAM,SAAS,KAAK,GAAG;AACzB,UAAM,QAAQ,MAAM,SAAS,MAAM;AACnC,QAAI,QAAQ,IAAK,QAAO;AAAA,EAC1B;AAGA,QAAM,aAAa,oBAAoB,OAAO,KAAK;AACnD,SAAO,aAAa;AACtB;AAKA,SAAS,oBAAoB,MAAc,MAAsB;AAC/D,QAAM,SAAS,KAAK,SAAS,KAAK,SAAS,OAAO;AAClD,QAAM,UAAU,KAAK,SAAS,KAAK,SAAS,OAAO;AAEnD,MAAI,OAAO,WAAW,EAAG,QAAO;AAEhC,QAAM,WAAW,oBAAoB,QAAQ,OAAO;AACpD,UAAQ,OAAO,SAAS,YAAY,OAAO;AAC7C;AAKA,SAAS,oBAAoB,MAAc,MAAsB;AAC/D,QAAM,SAAS,MAAM,KAAK,SAAS,CAAC,EAAE,KAAK,IAAI,EAAE,IAAI,MAAM,MAAM,KAAK,SAAS,CAAC,EAAE,KAAK,IAAI,CAAC;AAE5F,WAAS,IAAI,GAAG,KAAK,KAAK,QAAQ,IAAK,QAAO,CAAC,EAAE,CAAC,IAAI;AACtD,WAAS,IAAI,GAAG,KAAK,KAAK,QAAQ,IAAK,QAAO,CAAC,EAAE,CAAC,IAAI;AAEtD,WAAS,IAAI,GAAG,KAAK,KAAK,QAAQ,KAAK;AACrC,aAAS,IAAI,GAAG,KAAK,KAAK,QAAQ,KAAK;AACrC,YAAM,OAAO,KAAK,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,IAAI,IAAI;AAC/C,aAAO,CAAC,EAAE,CAAC,IAAI,KAAK;AAAA,QAClB,OAAO,CAAC,EAAE,IAAI,CAAC,IAAI;AAAA;AAAA,QACnB,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI;AAAA;AAAA,QACnB,OAAO,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI;AAAA;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAEA,SAAO,OAAO,KAAK,MAAM,EAAE,KAAK,MAAM;AACxC;AAOO,SAAS,8BAA8B,aAA6B;AACzE,UAAQ,IAAI,oDAA6C,WAAW;AAGpE,QAAM,QAAQ,YACX,MAAM,GAAG,EACT,IAAI,UAAQ,KAAK,KAAK,CAAC,EACvB,OAAO,UAAQ,KAAK,SAAS,CAAC;AAEjC,UAAQ,IAAI,4BAAqB,KAAK;AAGtC,MAAI,4BAA4B;AAChC,QAAM,iBAA2B,CAAC;AAClC,MAAI,aAAa;AAGjB,QAAM,cAAc,MAAM,UAAU,UAAQ,qBAAqB,KAAK,IAAI,CAAC;AAC3E,MAAI,gBAAgB,IAAI;AACtB,iBAAa,MAAM,WAAW;AAAA,EAChC;AAGA,QAAM,cAAc,MAAM,UAAU,UAAQ,aAAa,KAAK,IAAI,CAAC;AACnE,MAAI,gBAAgB,IAAI;AACtB,gCAA4B,aACxB,GAAG,MAAM,WAAW,CAAC,KAAK,UAAU,KACpC,MAAM,WAAW;AAAA,EACvB;AAGA,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,UAAM,OAAO,MAAM,CAAC;AAGpB,QAAI,qBAAqB,KAAK,IAAI,EAAG;AAErC,QAAI,QAAQ,KAAK,IAAI,EAAG;AAExB,QAAI,MAAM,YAAa;AAEvB,mBAAe,KAAK,IAAI;AAAA,EAC1B;AAEA,UAAQ,IAAI,kDAAsC,yBAAyB;AAC3E,UAAQ,IAAI,+BAAwB,cAAc;AAGlD,QAAM,uBAAuB,iBAAiB,cAAc;AAC5D,UAAQ,IAAI,mCAA8B,oBAAoB;AAG9D,QAAM,oBAAoB,qBACvB,IAAI,WAAS;AAAA,IACZ,MAAM;AAAA,IACN,OAAO,uBAAuB,IAAI;AAAA,EACpC,EAAE,EACD,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK,EAChC,IAAI,UAAQ,KAAK,IAAI;AAExB,UAAQ,IAAI,2DAA+C,iBAAiB;AAG5E,QAAM,aAAa,CAAC;AACpB,MAAI,2BAA2B;AAC7B,eAAW,KAAK,yBAAyB;AAAA,EAC3C;AACA,aAAW,KAAK,GAAG,iBAAiB;AAGpC,QAAM,qBAAqB,WAAW,KAAK,IAAI;AAC/C,UAAQ,IAAI,wCAAiC,kBAAkB;AAE/D,SAAO;AACT;AAKO,SAAS,0BAA0B,aAAwD;AAChG,QAAM,YAAY,YAAY,YAAY;AAE1C,MAAI,UAAU,SAAS,sCAAQ,KAAK,UAAU,SAAS,QAAQ,GAAG;AAChE,WAAO;AAAA,EACT;AAEA,MAAI,UAAU,SAAS,UAAU,KAAK,UAAU,SAAS,wDAAW,GAAG;AACrE,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAKO,SAAS,4BAA4B,aAA6B;AACvE,QAAM,UAAU,0BAA0B,WAAW;AAErD,UAAQ,SAAS;AAAA,IACf,KAAK;AACH,aAAO,8BAA8B,WAAW;AAAA,IAElD,KAAK;AAEH,aAAO;AAAA;AAAA,IAET;AAEE,aAAO,8BAA8B,WAAW;AAAA,EACpD;AACF;;;ACrSO,IAAM,kCAAkC,OAC7C,qBACgC;AAChC,MAAI;AACF,YAAQ,IAAI,mDAA6B,iBAAiB,KAAK,EAAE;AAGjE,UAAM,YAAY,gDAAgD,mBAAmB,iBAAiB,KAAK,CAAC;AAE5G,UAAM,iBAAiB,MAAM,MAAM,WAAW;AAAA,MAC5C,SAAS;AAAA,QACP,cAAc;AAAA,MAChB;AAAA,IACF,CAAC;AAED,QAAI,CAAC,eAAe,IAAI;AACtB,YAAM,IAAI,MAAM,oBAAoB,eAAe,MAAM,EAAE;AAAA,IAC7D;AAEA,UAAM,aAAa,MAAM,eAAe,KAAK;AAE7C,QAAI,cAAc,WAAW,SAAS,GAAG;AACvC,YAAM,SAAS,WAAW,CAAC;AAG3B,UAAI,OAAO,SAAS;AAClB,gBAAQ,IAAI,gDAA4B,iBAAiB,KAAK,iBAAO,OAAO,QAAQ,cAAc,CAAC,GAAG,UAAU,CAAC,uCAAS;AAE1H,eAAO;AAAA,UACL,MAAM;AAAA,UACN,UAAU,CAAC;AAAA,YACT,MAAM;AAAA,YACN,YAAY;AAAA,cACV,MAAM,OAAO,eAAe,4BAA4B,OAAO,YAAY,IAAI,iBAAiB;AAAA,cAChG,aAAa;AAAA,cACb,UAAU;AAAA,cACV,QAAQ,OAAO,UAAU;AAAA,cACzB,UAAU,OAAO,YAAY;AAAA,YAC/B;AAAA,YACA,UAAU,OAAO;AAAA,UACnB,CAAC;AAAA,QACH;AAAA,MACF,WAES,OAAO,aAAa;AAC3B,cAAM,OAAO,OAAO;AAGpB,cAAM,QAAQ,WAAW,KAAK,CAAC,CAAC;AAChC,cAAM,QAAQ,WAAW,KAAK,CAAC,CAAC;AAChC,cAAM,OAAO,WAAW,KAAK,CAAC,CAAC;AAC/B,cAAM,OAAO,WAAW,KAAK,CAAC,CAAC;AAE/B,gBAAQ,IAAI,sDAA6B,iBAAiB,KAAK,yBAAyB;AAExF,eAAO;AAAA,UACL,MAAM;AAAA,UACN,UAAU,CAAC;AAAA,YACT,MAAM;AAAA,YACN,YAAY;AAAA,cACV,MAAM,OAAO,eAAe,4BAA4B,OAAO,YAAY,IAAI,iBAAiB;AAAA,cAChG,aAAa;AAAA,cACb,UAAU;AAAA,cACV,QAAQ,OAAO,UAAU;AAAA,cACzB,UAAU,OAAO,YAAY;AAAA,YAC/B;AAAA,YACA,UAAU;AAAA,cACR,MAAM;AAAA,cACN,aAAa,CAAC;AAAA,gBACZ,CAAC,MAAM,KAAK;AAAA,gBACZ,CAAC,MAAM,KAAK;AAAA,gBACZ,CAAC,MAAM,KAAK;AAAA,gBACZ,CAAC,MAAM,KAAK;AAAA,gBACZ,CAAC,MAAM,KAAK;AAAA,cACd,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAGA,UAAM,QAAQ;AAAA;AAAA;AAAA,wDAGsC,iBAAiB,KAAK;AAAA;AAAA;AAAA;AAK1E,UAAM,WAAW,MAAM,MAAM,2CAA2C;AAAA,MACtE,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM,QAAQ,mBAAmB,KAAK,CAAC;AAAA,IACzC,CAAC;AAED,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,uBAAuB,SAAS,MAAM,EAAE;AAAA,IAC1D;AAEA,UAAM,OAAO,MAAM,SAAS,KAAK;AAEjC,QAAI,KAAK,YAAY,KAAK,SAAS,SAAS,GAAG;AAC7C,cAAQ,IAAI,qDAAiC,iBAAiB,KAAK,KAAK,KAAK,SAAS,MAAM,YAAY;AAIxG,aAAO;AAAA,QACL,MAAM;AAAA,QACN,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,YAAQ,IAAI,0DAAiC,iBAAiB,KAAK,EAAE;AACrE,WAAO;AAAA,MACL,MAAM;AAAA,MACN,UAAU,CAAC;AAAA,IACb;AAAA,EAEF,SAAS,OAAO;AACd,YAAQ,MAAM,8CAAwB,iBAAiB,KAAK,KAAK,KAAK;AAGtE,YAAQ,IAAI,sEAA6C,iBAAiB,KAAK,EAAE;AACjF,WAAO,MAAM,mBAAmB,gBAAgB;AAAA,EAClD;AACF;AAKA,eAAe,mBACb,kBAC6B;AAE7B,QAAM,WAAW,iBAAiB,MAC/B,QAAQ,aAAa,EAAE,EACvB,QAAQ,0BAA0B,EAAE,EACpC,QAAQ,kBAAkB,EAAE,EAC5B,QAAQ,8BAA8B,EAAE,EACxC,QAAQ,cAAc,EAAE,EACxB,QAAQ,cAAc,EAAE,EACxB,KAAK;AAER,UAAQ,IAAI,sEAA6C,QAAQ;AAGjE,MAAI;AACF,UAAM,EAAE,sBAAAA,sBAAqB,IAAI,MAAM;AACvC,UAAM,cAAc,CAAC,iBAAiB,OAAO,QAAQ;AACrD,UAAM,mBAAmBA,sBAAqB,WAAW;AAEzD,QAAI,kBAAkB;AACpB,cAAQ,IAAI,sCAAiC;AAC7C,aAAO;AAAA,IACT;AAAA,EACF,SAAS,eAAe;AACtB,YAAQ,KAAK,+CAAqC,aAAa;AAAA,EACjE;AAGA,UAAQ,MAAM,4DAAsC,iBAAiB,KAAK;AAC1E,SAAO;AAAA,IACL,MAAM;AAAA,IACN,UAAU,CAAC;AAAA,EACb;AACF;;;AChJO,SAAS,yBAAyB,QAA2C;AAClF,QAAM,aAAiC,CAAC;AACxC,MAAI,QAAQ;AAGZ,MAAI,OAAO,QAAQ,UAAU,OAAO,QAAQ,aAAa;AACvD,eAAW,KAAK;AAAA,MACd,IAAI,UAAU,OAAO;AAAA,MACrB,OAAO,GAAG,OAAO,QAAQ,MAAM,IAAI,OAAO,QAAQ,WAAW;AAAA,MAC7D,MAAM;AAAA,MACN,WAAW;AAAA;AAAA,MACX,OAAO,GAAG,OAAO,QAAQ,MAAM,IAAI,OAAO,QAAQ,WAAW;AAAA,MAC7D,WAAW;AAAA,IACb,CAAC;AAAA,EACH,WAAW,OAAO,QAAQ,QAAQ;AAChC,eAAW,KAAK;AAAA,MACd,IAAI,UAAU,OAAO;AAAA,MACrB,OAAO,OAAO,QAAQ;AAAA,MACtB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO,OAAO,QAAQ;AAAA,MACtB,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAGA,MAAI,OAAO,QAAQ,YAAY;AAC7B,eAAW,KAAK;AAAA,MACd,IAAI,UAAU,OAAO;AAAA,MACrB,OAAO,OAAO,QAAQ;AAAA,MACtB,MAAM;AAAA,MACN,WAAW;AAAA;AAAA,MACX,OAAO,OAAO,QAAQ;AAAA,MACtB,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAGA,MAAI,OAAO,QAAQ,MAAM;AACvB,eAAW,KAAK;AAAA,MACd,IAAI,QAAQ,OAAO;AAAA,MACnB,OAAO,OAAO,QAAQ;AAAA,MACtB,MAAM;AAAA,MACN,WAAW;AAAA;AAAA,MACX,OAAO,OAAO,QAAQ;AAAA,MACtB,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAGA,MAAI,OAAO,QAAQ,QAAQ;AACzB,eAAW,KAAK;AAAA,MACd,IAAI,UAAU,OAAO;AAAA,MACrB,OAAO,OAAO,QAAQ;AAAA,MACtB,MAAM;AAAA,MACN,WAAW;AAAA;AAAA,MACX,OAAO,OAAO,QAAQ;AAAA,MACtB,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAGA,MAAI,OAAO,QAAQ,SAAS;AAC1B,eAAW,KAAK;AAAA,MACd,IAAI,WAAW,OAAO;AAAA,MACtB,OAAO,OAAO,QAAQ;AAAA,MACtB,MAAM;AAAA,MACN,WAAW;AAAA;AAAA,MACX,OAAO,OAAO,QAAQ;AAAA,MACtB,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAMO,SAAS,uCACd,QACA,oBACoB;AACpB,QAAM,cAAc,OAAO;AAC3B,QAAM,uBAA2C,CAAC;AAGlD,QAAM,iBAAiB,IAAI,IAAI,mBAAmB,IAAI,OAAK,EAAE,OAAO,YAAY,CAAC,CAAC;AAGlF,QAAM,QAAQ,YAAY,MAAM,GAAG,EAAE,IAAI,CAAC,SAAiB,KAAK,KAAK,CAAC;AAEtE,MAAI,QAAQ,mBAAmB;AAE/B,aAAW,QAAQ,OAAO;AAExB,QAAI,eAAe,IAAI,KAAK,YAAY,CAAC,GAAG;AAC1C;AAAA,IACF;AAGA,QAAI,QAAQ,KAAK,IAAI,GAAG;AACtB;AAAA,IACF;AAGA,QAAI,UAAU,KAAK,IAAI,GAAG;AACxB;AAAA,IACF;AAOA,UAAM,iBACJ,QAAQ,KAAK,IAAI;AAAA,IACjB,qBAAqB,KAAK,IAAI;AAAA,IAC9B,KAAK,UAAU;AAEjB,yBAAqB,KAAK;AAAA,MACxB,IAAI,cAAc,OAAO;AAAA,MACzB,OAAO;AAAA,MACP,MAAM;AAAA,MACN,WAAW,CAAC;AAAA;AAAA,MACZ,OAAO;AAAA,MACP,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAKA,SAAS,2BAA2B,OAAuB;AACzD,QAAM,aAAa,MAAM,YAAY;AAGrC,MAAI,WAAW,SAAS,0BAAM,KAAK,WAAW,SAAS,oBAAK,KAAK,WAAW,SAAS,kDAAU,EAAG,QAAO;AACzG,MAAI,WAAW,SAAS,kDAAU,KAAK,WAAW,SAAS,kDAAU,EAAG,QAAO;AAC/E,MAAI,WAAW,SAAS,gCAAO,KAAK,WAAW,SAAS,kDAAU,EAAG,QAAO;AAC5E,MAAI,WAAW,SAAS,0BAAM,KAAK,WAAW,SAAS,gCAAO,KAAK,WAAW,SAAS,kDAAU,EAAG,QAAO;AAC3G,MAAI,WAAW,SAAS,gCAAO,KAAK,WAAW,SAAS,4CAAS,EAAG,QAAO;AAC3E,MAAI,WAAW,SAAS,8DAAY,KAAK,WAAW,SAAS,wDAAW,KAAK,WAAW,SAAS,gCAAO,KAAK,WAAW,SAAS,oEAAa,EAAG,QAAO;AACxJ,MAAI,WAAW,SAAS,sCAAQ,KAAK,WAAW,SAAS,QAAQ,EAAG,QAAO;AAG3E,SAAO;AACT;AAMO,SAAS,iBAAiB,QAA2C;AAC1E,QAAM,iBAAiB,yBAAyB,MAAM;AACtD,QAAM,uBAAuB,uCAAuC,QAAQ,cAAc;AAG1F,QAAM,gBAAgB,CAAC,GAAG,gBAAgB,GAAG,oBAAoB;AAGjE,SAAO,cAAc,KAAK,CAAC,GAAG,MAAM;AAElC,QAAI,CAAC,EAAE,aAAa,EAAE,UAAW,QAAO;AACxC,QAAI,EAAE,aAAa,CAAC,EAAE,UAAW,QAAO;AAGxC,QAAI,EAAE,aAAa,EAAE,WAAW;AAC9B,YAAM,aAAa,2BAA2B,EAAE,KAAK;AACrD,YAAM,aAAa,2BAA2B,EAAE,KAAK;AACrD,aAAO,aAAa;AAAA,IACtB;AAGA,UAAM,eAAe;AAAA,MACnB,UAAU;AAAA,MACV,eAAe;AAAA,MACf,cAAc;AAAA,MACd,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,UAAU;AAAA,MACV,WAAW;AAAA,IACb;AAEA,YAAQ,aAAa,EAAE,IAAI,KAAK,QAAQ,aAAa,EAAE,IAAI,KAAK;AAAA,EAClE,CAAC;AACH;;;AP/DmC,cAKvB,YALuB;AA9H5B,SAAS,qBAAqB;AAAA,EACnC;AAAA,EACA,SAAS,CAAC;AAAA,EACV;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY;AAAA,EACZ,QAAQ;AACV,GAA8B;AAC5B,QAAM,EAAE,EAAE,IAAI,qBAAqB;AACnC,QAAM,CAAC,iBAAiB,kBAAkB,IAAI,SAAwB,IAAI;AAC1E,QAAM,CAAC,eAAe,gBAAgB,IAAI,SAAwB,IAAI;AACtE,QAAM,CAAC,cAAc,eAAe,IAAI,SAAiB,CAAC;AAG1D,YAAU,MAAM;AACd,QAAI;AAEJ,QAAI,iBAAiB;AACnB,sBAAgB,CAAC;AACjB,iBAAW,YAAY,MAAM;AAC3B,wBAAgB,UAAQ,OAAO,CAAC;AAAA,MAClC,GAAG,GAAI;AAAA,IACT,OAAO;AACL,sBAAgB,CAAC;AAAA,IACnB;AAEA,WAAO,MAAM;AACX,UAAI,UAAU;AACZ,sBAAc,QAAQ;AAAA,MACxB;AAAA,IACF;AAAA,EACF,GAAG,CAAC,eAAe,CAAC;AAGpB,QAAM,cAAc;AAAA,IAClB,QAAQ;AAAA,IACR,sBAAsB;AAAA,IACtB,eAAe;AAAA,IACf,GAAG;AAAA,EACL;AAGA,QAAM,aAAa,iBAAiB,aAAa;AACjD,QAAM,oBAAoB,YAAY,gBAClC,WAAW,MAAM,GAAG,YAAY,aAAa,IAC7C;AAMJ,QAAM,uBAAuB,YAAY,OAAO,cAAgC;AAC9E,QAAI,CAAC,UAAU,aAAa,CAAC,YAAY,sBAAsB;AAC7D;AAAA,IACF;AAEA,QAAI,YAAY,kBAAkB;AAChC,kBAAY,iBAAiB,SAAS;AAAA,IACxC;AAEA,YAAQ,IAAI,2CAAoC,UAAU,KAAK,SAAS,UAAU,EAAE,EAAE;AACtF,uBAAmB,UAAU,EAAE;AAC/B,qBAAiB,IAAI;AAErB,QAAI;AAEF,cAAQ,IAAI,oCAA6B,UAAU,KAAK,EAAE;AAC1D,YAAM,eAAe,MAAM,gCAAgC;AAAA,QACzD,OAAO,UAAU;AAAA,QACjB,MAAM,UAAU;AAAA,MAClB,CAAC;AAED,UAAI,gBAAgB,aAAa,YAAY,aAAa,SAAS,SAAS,GAAG;AAC7E,gBAAQ,IAAI,8BAAyB,aAAa,SAAS,MAAM,WAAW;AAG5E,cAAM,QAAQ,IAAI,YAAY,8BAA8B;AAAA,UAC1D,QAAQ;AAAA,YACN,MAAM;AAAA,YACN;AAAA,YACA;AAAA,YACA,UAAU;AAAA,UACZ;AAAA,QACF,CAAC;AACD,eAAO,cAAc,KAAK;AAE1B,gBAAQ,IAAI,4CAAqC,UAAU,KAAK,EAAE;AAAA,MACpE,OAAO;AACL,gBAAQ,KAAK,4CAAkC,UAAU,KAAK,EAAE;AAChE,yBAAiB,mHAAyB,UAAU,KAAK,EAAE;AAAA,MAC7D;AAAA,IACF,SAASC,QAAO;AACd,uBAAiB,iCAAiC,UAAU,KAAK,EAAE;AACnE,cAAQ,MAAM,0BAA0BA,MAAK;AAAA,IAC/C,UAAE;AACA,cAAQ,IAAI,4CAAqC,UAAU,KAAK,0BAA0B;AAC1F,yBAAmB,IAAI;AAAA,IACzB;AAAA,EACF,GAAG,CAAC,aAAa,eAAe,CAAC,CAAC;AAKlC,QAAM,kBAAkB,CAAC,cAAgC;AACvD,UAAMC,aAAY,oBAAoB,UAAU;AAChD,UAAM,cAAc,UAAU,aAAa,YAAY;AAGvD,UAAM,iBAAiB;AAAA,MACrB,WAAW,qBAAqB,UAAU,aAAa,EAAE,IAAI,cAAc,cAAc,EAAE;AAAA,MAC3F,SAAS,cAAc,MAAM,qBAAqB,SAAS,IAAI;AAAA,MAC/D,UAAUA,cAAa,CAAC,CAAC;AAAA,MACzB,OAAO;AAAA,QACL,QAAQ,cAAc,YAAY;AAAA,QAClC,SAASA,aAAY,MAAM;AAAA,MAC7B;AAAA,IACF;AAEA,QAAI,YAAY,WAAW,QAAQ;AACjC,aACE;AAAA,QAAC;AAAA;AAAA,UAEE,GAAG;AAAA,UACJ,SAAS,cAAc,YAAY;AAAA,UACnC,MAAK;AAAA,UACL,WAAW,cAAc,oBAAC,WAAQ,IAAK,oBAAC,gBAAa;AAAA,UACrD,SAASA;AAAA,UAER;AAAA,sBAAU;AAAA,YACVA,cACC,qBAAC,UAAK,OAAO;AAAA,cACX,YAAY;AAAA,cACZ,UAAU;AAAA,cACV,OAAO;AAAA,YACT,GAAG;AAAA;AAAA,cACC;AAAA,cAAa;AAAA,eACjB;AAAA;AAAA;AAAA,QAfG,UAAU;AAAA,MAiBjB;AAAA,IAEJ;AAGA,WACE;AAAA,MAAC;AAAA;AAAA,QAEE,GAAG;AAAA,QACJ,WAAW,aAAa,eAAe,SAAS;AAAA,QAChD,OAAO;AAAA,UACL,GAAG,eAAe;AAAA,UAClB,SAAS;AAAA,UACT,cAAc;AAAA,UACd,cAAc;AAAA,UACd,QAAQ;AAAA,UACR,YAAY;AAAA,UACZ,iBAAiB,cAAc,YAAY;AAAA,UAC3C,WAAW;AAAA;AAAA,UACX,GAAI,eAAe;AAAA,YACjB,UAAU;AAAA,cACR,iBAAiB;AAAA,cACjB,aAAa;AAAA,cACb,WAAW;AAAA,cACX,WAAW;AAAA,YACb;AAAA,UACF;AAAA,QACF;AAAA,QACA,cAAc,CAAC,MAAM;AACnB,cAAI,eAAe,CAACA,YAAW;AAC7B,cAAE,cAAc,MAAM,kBAAkB;AACxC,cAAE,cAAc,MAAM,cAAc;AACpC,cAAE,cAAc,MAAM,YAAY;AAClC,cAAE,cAAc,MAAM,YAAY;AAAA,UACpC;AAAA,QACF;AAAA,QACA,cAAc,CAAC,MAAM;AACnB,cAAI,eAAe,CAACA,YAAW;AAC7B,cAAE,cAAc,MAAM,kBAAkB;AACxC,cAAE,cAAc,MAAM,cAAc;AACpC,cAAE,cAAc,MAAM,YAAY;AAClC,cAAE,cAAc,MAAM,YAAY;AAAA,UACpC;AAAA,QACF;AAAA,QAEA;AAAA,+BAAC,SAAI,WAAU,qBAAoB,OAAO;AAAA,YACxC,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,gBAAgB;AAAA;AAAA,YAChB,KAAK;AAAA,YACL,OAAO;AAAA,UACT,GACG;AAAA,YAAAA,aACC,oBAAC,WAAQ,MAAK,MAAK,SAAQ,WAAU,IACnC,cACF,oBAAC,WAAQ,WAAU,aAAY,OAAO;AAAA,cACpC,OAAO;AAAA,cACP,QAAQ;AAAA,cACR,OAAO;AAAA,YACT,GAAG,IAEH,oBAAC,gBAAa,WAAU,aAAY,OAAO;AAAA,cACzC,OAAO;AAAA,cACP,QAAQ;AAAA,cACR,OAAO;AAAA,YACT,GAAG;AAAA,YAEL,oBAAC,UAAK,WAAU,cAAa,OAAO;AAAA,cAClC,MAAM;AAAA,cACN,UAAU;AAAA,cACV,OAAO,cAAc,YAAY;AAAA,cACjC,YAAY,cAAc,QAAQ;AAAA,cAClC,WAAW;AAAA;AAAA,cACX,YAAY;AAAA,cACZ,UAAU;AAAA,cACV,cAAc;AAAA,YAChB,GACG,oBAAU,OACb;AAAA,aACF;AAAA,UACCA,cACC,qBAAC,SAAI,WAAU,qBAAoB,OAAO;AAAA,YACxC,WAAW;AAAA,YACX,UAAU;AAAA,YACV,OAAO;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,KAAK;AAAA,UACP,GACE;AAAA,gCAAC,UAAK,sJAA0B;AAAA,YAChC,qBAAC,UAAK,OAAO;AAAA,cACX,YAAY;AAAA,cACZ,OAAO;AAAA,cACP,UAAU;AAAA,YACZ,GACG;AAAA;AAAA,cAAa;AAAA,eAChB;AAAA,aACF;AAAA;AAAA;AAAA,MA1FG,UAAU;AAAA,IA4FjB;AAAA,EAEJ;AAGA,QAAM,cACJ;AAAA,IAAC;AAAA;AAAA,MACC,SAAQ;AAAA,MACR,MAAK;AAAA,MACL,SAAS,MAAM;AACb,cAAM,QAAQ,IAAI,YAAY,oBAAoB;AAAA,UAChD,QAAQ;AAAA,YACN,UAAU,cAAc,YAAY;AAAA,YACpC,WAAW,cAAc,YAAY;AAAA,YACrC,MAAM;AAAA,YACN,aAAa,cAAc;AAAA,UAC7B;AAAA,QACF,CAAC;AACD,eAAO,cAAc,KAAK;AAAA,MAC5B;AAAA,MAEC,YAAE,WAAW;AAAA;AAAA,EAChB;AAGF,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,SAAS,EAAE,gBAAgB;AAAA,MAClC,SAAS;AAAA,MACT,WAAW,0BAA0B,YAAY,aAAa,EAAE;AAAA,MAChE;AAAA,MACA;AAAA,MAEC;AAAA,iBACC,oBAAC,SAAI,WAAU,iBACZ,iBACH;AAAA,QAGD,iBACC,oBAAC,SAAI,WAAU,kBACZ,yBACH;AAAA,QAID,CAAC,aAAa,kBAAkB,KAAK,OAAK,EAAE,SAAS,KAAK,YAAY,wBACrE,oBAAC,SAAI,OAAO;AAAA,UACV,UAAU;AAAA,UACV,OAAO;AAAA,UACP,cAAc;AAAA,UACd,WAAW;AAAA,QACb,GACG,YAAE,qBAAqB,GAC1B;AAAA,QAGF,oBAAC,SAAI,WAAW,6BAA6B,YAAY,MAAM,IAC5D,sBACC,oBAAC,SAAI,WAAU,iBAAgB,wBAE/B,IAEA,kBAAkB,IAAI,eAAe,GAEzC;AAAA,QAEC,WAAW,SAAS,kBAAkB,UACrC,qBAAC,SAAI,WAAU,uBAAsB;AAAA;AAAA,UACjC,WAAW,SAAS,kBAAkB;AAAA,UAAO;AAAA,WACjD;AAAA;AAAA;AAAA,EAEJ;AAEJ;","names":["findFallbackBoundary","error","isLoading"]}