{"version":3,"sources":["../src/adapters/mobile/ios/iPhone14ProMaxAdapter.ts","../src/hooks/useDeviceDetection.ts"],"sourcesContent":["/**\r\n * iPhone14ProMaxAdapter.ts - Enterprise Device Detection Adapter\r\n *\r\n * Εξαγμένη λογική από GeoMapNew.tsx για iPhone 14 Pro Max detection\r\n * Single source of truth για device detection στο Layera ecosystem\r\n */\r\n\r\nimport {\r\n  DeviceDetectionPort,\r\n  DeviceDetectionResult,\r\n  DeviceDetectionOptions,\r\n  DeviceFrame,\r\n  DeviceSpecs\r\n} from '../../../types';\r\n\r\nexport class iPhone14ProMaxAdapter implements DeviceDetectionPort {\r\n  private readonly DEFAULT_FRAME_SELECTOR = '.device-frame-wrapper';\r\n  private readonly IPHONE_14_PRO_MAX_SPECS = {\r\n    VIEWPORT_WIDTH: 430,\r\n    VIEWPORT_HEIGHT: 932,\r\n    FRAME_WIDTH_MIN: 412,\r\n    FRAME_WIDTH_MAX: 416,\r\n    FRAME_HEIGHT_MIN: 914,\r\n    FRAME_HEIGHT_MAX: 920,\r\n    EXACT_FRAME_WIDTH: 414,\r\n    EXACT_FRAME_HEIGHT: 916\r\n  } as const;\r\n\r\n  detectiPhone14ProMax(options: DeviceDetectionOptions = {}): DeviceDetectionResult {\r\n    const {\r\n      frameSelector = this.DEFAULT_FRAME_SELECTOR,\r\n      enableWindowFallback = true,\r\n      enableUserAgentFallback = true,\r\n      debugMode = false\r\n    } = options;\r\n\r\n    const frame = this.getDeviceFrame(frameSelector);\r\n    const isInFrame = this.isInDeviceFrame();\r\n\r\n    const isFrameBased = this.detectFrameBased(frame);\r\n    const isWindowBased = enableWindowFallback ? this.detectWindowBased() : false;\r\n    const isUserAgentBased = enableUserAgentFallback ? this.detectUserAgent() : false;\r\n\r\n    const isIPhone14ProMax = isFrameBased || (!isInFrame && (isWindowBased || isUserAgentBased));\r\n\r\n    const specs = this.getDeviceSpecs();\r\n\r\n    if (debugMode) {\r\n      console.log('[DeviceDetection] iPhone 14 Pro Max Detection:', {\r\n        isFrameBased,\r\n        isWindowBased,\r\n        isUserAgentBased,\r\n        isInFrame,\r\n        frame,\r\n        specs,\r\n        result: isIPhone14ProMax\r\n      });\r\n    }\r\n\r\n    return {\r\n      isIPhone14ProMax,\r\n      isFrameBased,\r\n      isWindowBased: isWindowBased || isUserAgentBased,\r\n      specs,\r\n      frame: frame || undefined\r\n    };\r\n  }\r\n\r\n  getDeviceFrame(selector: string = this.DEFAULT_FRAME_SELECTOR): DeviceFrame | null {\r\n    const element = document.querySelector(selector);\r\n\r\n    if (!element) {\r\n      return null;\r\n    }\r\n\r\n    const rect = element.getBoundingClientRect();\r\n\r\n    return {\r\n      width: rect.width,\r\n      height: rect.height,\r\n      element\r\n    };\r\n  }\r\n\r\n  isInDeviceFrame(): boolean {\r\n    return !!document.querySelector(this.DEFAULT_FRAME_SELECTOR);\r\n  }\r\n\r\n  private detectFrameBased(frame: DeviceFrame | null): boolean {\r\n    if (!frame) {\r\n      return false;\r\n    }\r\n\r\n    const { width, height } = frame;\r\n    const specs = this.IPHONE_14_PRO_MAX_SPECS;\r\n\r\n    // Exact match\r\n    const isExactMatch = width === specs.EXACT_FRAME_WIDTH && height === specs.EXACT_FRAME_HEIGHT;\r\n\r\n    // Range match\r\n    const isRangeMatch =\r\n      width >= specs.FRAME_WIDTH_MIN &&\r\n      width <= specs.FRAME_WIDTH_MAX &&\r\n      height >= specs.FRAME_HEIGHT_MIN &&\r\n      height <= specs.FRAME_HEIGHT_MAX;\r\n\r\n    return isExactMatch || isRangeMatch;\r\n  }\r\n\r\n  private detectWindowBased(): boolean {\r\n    const width = window.innerWidth;\r\n    const height = window.innerHeight;\r\n    const specs = this.IPHONE_14_PRO_MAX_SPECS;\r\n\r\n    // Portrait mode\r\n    const isPortrait = width === specs.VIEWPORT_WIDTH && height === specs.VIEWPORT_HEIGHT;\r\n\r\n    // Landscape mode\r\n    const isLandscape = width === specs.VIEWPORT_HEIGHT && height === specs.VIEWPORT_WIDTH;\r\n\r\n    return isPortrait || isLandscape;\r\n  }\r\n\r\n  private detectUserAgent(): boolean {\r\n    return /iPhone.*14.*Pro.*Max/i.test(navigator.userAgent);\r\n  }\r\n\r\n  private getDeviceSpecs(): DeviceSpecs {\r\n    const width = window.innerWidth;\r\n    const height = window.innerHeight;\r\n    const aspectRatio = width / height;\r\n    const orientation = width > height ? 'landscape' : 'portrait';\r\n\r\n    return {\r\n      width,\r\n      height,\r\n      aspectRatio,\r\n      orientation\r\n    };\r\n  }\r\n}","/**\r\n * useDeviceDetection.ts - Enterprise React Hook για Device Detection\r\n *\r\n * React hook που παρέχει reactive device detection functionality\r\n */\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { iPhone14ProMaxAdapter } from '../adapters/mobile/ios/iPhone14ProMaxAdapter';\r\nimport {\r\n  DeviceDetectionResult,\r\n  DeviceDetectionOptions\r\n} from '../types';\r\n\r\nexport interface UseDeviceDetectionResult extends DeviceDetectionResult {\r\n  refresh: () => void;\r\n}\r\n\r\nexport function useDeviceDetection(\r\n  options: DeviceDetectionOptions = {}\r\n): UseDeviceDetectionResult {\r\n  const adapter = useMemo(() => new iPhone14ProMaxAdapter(), []);\r\n\r\n  const [result, setResult] = useState<DeviceDetectionResult>(() =>\r\n    adapter.detectiPhone14ProMax(options)\r\n  );\r\n\r\n  const refresh = () => {\r\n    setResult(adapter.detectiPhone14ProMax(options));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      refresh();\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [options]);\r\n\r\n  return {\r\n    ...result,\r\n    refresh\r\n  };\r\n}\r\n\r\n// Συντομευμένη έκδοση για μόνο iPhone 14 Pro Max detection\r\nexport function useIPhone14ProMaxDetection(\r\n  options: DeviceDetectionOptions = {}\r\n): boolean {\r\n  const { isIPhone14ProMax } = useDeviceDetection(options);\r\n  return isIPhone14ProMax;\r\n}"],"mappings":"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","names":[]}