<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FullAppPreview - Modular Clean Version</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- Header Component -->
    <div id="header-container"></div>

    <!-- Main App Container -->
    <div class="app-container" style="width: 100vw;">
        <!-- Primary Sidebar (Œ±œÅŒπœÉœÑŒµœÅŒ¨) -->
        <div id="primary-sidebar-container"></div>

        <!-- Left Secondary Sidebar (Œ±œÅŒπœÉœÑŒµœÅŒ¨) -->
        <div id="secondary-sidebar-left-container"></div>

        <!-- Main Content Area (Œ∫Œ≠ŒΩœÑœÅŒø) -->
        <div id="main-content-container">
            <main class="main-content">
                <!-- Layout Controls -->
                <div id="layout-controls-container"></div>

                <!-- Modals Section -->
                <div id="modals-section-container"></div>

                <!-- Tables Section -->
                <div id="tables-section-container"></div>

                <!-- Cards Section -->
                <div id="cards-section-container"></div>
            </main>
        </div>

        <!-- Right Secondary Sidebar (Œ¥ŒµŒæŒπŒ¨) -->
        <div id="secondary-sidebar-right-container"></div>
    </div>

    <!-- Hidden Script Module Containers -->
    <div id="app-core-script" style="display: none;"></div>
    <div id="navigation-script" style="display: none;"></div>
    <div id="colors-script" style="display: none;"></div>
    <div id="typography-script" style="display: none;"></div>
    <div id="components-script" style="display: none;"></div>

    <!-- üöÄ Main App Initialization Script -->
    <script>
        // Bootstrap function Œ≥ŒπŒ± Œ±œÅœáŒπŒ∫ŒÆ œÜœåœÅœÑœâœÉŒ∑ modules ŒºŒµ script execution
        async function bootstrapLoadComponent(url, containerId) {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const html = await response.text();
                const container = document.getElementById(containerId);
                container.innerHTML = html;

                // Execute any scripts in the loaded HTML
                const scripts = container.querySelectorAll('script');
                scripts.forEach(script => {
                    const newScript = document.createElement('script');
                    newScript.textContent = script.textContent;
                    document.body.appendChild(newScript);
                    document.body.removeChild(newScript);
                });
            } catch (error) {
                console.error(`Error loading ${url}:`, error);
                document.getElementById(containerId).innerHTML = `<div style="color: red;">Error loading ${url}</div>`;
            }
        }

        // Load Script Modules
        async function loadScriptModules() {
            try {
                console.log('üîÑ Loading script modules...');
                await bootstrapLoadComponent('scripts/app-core.html', 'app-core-script');
                await bootstrapLoadComponent('scripts/navigation.html', 'navigation-script');
                await bootstrapLoadComponent('scripts/colors.html', 'colors-script');
                await bootstrapLoadComponent('scripts/typography.html', 'typography-script');
                await bootstrapLoadComponent('scripts/components.html', 'components-script');
                console.log('‚úÖ All script modules loaded successfully!');
                return true;
            } catch (error) {
                console.error('‚ùå Error loading script modules:', error);
                return false;
            }
        }

        // Main App Initialization
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ Starting clean modular app...');

            try {
                // 1. Load script modules first
                const modulesLoaded = await loadScriptModules();
                if (!modulesLoaded) {
                    throw new Error('Failed to load script modules');
                }

                // 2. Load layout components (using bootstrap function until module is ready)
                console.log('üèóÔ∏è Loading layout components...');
                await bootstrapLoadComponent('header/header.html', 'header-container');
                await bootstrapLoadComponent('sidebar/primary-sidebar.html', 'primary-sidebar-container');
                await bootstrapLoadComponent('sidebar/secondary-sidebar-left.html', 'secondary-sidebar-left-container');
                await bootstrapLoadComponent('sidebar/right-sidebar/secondary-sidebar-right.html', 'secondary-sidebar-right-container');
                console.log('‚úÖ Layout components loaded!');

                // 3. Load content via app-core module
                console.log('üì¶ Loading content components...');
                await new Promise(resolve => setTimeout(resolve, 300)); // Wait more for functions to be available

                // Check if functions are available
                console.log('üîç Checking available functions:');
                console.log('- loadRightSidebarComponents:', typeof window.loadRightSidebarComponents);
                console.log('- showTab:', typeof window.showTab);
                console.log('- switchCardTab:', typeof window.switchCardTab);
                console.log('- switchTableTab:', typeof window.switchTableTab);

                if (typeof window.loadRightSidebarComponents === 'function') {
                    await window.loadRightSidebarComponents();
                    console.log('‚úÖ All content loaded!');
                } else {
                    console.error('‚ùå loadRightSidebarComponents not available, functions:', Object.keys(window).filter(k => k.includes('load')));
                }

                // 4. Auto-activate default tabs
                setTimeout(() => {
                    console.log('üéØ Auto-activating default tabs...');

                    // Auto-click first tab in each section
                    document.querySelectorAll('.tab-button:first-child').forEach(btn => {
                        if (btn.click) btn.click();
                    });
                }, 1000);

                // 5. Setup interactive systems
                setTimeout(() => {
                    console.log('üåà Setting up interactive systems...');
                    if (window.setup6ColorSystem) setup6ColorSystem();
                    if (window.setupTypographyControls) setupTypographyControls();
                    if (window.setupComponentSizes) setupComponentSizes();
                    console.log('‚úÖ Interactive systems ready!');
                }, 2000);

                console.log('üéâ Clean modular app loaded successfully!');

            } catch (error) {
                console.error('‚ùå Error loading clean app:', error);
                document.body.innerHTML += `
                    <div style="position: fixed; top: 20px; right: 20px; background: red; color: white; padding: 1rem; border-radius: 8px; z-index: 9999;">
                        ‚ùå App Load Error: ${error.message}
                    </div>
                `;
            }
        });
    </script>
</body>
</html>